<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic/>
        <design_definition>{"type":"FlowTopic","type":"FlowTopic","triggers":[{"type":"Trigger","name":"7560892c06c84804bd8dcb693d6883c1","triggerType":"request","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"id":"7560892c06c84804bd8dcb693d6883c1"}],"goals":[{"name":"primary","trigger_id":"7560892c06c84804bd8dcb693d6883c1","nodes":[{"type":"StartGoal","type":"StartGoal","goal_id":"primary","greeting_msg":{"type":"String","type":"String","mode":"string","value":""},"id":"26892cf48e444f8c822ee31eecad2921","name":"Start"},{"type":"TerminateGoal","type":"TerminateGoal","goal_id":"primary","confirmation_msg":{"type":"String","type":"String","mode":"string","value":""},"id":"5584f283a4ad4cc4a1e9bb7b815995a7","name":"End"},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    var itemId = vaInputs.catalog_item_id.getValue();\n    var itemJSON = new sn_sc.CatalogConversationHelper().getItem(itemId);\n    vaVars.itemJSON = JSON.stringify(itemJSON);\n    vaVars.itemName = itemJSON.name;\n})()\n","id":"e35912998f8b4253b9f42d262fdd04be","name":"Set Selected Item","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"TextOutputPrompt","type":"TextOutputPrompt","value":[{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var response = gs.getMessage(\"Here are some more details about {0}\", vaVars.itemName);\n    if (itemJson.description) \n        return response + itemJson.description;\n\n    return gs.getMessage(\"Selected {0}\", vaVars.itemName);\n})()\n"}],"id":"21456a8b702c44c3a1648fe0f1472d86","name":"Item Description","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"InputPrompt","type":"InputPrompt","variable_id":"1bb2fe5e354046aeb52a63074d07ba45","message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"Should I proceed with this?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"id":"094f1837fec64b4595c053c7c3fd0f76","name":"Proceed","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"No","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"proceed=false"},"id":"a5c03cea82794e7f9fe6232e9f9734f3","name":"No"},{"type":"Branch","type":"Branch","label":"Yes","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"proceed=true"},"id":"5f0e1e90b7284dec9a0708ccd4347373","name":"Yes"}],"id":"4881683f7eb745519a84e5fcc238d61b","goal_id":"primary"},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Has VA Support","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n   return JSON.parse(vaVars.itemJSON).va_support;\n})()"},"id":"daafd7194ef64319a5b090a00fe7184c","name":"Has VA Support"},{"type":"Branch","type":"Branch","label":"No VA Support","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return !JSON.parse(vaVars.itemJSON).va_support;\n})()"},"id":"3d46131e6d3f4f20b4ffa4f8e88d8a41","name":"No VA Support"}],"id":"2c46b9ae1fd04465abe8eca9eabb0021","goal_id":"primary"},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Item with no variables","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var qIndex = parseInt(vaVars.qIndex);\n    //qIndex is -1 initially, we reset this before search again step \n    do{\n        qIndex++;\n        var question = itemJson.variables[qIndex];\n    }\n    while(question &amp;&amp; (!question.visible || question.readonly || question.sys_readonly));\n\n    if (question) {\n       //There are variables that we can show\n        return false;\n    }\n    //No variables that we can show\n    return true;\n})()\n"},"id":"a492011e6ab64fa89af39d936e99f215","name":"Item with no variables"},{"type":"Branch","type":"Branch","label":"Item with variables","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var qIndex = parseInt(vaVars.qIndex);\n    //qIndex is -1 initially, we reset this before search again step \n\n    do{\n        qIndex++;\n        var question = itemJson.variables[qIndex];\n    }\n    while(question &amp;&amp; (!question.visible || question.readonly || question.sys_readonly));\n\n    if (question) {\n       //There are variables that we can show\n        return true;\n    }\n    //No variables  that we can show\n    return false;\n})()\n"},"id":"a60956dfe77f41a48891d6e22ae12cda","name":"Item with variables"}],"id":"8f59053d36bd4cfa83acb5d215c397cb","goal_id":"primary"},{"type":"TextOutputPrompt","type":"TextOutputPrompt","value":[{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"OK, let's finish up your request.\", vaContext.getRequesterLang())"}],"id":"6fbaa8ae59c64c2686b79efd2ef08431","name":"Start Questions","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Questions Done","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var qIndex = parseInt(vaVars.qIndex);\n    //qIndex is -1 initially, we reset this before search again step \n    do{\n        qIndex++;\n        var question = itemJson.variables[qIndex];\n    }\n    while(question &amp;&amp; (!question.visible || question.readonly || question.sys_readonly));\n\n    if (question) {\n       //There are variables that we can show\n        return false;\n    }\n    //No variables that we can show\n    return true;\n})()"},"id":"854eb2937e4a4eeea49ed3a33f9454c1","name":"Questions Done"},{"type":"Branch","type":"Branch","label":"Questions Left","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n     var itemJson = JSON.parse(vaVars.itemJSON);\n    var qIndex = parseInt(vaVars.qIndex);\n    //qIndex is -1 initially, we reset this before search again step \n\n    do {\n        qIndex++;\n        var question = itemJson.variables[qIndex];\n    }\n    while(question &amp;&amp; (!question.visible || question.readonly || question.sys_readonly));\n\n    if (question) {\n        vaVars.qIndex = qIndex;\n        return true;\n    }\n    return false;\n})()"},"id":"2788cd20a13b46bd9e3b677231b9936a","name":"Questions Left"}],"id":"55b2dfb927154bfdaaf75c76e189a7c9","goal_id":"primary"},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Catalog Item","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    if (itemJson.sys_class_name !== 'sc_cat_item_producer')\n        return true;\nreturn false;\n})()\n"},"id":"99a5dc73c6574bef9cfcacb2bb856811","name":"Catalog Item"},{"type":"Branch","type":"Branch","label":"Record Producer","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    if (itemJson.sys_class_name === 'sc_cat_item_producer')\n        return true;\nreturn false;\n})()\n"},"id":"7559235432344f889db08a069422a26f","name":"Record Producer"}],"id":"546724c58ba543239e29056c7f4a87db","goal_id":"primary"},{"type":"InputPrompt","type":"InputPrompt","variable_id":"485035ff241d4d0391863449aa6a011f","message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"Alright, you're all set. Shall I submit this request?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"id":"fe37ba80718e4718b72f4dd5b4397e3e","name":"Submit Producer","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Don't Submit","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"submit_producer="},"id":"ad7352378f254c3eb7ed3550b00d78ee","name":"Don't Submit"},{"type":"Branch","type":"Branch","label":"Submit Now","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"submit_producer=true"},"id":"64828902760645058a18c390a98ebdef","name":"Submit Now"}],"id":"812ab34cae2d4bf1881b0b32d49d95e6","goal_id":"primary"},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n   var itemJson = JSON.parse(vaVars.itemJSON);\n    var variablesObj = {};\n    var attachmentIds = [];\n    for (i = 0; i &lt; itemJson.variables.length; i++) {\n        variablesObj[itemJson.variables[i].name] = itemJson.variables[i].value;\n        if (itemJson.variables[i].type === 33)\n           attachmentIds.push(itemJson.variables[i].value);\n    }\n   var reqObject = {\n       \"sysparm_id\" : itemJson.sys_id,\n       \"sysparm_action\" : 'execute_producer',\n        \"variables\" : variablesObj,\n        \"engagement_channel\" : 'va'\n   }\n   var response = new sn_sc.CatItem(itemJson.sys_id).submitProducer(reqObject);\n   if (response) {\n       vaVars.record_id = response.sys_id;\n       vaVars.record_table = response.table;\n       // add attachment to record\n       var mediaLinksFormAttachment = vaVars.media_links_form_attachment.split(',');\n       for (var i in mediaLinksFormAttachment)\n           vaSystem.attachToRecord(mediaLinksFormAttachment[i], response.table, response.sys_id);\n\n       // move attachment variable to record\n       var gr = new GlideRecord('sys_attachment');\n       gr.addQuery('sys_id', 'IN' , attachmentIds);\n       gr.query();\n       while (gr.next()) {\n           gr.setValue('table_name', 'ZZ_YY' + response.table);\n           gr.setValue('table_sys_id', response.sys_id);\n           gr.update();\n       }\n   }\n})()\n","id":"f2cefa49e5fd447eb46e0ef9cece3656","name":"Insert the Record","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"InputPrompt","type":"InputPrompt","variable_id":"c5644432f6864cb6922aaa75676f060f","message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"Alright, you're all set. Shall I submit this request?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"id":"feb78467f34a499cae13e8fbf4eec179","name":"Order Item","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Don't Order","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"order_item="},"id":"38de370bf53f47ed9b918183bc6101f0","name":"Don't Order"},{"type":"Branch","type":"Branch","label":"Order Now","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"order_item=true"},"id":"da0cf74da5dd4ad5ae236c045f28acb4","name":"Order Now"}],"id":"4998c18e83ad497f8b2d91684b84e9ca","goal_id":"primary"},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var cartname = \"vacart_\" + gs.generateGUID();\n    var cartObj = new sn_sc.CartJS(cartname);\n    cartObj.setRequestedFor(vaVars.request_for);\n    cartObj.setEngagementChannel('va');\n\n    var variablesObj = {};\n    var attachmentIds = [];\n    for (i = 0; i &lt; itemJson.variables.length; i++) {\n        variablesObj[itemJson.variables[i].name] = itemJson.variables[i].value;\n        if (itemJson.variables[i].type === 33)\n           attachmentIds.push(itemJson.variables[i].value);\n    }\n        \n\n    var reqObj = {\n        \"sysparm_id\" : itemJson.sys_id,\n        \"variables\" : variablesObj\n    };\n    cartObj.addToCart(reqObj);\n    var requestResponse = cartObj.checkoutCart(true);\n    var requestGr = new GlideRecord('sc_request');\n    if (requestGr.get(requestResponse.request_id)) {\n        var reqItemGr = new GlideRecord('sc_req_item');\n        reqItemGr.addQuery(\"request\", requestResponse.request_id);\n        reqItemGr.query();\n        if (reqItemGr.next()) {\n            vaVars.record_id = reqItemGr.getUniqueValue();\n            vaVars.record_table = 'sc_req_item';\n            // add attachment to record\n            var mediaLinksFormAttachment = vaVars.media_links_form_attachment.split(',');\n            for (var i in mediaLinksFormAttachment)\n                vaSystem.attachToRecord(mediaLinksFormAttachment[i], vaVars.record_table, vaVars.record_id);\n\n        }\n        // move attachment variable to record\n        var gr = new GlideRecord('sys_attachment');\n        gr.addQuery('sys_id', 'IN' , attachmentIds);\n        gr.query();\n        while (gr.next()) {\n            gr.setValue('table_name', 'ZZ_YY' + vaVars.record_table);\n            gr.setValue('table_sys_id', vaVars.record_id);\n            gr.update();\n        }\n    }\n})()","id":"fa12d92bdbdc452dbb2f88722b2a0909","name":"Checkout Cart","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Question Requested For","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    if (JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 31)\n        return true;\n})()\n"},"id":"1d3f03a5a7c0477dbc71729ebbdd97b4","name":"Question Requested For"},{"type":"Branch","type":"Branch","label":"Date Question","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 9;\n})()\n"},"id":"2ec470e5c43f4b9f906e4a7795309056","name":"Date Question"},{"type":"Branch","type":"Branch","label":"Text Type Question","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\n    return type === 2 || type === 6 || type === 16;\n})()"},"id":"90eb2800552a43cfbef7a8a198263153","name":"Text Type Question"},{"type":"Branch","type":"Branch","label":"Date-Time Question","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 10;\n})()\n"},"id":"0ea6b39ea61b4024ac6c3e8c6a50630d","name":"Date-Time Question"},{"type":"Branch","type":"Branch","label":"Question Label","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 11;\n})()"},"id":"9c7cf2734efd42fa95b40b467fb139c3","name":"Question Label"},{"type":"Branch","type":"Branch","label":"Container Or Break Questions","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\n    if (type === 0 || type === 12 || type === 19 || type === 20 || type === 24)\n        return true;\n})()\n"},"id":"3e0e38bf8be44195aa7a7f59babd3bad","name":"Container Or Break Questions"},{"type":"Branch","type":"Branch","label":"Unsupported  Variable  Types","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var unSupportedTypes = vaVars.unsupportedVarTypes.split(',');\n   return unSupportedTypes.indexOf(String(JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type)) !== -1;\n})()\n"},"id":"4ba485c2338247cc905873607eef3ee3","name":"Unsupported  Variable  Types"},{"type":"Branch","type":"Branch","label":"Email Question","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 26;\n})()\n"},"id":"7512a42e4a2d4bc5b5faf295825c1031","name":"Email Question"},{"type":"Branch","type":"Branch","label":"Ip Address Question","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 28;\n})()\n"},"id":"3a0169099edc426b9e02e05d1dd0ed94","name":"Ip Address Question"},{"type":"Branch","type":"Branch","label":"URL Question","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 27;\n})()\n"},"id":"4fbba154a40f4351984d94e3a9ae82f9","name":"URL Question"},{"type":"Branch","type":"Branch","label":"Question Attachment","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 33;\n})()\n"},"id":"05f99c07148c425f96d1a8a7f5250b55","name":"Question Attachment"},{"type":"Branch","type":"Branch","label":"Rich Text Label Question","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 32;\n})()\n"},"id":"658d4f5c3c214ded9e2d8dd894d92135","name":"Rich Text Label Question"},{"type":"Branch","type":"Branch","label":"Choice Question","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\n    return type === 1 || type === 3 || type === 4 || type === 5 || type === 18 || type === 22;\n})()\n"},"id":"c9b6af9871c44372bce7029c1242ce8f","name":"Choice Question"},{"type":"Branch","type":"Branch","label":"Reference Question","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n   return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 8;\n})()"},"id":"950735d0e7ac4fed8103b85a9df248c6","name":"Reference Question"}],"id":"878eb31d80a94776ba268e794816155f","goal_id":"primary"},{"type":"InputPrompt","type":"InputPrompt","variable_id":"9a88cdae0a7b4f9e836934a2e99487a9","message":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"id":"c04aa857052f4409acfb39a6abfe182e","name":"Question Date","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    vaVars.validation_message = \"\";\n    var quesJson = itemJson.variables[vaVars.qIndex];\n    var type = quesJson.type;\n    var vaFieldValidator = new global.VAFieldValidator();\n    // If user doesn't want to proceed with the selected value and skips the question, the variable would be set to \"\"\n    var proceedWithDefaultValue = vaInputs.proceed_with_default.getValue();\n    switch (type) {\n        case 2:\n        case 6:\n        case 16:\n            var ans = vaInputs.question_text.getValue() || (proceedWithDefaultValue ? quesJson.display_value : \"\");\n            if (ans.trim().length === 0 &amp;&amp; itemJson.variables[vaVars.qIndex].mandatory) {\n                vaVars.validation_message = gs.getMessage('You must answer this question');\n                break;\n            }\n            if (type === 2) {\n                itemJson.variables[vaVars.qIndex].value = ans;\n                vaInputs.question_text = \"\";\n                break;\n            }\n            var q = GlideappQuestion.getQuestion(itemJson.variables[vaVars.qIndex].sys_id);\n            var validresponse = q.validateRegex(ans);\n            if (validresponse) {\n                itemJson.variables[vaVars.qIndex].value = ans;\n                vaInputs.question_text = \"\";\n            } else if (!validresponse)\n                vaVars.validation_message = q.getValidationMessage();\n            break;\n        case 9:\n            itemJson.variables[vaVars.qIndex].value = vaInputs.question_date.getDisplayValue() || (proceedWithDefaultValue ? quesJson.display_value : \"\");\n            vaInputs.question_date = \"\";\n            break;\n        case 10:\n            itemJson.variables[vaVars.qIndex].value = vaInputs.question_date_time.getDisplayValue() || (proceedWithDefaultValue ? quesJson.display_value : \"\");\n            vaInputs.question_date_time = \"\";\n            break;\n        case 8:\n            var ans = (proceedWithDefaultValue ? quesJson.value : \"\");\n            if (vaInputs.question_reference)\n                ans = vaInputs.question_reference.getValue();\n\n            itemJson.variables[vaVars.qIndex].value = ans;\n            vaInputs.question_reference = \"\";\n            break;\n        case 1:\n        case 3:\n        case 4:\n        case 5:\n        case 18:\n        case 22:\n            var ans = (proceedWithDefaultValue ? quesJson.value : \"\");\n            if (vaInputs.question_choice) {\n                ans = vaInputs.question_choice.getValue();\n                ans = ans == 'no_data' ? '' : ans;\n            }\n            itemJson.variables[vaVars.qIndex].value = ans;\n            vaInputs.question_choice = \"\";\n            break;\n        case 26:\n            var ans = vaInputs.question_email.getValue() || (proceedWithDefaultValue ? quesJson.value : \"\");\n            if (vaInputs.question_email.getValue() || ans == \"\" || vaFieldValidator.validateEmailAddress(ans)) {\n                itemJson.variables[vaVars.qIndex].value = ans;\n                vaInputs.question_email = \"\";\n            } else\n                vaVars.validation_message = gs.getMessage(\"This isn't a valid email address\");\n            break;\n        case 27:\n            var ans = vaInputs.question_url.getValue() || (proceedWithDefaultValue ? quesJson.value : \"\");\n            if (vaInputs.question_url.getValue() || ans == \"\" || vaFieldValidator.validateURL(ans)) {\n                itemJson.variables[vaVars.qIndex].value = ans;\n                vaInputs.question_url = \"\";\n            } else\n                vaVars.validation_message = gs.getMessage(\"This isn't a valid URL\");\n            break;\n        case 28:\n            var ans = vaInputs.question_ip_address.getValue() || (proceedWithDefaultValue ? quesJson.value : \"\");\n            if (vaInputs.question_ip_address.getValue() || ans == \"\" || vaFieldValidator.validateIPAddress(ans)) {\n                itemJson.variables[vaVars.qIndex].value = ans;\n                vaInputs.question_ip_address = \"\";\n            } else\n                vaVars.validation_message = gs.getMessage(\"This isn't a valid IP Address\");\n            break;\n        case 31:\n            var ans = quesJson.default_value + '';\n            if (quesJson.default_value &amp;&amp; proceedWithDefaultValue)\n                vaVars.request_for = ans;\n            else if (vaVars.request_for)\n                ans = vaVars.request_for;\n            itemJson.variables[vaVars.qIndex].value = ans;\n    }\n    if (!vaVars.request_for)\n        vaVars.request_for = gs.getUserID() + '';\n    if (quesJson.data_lookup_ids &amp;&amp; quesJson.data_lookup_ids.length != 0) {\n        var helper = new sn_sc.CatalogConversationHelper();\n        vaVars.itemJSON = JSON.stringify(helper.runDataLookups(itemJson, quesJson.sys_id));\n    } else\n        vaVars.itemJSON = JSON.stringify(itemJson);\n\n// resetting the value of proceed with default incase validation fails\n   if (vaVars.validation_message.length !== 0)\n       vaInputs.proceed_with_default = false;\n})()\n","id":"6b615d9df9bc47e2b7a5564d93ac5ef7","name":"Post Response","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Repeat Question","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return vaVars.validation_message.length !== 0;\n})()\n"},"id":"77d7ff601dc342a2b4c40be4d27e6cd8","name":"Repeat Question"},{"type":"Branch","type":"Branch","label":"Next Question","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return vaVars.validation_message.length === 0;\n})()\n"},"id":"4dd62a2ae4c1410db0d0cf06f4548781","name":"Next Question"}],"id":"ef5e54d2a5bd48efb6a6a4bbfb46bb9d","goal_id":"primary"},{"type":"ScriptOutputPrompt","type":"ScriptOutputPrompt","output_type":"single_part","id":"c37acca2c10d45fa9ff35e522d74804a","name":"Validation Message","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"value":{"type":"String","type":"String","mode":"string","value":"(function execute() {\n      var singleOutMsg = new sn_cs.SinglePartOutMsg();\n       singleOutMsg.setTextPart(gs.getMessage('{0}. Answer the question again', vaVars.validation_message));\n       return singleOutMsg;\n})()"},"secure":false},{"type":"InputPrompt","type":"InputPrompt","variable_id":"c17814d70da44b518aa2eafae7212481","message":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"id":"582c0c456dec4db8acfe9b77df825b0b","name":"Question Text","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"ReferenceChoiceInputPrompt","type":"ReferenceChoiceInputPrompt","mode":"external","id":"df94abcde47a4fec8772fb5ccc8a00e8","name":"Question Reference","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"variable_id":"21f03cf82d1740158a9032de119df6b6","message":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()"},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"expression_mode":"script","script":"(function execute() {\n    var options = [];\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var variable = itemJson.variables[vaVars.qIndex];\n\n    var gr = new GlideRecordSecure(variable.reference);\n    gr.addQuery(variable.qualifier);\n    if (variable.ref_ac_order_by)\n        gr.orderBy(variable.ref_ac_order_by);\n    else\n        gr.orderBy(gr.getDisplayName());\n    \n    gr.query();\n\n    while (gr.next()) {\n        options.push({\n            \"value\" : gr.getUniqueValue(),\n            \"label\" : gr.getDisplayValue()\n        });\n    }\n    \n    return options;    \n})()","metadataScript":"","cardName":"","cardFields":[],"no_options_found_message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"No records found\", vaContext.getRequesterLang())"},"condition":{"type":"Condition","mode":"external_script","value":"(function execute() {\n    var options = [];\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var variable = itemJson.variables[vaVars.qIndex];\n\n    var gr = new GlideRecordSecure(variable.reference);\n    gr.addQuery(variable.qualifier);\n    if (variable.ref_ac_order_by)\n        gr.orderBy(variable.ref_ac_order_by);\n    else\n        gr.orderBy(gr.getDisplayName());\n    \n    gr.query();\n\n    while (gr.next()) {\n        options.push({\n            \"value\" : gr.getUniqueValue(),\n            \"label\" : gr.getDisplayValue()\n        });\n    }\n    \n    return options;    \n})()"}},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    vaVars.record_id = \"-1\";\n})()\n","id":"a1a56227bc264cfa8c9877671df19045","name":"Set Record ID to -1","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"ReferenceChoiceInputPrompt","type":"ReferenceChoiceInputPrompt","mode":"external","id":"a6de984d0ecf425c86836a588cf01406","name":"Question Choice","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"variable_id":"86f94bd854c04fa38d3bb14a76dc208a","message":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()"},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var question = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    if (question.mandatory)\n        return false;\n    if (question.type === 3 &amp;&amp; question.value === '' &amp;&amp; question.options[0].value !== '') \n        return true;\n    if (question.type === 4 &amp;&amp; question.value === '')\n        return true;\n    return false;\n})();\n"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"expression_mode":"script","script":"(function execute() {\n    var options = [];\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    var choices = quesJson.options;\n    if (choices.length &gt; 0 &amp;&amp; quesJson.mandatory) {\n        if (!choices[0].value)\n            choices.shift();\n    }\n    \n    options = choices;\n    return options;    \n})()","metadataScript":"","cardName":"","cardFields":[],"no_options_found_message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"No records found\", vaContext.getRequesterLang())"},"condition":{"type":"Condition","mode":"external_script","value":"(function execute() {\n    var options = [];\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    var choices = quesJson.options;\n    if (choices.length &gt; 0 &amp;&amp; quesJson.mandatory) {\n        if (!choices[0].value)\n            choices.shift();\n    }\n    \n    options = choices;\n    return options;    \n})()"}},{"type":"InputPrompt","type":"InputPrompt","variable_id":"1ae6e1803c2c47099c1d5437b3e59367","message":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"id":"9d86c117359541ba84c2033355feacaf","name":"Question Date Time","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"TextOutputPrompt","type":"TextOutputPrompt","value":[{"type":"String","type":"String","mode":"script","value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()"}],"id":"d1471488a6654a54b56e8bbb4a0a07ac","name":"Question Label","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"TextOutputPrompt","type":"TextOutputPrompt","value":[{"type":"String","type":"String","mode":"script","value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()"}],"id":"34ec9fb8820e4c188735bf915c02eed6","name":"Container Start Question","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    if (quesJson.display_title)\n        return true;\n})()\n"},"secure":false},{"type":"ReferenceChoiceInputPrompt","type":"ReferenceChoiceInputPrompt","mode":"external","id":"9028af47203b473b8a43f7b1ac1cd9da","name":"Question Requested For","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"variable_id":"262e0c01a06e44b39ccd275726f77451","message":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()"},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"expression_mode":"script","script":"(function execute() {\n    var options = [];\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var count = 0;\n    var gr = new GlideRecordSecure('sys_user');\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    gr.addEncodedQuery('nameLIKE'+ vaInputs.search_requested_for);\n    gr.addQuery(quesJson.qualifier);\n    gr.orderBy(gr.getDisplayName());\n    gr.chooseWindow(index, index + limit, true);\n    gr.query();\n\n    var count = gr.getRowCount();\n    vaVars.count = count;\n\n    while (gr.next()) {\n        options.push({\n            \"value\" : gr.getUniqueValue(),\n            \"label\" : gr.getDisplayValue()\n        });\n    }\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n    \n    if (count &gt; 0) {\n        options.push({\n            'value' : 'search',\n            'label' : gs.getMessage('Someone else')\n        });\n    }\n    return options;    \n})()\n","metadataScript":"","cardName":"","cardFields":[],"no_options_found_message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"I couldn't find a user with that name\", vaContext.getRequesterLang())"},"condition":{"type":"Condition","mode":"external_script","value":"(function execute() {\n    var options = [];\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var count = 0;\n    var gr = new GlideRecordSecure('sys_user');\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    gr.addEncodedQuery('nameLIKE'+ vaInputs.search_requested_for);\n    gr.addQuery(quesJson.qualifier);\n    gr.orderBy(gr.getDisplayName());\n    gr.chooseWindow(index, index + limit, true);\n    gr.query();\n\n    var count = gr.getRowCount();\n    vaVars.count = count;\n\n    while (gr.next()) {\n        options.push({\n            \"value\" : gr.getUniqueValue(),\n            \"label\" : gr.getDisplayValue()\n        });\n    }\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n    \n    if (count &gt; 0) {\n        options.push({\n            'value' : 'search',\n            'label' : gs.getMessage('Someone else')\n        });\n    }\n    return options;    \n})()\n"}},{"type":"InputPrompt","type":"InputPrompt","variable_id":"79754fac91114fd78daa60e56ac0e1b0","message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"Who should I set it to?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"id":"34483acbf9804b628af25384af20eb10","name":"Search Requested For","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Requested For Next","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return vaInputs.question_requested_for.getValue() === 'next';\n})()\n"},"id":"f317a128b3f7429f919a3e2baf8d5a68","name":"Requested For Next"},{"type":"Branch","type":"Branch","label":"Search Requested For","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return !vaInputs.question_requested_for.getValue() || vaInputs.question_requested_for.getValue() === 'search';\n})()\n"},"id":"b7be37250d6b497b99661ad6e4cebf30","name":"Search Requested For"},{"type":"Branch","type":"Branch","label":"Requested For Chosen","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var valuePicked = vaInputs.question_requested_for.getValue();\n    var condition = valuePicked !== 'next' &amp;&amp; valuePicked !== 'prev';\n    if (condition) {\n        vaVars.count = 0;\n        vaVars.index = 0;\n    }\n    return condition;\n})();"},"id":"102ebae438784f00a0f8eb215a014c8d","name":"Requested For Chosen"},{"type":"Branch","type":"Branch","label":"Requested For Prev","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return vaInputs.question_requested_for.getValue() === 'prev';\n})()\n"},"id":"3292a5ad1c694de3abe6594a41315e3a","name":"Requested For Prev"}],"id":"16a206dae03d45e0ba8d5cbd2ab0ab0f","goal_id":"primary"},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    var count = parseInt(vaVars.count);\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    if ( index + limit &gt; count )\n        vaVars.index = 0;\n    else\n        vaVars.index = index + limit;\n})();","id":"4e5f4e6759334ad99376ea10722a1694","name":"Requested For Next Page","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    var item = new sn_sc.CatItem(JSON.parse(vaVars.itemJSON).sys_id);\n    vaVars.request_for = vaInputs.question_requested_for.getValue() + '';\n    vaVars.canView = item.isDelegationAllowed(vaVars.request_for);\n})()\n","id":"024e771577804dd3bbf983f62575ad53","name":"Is Delegation Allowed","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Can View","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return vaVars.canView;\n})()\n"},"id":"f19967a287054fd1a5c9d8c49240c911","name":"Can View"},{"type":"Branch","type":"Branch","label":"Cannot View","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return !vaVars.canView\n})()\n"},"id":"de2898124c8f413d847a89e42c713fd9","name":"Cannot View"}],"id":"43a3968c500c43c7bc49f0c94a5ad472","goal_id":"primary"},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var c = index - limit;\n    if ( c &lt; 0 ) c = 0;\n    vaVars.index = c;\n})();","id":"8dec6bf76b8248fab2cffac2d9babf11","name":"Requested For Previous Page","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"InputPrompt","type":"InputPrompt","variable_id":"6c27c491380b4980a12c8c666290504b","message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"The selected user does not have access to this item. Do you want to request for  someone else?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"id":"4b207a5862424187bebc8b30ed2764ab","name":"Request For Another User","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Request for Another User","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"request_for_another_user=true"},"id":"db49c82aa29f4fb88625c87723c79736","name":"Request for Another User"},{"type":"Branch","type":"Branch","label":"End Conversation","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"request_for_another_user="},"id":"8eb350bec86645dc8c76aa3ab25c9552","name":"End Conversation"}],"id":"d067aebf76b64e93a19c46573abb8942","goal_id":"primary"},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"No onChange Policies","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).has_on_change_policies;\n})()\n"},"id":"4658080195df42f6acfafd45df034570","name":"No onChange Policies"},{"type":"Branch","type":"Branch","label":"Has onChange Policies","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n   return JSON.parse(vaVars.itemJSON).has_on_change_policies;\n})()\n"},"id":"d792196f17584665ad46b71307440ce7","name":"Has onChange Policies"}],"id":"0cdc52cf18464db59f064d508319e655","goal_id":"primary"},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n   vaVars.itemJSON = JSON.stringify(new sn_sc.CatalogConversationHelper().runChangePolicies(JSON.parse(vaVars.itemJSON)))\n})()\n","id":"3623dcb2a65a461a99cdb1748b43f315","name":"Run OnChange Policies","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"InputPrompt","type":"InputPrompt","variable_id":"67e05e83ebd54da48c2b0774fcde7c0c","message":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"id":"96762c6274304a06915c1a966833a822","name":"Question Email","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"formatType":"33513d135b1200101f254d3ba881c7d5","validationScript":""},{"type":"InputPrompt","type":"InputPrompt","variable_id":"86688b76a4344f1eb3d6685ad23b01bb","message":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"id":"abd3468ad6b34517a91f5df07375601c","name":"Question IP Address","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"formatType":"a860c5945b2200101f254d3ba881c7df","validationScript":""},{"type":"InputPrompt","type":"InputPrompt","variable_id":"f5b58d7b86c84bc5bb35fa4954bf9c01","message":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"id":"5aade5fd320140ab9aa390d6fa59fa44","name":"Question URL","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"formatType":"77d8b2935b9200101f254d3ba881c7b9","validationScript":""},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Has  No Attachment","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var item = JSON.parse(vaVars.itemJSON);\n    return item.no_attachments === true;\n})()\n"},"id":"1794df39512e4b4cbc47352b1f41db1c","name":"Has  No Attachment"},{"type":"Branch","type":"Branch","label":"Has Attachment","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var item = JSON.parse(vaVars.itemJSON);\n    return item.no_attachments === false;\n})()\n"},"id":"7e4934d8a9474232b12b72526dbd4928","name":"Has Attachment"}],"id":"e5a22bf7a1d74fd1ad5106539997a517","goal_id":"primary"},{"type":"InputPrompt","type":"InputPrompt","variable_id":"68661a04fdc944b994ea245daa18c3d8","message":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    return gs.getMessage('Add attachment?');\n})()\n"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"id":"518c5c13c839420cab3a8fb8a2345702","name":"Add Attachment","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var item = JSON.parse(vaVars.itemJSON);\n    return !item.mandatory_attachment;\n})()\n"}},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"No","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var item = JSON.parse(vaVars.itemJSON);\n    return !item.mandatory_attachment &amp;&amp; !vaInputs.add_attachment.getValue();\n})()\n"},"id":"a338ff24bc7148f89d7ad689d17067df","name":"No"},{"type":"Branch","type":"Branch","label":"Yes","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var item = JSON.parse(vaVars.itemJSON);\n    return item.mandatory_attachment || vaInputs.add_attachment.getValue();\n})()\n"},"id":"355ce6a3208444d1b7de1708de699bf5","name":"Yes"}],"id":"82d47486983f45db84d12e7387b8b128","goal_id":"primary"},{"type":"InputPrompt","type":"InputPrompt","variable_id":"fc2bca3e8fcf40e3aef08afc434f70dc","message":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    return gs.getMessage('Upload attachment');\n})()\n"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var addMore = false;\n    //when attachment is mandatory, to provide an option to skip add more \n    if (vaInputs.add_more &amp;&amp; vaInputs.add_more.getValue())\n        addMore = true;\n        \n    return !JSON.parse(vaVars.itemJSON).mandatory_attachment || addMore;\n})()"},"id":"00a0e79950f7490f96af50e204076ded","name":"Upload Attachment","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    if (!!vaVars.media_links_form_attachment)\n        vaVars.media_links_form_attachment = vaVars.media_links_form_attachment + ',' + vaInputs.upload_attachment.getValue();\n    else\n        vaVars.media_links_form_attachment = vaInputs.upload_attachment.getValue();\n})()\n","id":"da27ef14b40b4bcdbc2cb9626f7093f8","name":"Add Media Links for Form Attachment","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"InputPrompt","type":"InputPrompt","variable_id":"e1ca9a14bb8e4626846f0f973e8136c4","message":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    return gs.getMessage('Add more?');\n})()\n"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"id":"0570ccc3d07f4d17936d7873671c0a00","name":"Add More","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Yes","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"add_more=true"},"id":"f51e6e5df4ce4dea926b1f446fad6c14","name":"Yes"},{"type":"Branch","type":"Branch","label":"No","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"add_more="},"id":"6cdbfd8958264633834738ef88099827","name":"No"}],"id":"4df2f3e9950f486c867d8fd23b58bab9","goal_id":"primary"},{"type":"InputPrompt","type":"InputPrompt","variable_id":"f7a9d7c3ed364d8b90180200cde3fed7","message":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()\n"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"id":"6b3f3667f79f4a498102b748d560627a","name":"Question Attachment","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    vaVars.validation_message = \"\";\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var quesJson = itemJson.variables[vaVars.qIndex];\n    var vaUtils = new global.VAUtils();\n    var arr = vaInputs.question_attachment.getValue().split('/');\n    var mediaId = arr[arr.length - 1];\n    var gr = new GlideRecord('sys_cs_media');\n    gr.addQuery('media_id', mediaId);\n    gr.query();\n    if (gr.next()) {\n        var attachmentId = gr.getValue('sys_attachment_id');\n        var attachRef = new GlideRecord('sys_attachment');\n        if (attachRef.get(attachmentId)) {\n            var file = {\n                name: attachRef.getValue('file_name'),\n                size: attachRef.getValue('size_bytes')\n            };\n            var allowedExtensions = new Array();\n            if (quesJson.allow_extension)\n               allowedExtensions = quesJson.allow_extension.split(';');\n            var field = {\n                allowedExtensions: allowedExtensions,\n                allowedFileSize: quesJson.max_file_size\n            };\n            var result = vaUtils.validateAttachment(file, field);\n            if (result.type == 'success') {\n                quesJson.value = attachmentId;\n                vaVars.itemJSON = JSON.stringify(itemJson);\n                vaInputs.question_attachment.setValue('');\n            } else\n                vaVars.validation_message = result.message;\n        } else \n            vaVars.validation_message = gs.getMessage('Failed to upload the attachment');\n    } else \n        vaVars.validation_message = gs.getMessage('Failed to upload the attachment');\n})()\n","id":"2d422c2bc11548e9a6082e527dd1b070","name":"Validate Attachment","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"query","value":"question_attachmentISNOTEMPTY"}},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Next Question","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return vaVars.validation_message.length === 0;\n})()\n"},"id":"74746656179c48ce94246143833989e8","name":"Next Question"},{"type":"Branch","type":"Branch","label":"Repeat Question","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return vaVars.validation_message.length !== 0;\n})()\n"},"id":"9aa01803441a4ea7b5e408317676b272","name":"Repeat Question"}],"id":"75fd1f87f14d49069c43b6b1ebc14f27","goal_id":"primary"},{"type":"ScriptOutputPrompt","type":"ScriptOutputPrompt","output_type":"single_part","id":"b6c518610514481e9715465714946cc7","name":"Validation Message","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"value":{"type":"String","type":"String","mode":"string","value":"(function execute() {\n     var singleOutMsg = new sn_cs.SinglePartOutMsg();\n       singleOutMsg.setTextPart(gs.getMessage('{0}. Answer the question again', vaVars.validation_message));\n       vaVars.validation_message = \"\";\n       return singleOutMsg;\n})()\n"},"secure":false},{"type":"Decision","type":"Decision","name":"Is Record Producer","branches":[{"type":"Branch","type":"Branch","label":"No","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n   \n    if (itemJson.sys_class_name !== 'sc_cat_item_producer') {\n        return true;\n    }    \n    return false;\n})()\n"},"id":"44f6e46181b841aba655ce07277d3f8f","name":"No"},{"type":"Branch","type":"Branch","label":"Yes","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    if (itemJson.sys_class_name === 'sc_cat_item_producer') {\n        return true;\n    }    \n    return false;\n})()"},"id":"9328cf8fcb7a462da5193eaace237367","name":"Yes"}],"id":"ac3d2152cc8b42359d3978bf7e15b957","goal_id":"primary"},{"type":"Decision","type":"Decision","name":"Execute Contextual Search","branches":[{"type":"Branch","type":"Branch","label":"No","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    /**\n     * Topic should pass execute_contextual_search as input if contextual search is required\n     *  It will execute contextual search only first time. For subsequent text variables, it will be skipped\n     */\n    var ans = vaInputs.question_text.getValue();\n    if(vaInputs.execute_contextual_search == 'false' || ans.trim().length === 0) {\n        return true;\n    }\n    return false;    \n})()\n"},"id":"53413425d36d41c8a6bcab8e98cc4cf2","name":"No"},{"type":"Branch","type":"Branch","label":"Yes","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    /**\n     * Topic should pass execute_contextual_search as input if contextual search is required\n     *  It will execute contextual search only first time. For subsequent text variables, it will be skipped\n     */\n    var ans = vaInputs.question_text.getValue();\n    if(vaInputs.execute_contextual_search == 'true'  &amp;&amp; ans.trim().length !== 0) {\n        return true;\n    }\n    return false;     \n})()\n"},"id":"f767058ac97e48faaeae31f267b61755","name":"Yes"}],"id":"0184d7c3916a465cbf5db40b0876ec5c","goal_id":"primary"},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\n    if(gs.nil(vaVars.contextualSearchVariable)) {\n        var searchConfig = contextualSearch.getContextualSearchVariableAndContext(vaInputs.catalog_item_id);\n        vaVars.contextualSearchVariable = searchConfig.searchVariable;\n        vaVars.contextualSearchContext = searchConfig.context;\n    }\n    return;\n})()\n","id":"75150420125b4b35b7c0a92bb6df595b","name":"Get Search Variable And Context","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","type":"Decision","name":"Contextual Search Variable ?","branches":[{"type":"Branch","type":"Branch","label":"No","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    if(vaVars.contextualSearchVariable !== quesJson.sys_id) {\n        return true;\n    }\n    return false;\n})()"},"id":"7f1ae029b46749089cd927aacf6220ef","name":"No"},{"type":"Branch","type":"Branch","label":"Yes","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    if(vaVars.contextualSearchVariable === quesJson.sys_id) {\n        return true;\n    }\n    return false;\n})()"},"id":"a1cec44e5e554bdd8b0ba679af50e616","name":"Yes"}],"id":"bc4dd2417f2b4d45ad4bd93d0ccc1f29","goal_id":"primary"},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\n    var response = contextualSearch.search(\n        vaVars.contextualSearchContext, vaInputs.question_text.getValue(), ''\n    );\n    var success = contextualSearch.processSearchResponse(response);\n    if (!success) {\n        return;\n    }  \n    var relevantSearchResults = contextualSearch.processGeneralResults(response, 20, -2);\n    vaVars.contextualSearchResultCount = relevantSearchResults.length;\n    vaVars.contextualSearchResultJsonString = JSON.stringify(relevantSearchResults);\n    vaVars.contextualSearchIndex = 0;\n    return;\n})()\n","id":"c5ed4dfe882448ecabd92590fb78d266","name":"Contextual Search","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","type":"Decision","name":"Did the search return results ?","branches":[{"type":"Branch","type":"Branch","label":"No","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    if(vaVars.contextualSearchResultCount &lt;= 0){\n        return true;\n    }\n    return false;\n})()\n"},"id":"16e598208cd44e289ece900d2945899e","name":"No"},{"type":"Branch","type":"Branch","label":"Yes","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    if(vaVars.contextualSearchResultCount &gt; 0){\n        return true;\n    }\n    return false;\n})()\n"},"id":"adcf5d417aa845c19e5707a71d60f1a8","name":"Yes"}],"id":"b914fa16be5e47efa19b0084546b5354","goal_id":"primary"},{"type":"LinkOutputPrompt","type":"LinkOutputPrompt","header":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"I found some information that might help you:\", vaContext.getRequesterLang())"},"label":{"type":"String","type":"String","mode":"string","value":""},"url":{"type":"String","type":"String","mode":"string","value":""},"link_type":"multiple","multi_link_script":"(function execute(header) {\n\tvar contextualSearch = new global.VAGlobalContextualSearchUtil();\n\tvar variables = {\n\t\tlimit: vaVars.contextualSearchResultLimit,\n\t\tindex: vaVars.contextualSearchIndex,\n\t\tsearch_result_json_string: vaVars.contextualSearchResultJsonString,\n\t\tportal: ''\n\t}\n\tvar groupedLinksOutMsg = contextualSearch.getLinks(header, variables);\n\treturn groupedLinksOutMsg;\n})(header)\n","id":"3592d843108f434fa58b5df96a823484","name":"Display multi-link","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","type":"Decision","name":"Did Articles Help ?","branches":[{"type":"Branch","type":"Branch","label":"Yes","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"did_articles_help=true"},"id":"35e24b52aeba451b82447940a8128ffc","name":"Yes"},{"type":"Branch","type":"Branch","label":"No","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"did_articles_help!=true"},"id":"d1aab1cf908b43b3aca94e1b294bbf16","name":"No"}],"id":"da00dbcf32824fc0834090fa4e2b1fe4","goal_id":"primary"},{"type":"InputPrompt","type":"InputPrompt","variable_id":"c0ac3986f5d34729bcdb0f53eb04f396","message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"Did any of this information resolve your issue?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"id":"2a1adc0010144721b5f6ff25df7767ec","name":"Did Articles Help","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","type":"Decision","name":"Confirmation Required ?","branches":[{"type":"Branch","type":"Branch","label":"Yes","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"confirm_catalog_item=true"},"id":"3bf919823b784173a21225740072874f","name":"Yes"},{"type":"Branch","type":"Branch","label":"No","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"confirm_catalog_item=false"},"id":"04c8a39bf41c4345a59a47e5ed4ce20b","name":"No"}],"id":"7b179db7dcce414bb36ed41e173adbc2","goal_id":"primary"},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Order","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    if (vaContext.catalog_builder_preview)\n       return false;\n    return true;\n})()\n"},"id":"81278d8aeffb4897b39bcc15a7cb066c","name":"Order"},{"type":"Branch","type":"Branch","label":"Preview","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n   if (vaContext.catalog_builder_preview)\n      return true;\n   return false;\n})()\n"},"id":"091b8d3b8bf442518c8eb44108a3ab9a","name":"Preview"}],"id":"3fa5f8bbdc244349936619a8d5859b97","goal_id":"primary"},{"type":"TextOutputPrompt","type":"TextOutputPrompt","value":[{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"Preview successful\", vaContext.getRequesterLang())"}],"id":"1b9840104d154172b3ba43acc4bdc9e5","name":"Catalog Builder Preview","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Submit","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    if (vaContext.catalog_builder_preview)\n       return false;\n    return true;\n})()\n"},"id":"aed7426f72224cf381914c33da2de6d0","name":"Submit"},{"type":"Branch","type":"Branch","label":"Preview","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n   if (vaContext.catalog_builder_preview)\n      return true;\n   return false;\n})()\n"},"id":"71d62bf1395b43d7ba61e7539f781e54","name":"Preview"}],"id":"87417ea68c84464c8535a4b1bec092c5","goal_id":"primary"},{"type":"TextOutputPrompt","type":"TextOutputPrompt","value":[{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"Since this was a preview, the request was not submitted\", vaContext.getRequesterLang())"}],"id":"5ffe3110a64841b29fff1b548dc85d29","name":"Catalog Builder Preview Message","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Attachment uploaded","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"upload_attachmentISNOTEMPTY"},"id":"f34a1eab2b1a4acabdee537810af070c","name":"Attachment uploaded"},{"type":"Branch","type":"Branch","label":"Attachment skipped","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"upload_attachmentISEMPTY"},"id":"a527d842d729489aa1d0662e525b4823","name":"Attachment skipped"}],"id":"99e6da25412d4901bb94a9c117ef0a90","goal_id":"primary"},{"type":"ScriptOutputPrompt","type":"ScriptOutputPrompt","output_type":"single_part","id":"f4d72b92f6c247ebb4bcd115bc871caf","name":"Question Rich Text Label","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"value":{"type":"String","type":"String","mode":"string","value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()"},"secure":false},{"type":"TextOutputPrompt","type":"TextOutputPrompt","value":[{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    var renderedValue = quesJson.display_value ? quesJson.display_value : quesJson.value;\n    return gs.getMessage(\"&lt;b&gt;{0}&lt;/b&gt; was selected as the value for &lt;b&gt;{1}&lt;/b&gt;\", [renderedValue, quesJson.label])\n})()\n"}],"id":"ffea21ee6e894c5385ad01bd2b8f2ebe","name":"Default Value Acknowledgement ","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.default_value ? true : false;\n})()\n"},"secure":false},{"type":"InputPrompt","type":"InputPrompt","variable_id":"04a2c8d83a504d38ae9051bbaa012460","message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"Do you want to proceed with this value?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"id":"e870da0711d44663bd032d95360b04a5","name":"Proceed with Default","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.default_value ? true : false;\n})()\n"}},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Do not proceed with default value","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"proceed_with_default="},"id":"a4b49699812a44889e579ac7b7e888f7","name":"Do not proceed with default value"},{"type":"Branch","type":"Branch","label":"Proceed with default value","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"proceed_with_default=true"},"id":"19a5a11125794bbf96ee42dd1f8efc4f","name":"Proceed with default value"}],"id":"1603b656f6484951be725e810923e7a4","goal_id":"primary"},{"type":"Decision","type":"Decision","name":"Show end state card?","branches":[{"type":"Branch","type":"Branch","label":"No","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"show_end_state_card="},"id":"9d2419a4864f470c8d92d22b28e67372","name":"No"},{"type":"Branch","type":"Branch","label":"Yes","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"show_end_state_card=true"},"id":"1a62acd94cd749adb1e35b82fb5833d8","name":"Yes"}],"id":"61f3117ef2714e249579496b7ee83026","goal_id":"primary"},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Text Type","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\n    return type === 2 || type === 6 || type === 16;\n})()"},"id":"3eb592c52beb4e66987a833e60692783","name":"Text Type"},{"type":"Branch","type":"Branch","label":"Email Type","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 26;\n})()\n"},"id":"94cf98287aa241f28892724642028b9a","name":"Email Type"},{"type":"Branch","type":"Branch","label":"IP Address Type","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 28;\n})()\n"},"id":"e7e6bc7282234cf984cc5662104b014e","name":"IP Address Type"},{"type":"Branch","type":"Branch","label":"URL Type","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 27;\n})()\n"},"id":"cd891c10f02a45deb4cb2f310e52b8db","name":"URL Type"}],"id":"154cbe739e4b44eb9b9b483381c88293","goal_id":"primary"},{"type":"Decision","type":"Decision","name":"Messaging Channel","branches":[{"type":"Branch","type":"Branch","label":"Mobile/Web Client","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return vaContext.deviceType === \"mweb\";\n})()\n"},"id":"71b2a246d7a4481dbc76112f092698aa","name":"Mobile/Web Client"},{"type":"Branch","type":"Branch","label":"Other Channels","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return !(vaContext.deviceType === \"mweb\");\n})()\n"},"id":"7ae984ef8c8c47ffa972c9bbe6464da1","name":"Other Channels"}],"id":"8372de21011a4fc58f7b052c80846961","goal_id":"primary"},{"type":"ReferenceChoiceInputPrompt","type":"ReferenceChoiceInputPrompt","mode":"external","id":"5b7e42b59c0c41dd800cd09009c2711d","name":"Question Choice Other Channels","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"variable_id":"e6f220ccf9fc4bd799e96134b5877586","message":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()"},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var question = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    if (question.mandatory)\n        return false;\n    if (question.type === 4 &amp;&amp; question.value === '')\n        return true;\n    if (question.type === 3 &amp;&amp; question.value === '' &amp;&amp; question.options[0].value !== '')\n        return true;\n    return false;\n})();\n"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"expression_mode":"script","script":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var options = [];\n    var count = 0;\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n\n    var choices = quesJson.options;\n    if (choices.length &gt; 0 &amp;&amp; quesJson.mandatory) {\n        if (!choices[0].value)\n            choices.shift();\n    }\n    \n    count = choices.length;\n    vaVars.count = count;\n    options = choices.splice(index, limit);\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n    \n    return options;    \n})()","metadataScript":"","cardName":"","cardFields":[],"no_options_found_message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"No records found\", vaContext.getRequesterLang())"},"condition":{"type":"Condition","mode":"external_script","value":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var options = [];\n    var count = 0;\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n\n    var choices = quesJson.options;\n    if (choices.length &gt; 0 &amp;&amp; quesJson.mandatory) {\n        if (!choices[0].value)\n            choices.shift();\n    }\n    \n    count = choices.length;\n    vaVars.count = count;\n    options = choices.splice(index, limit);\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n    \n    return options;    \n})()"}},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Question Choice Prev","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return vaInputs.question_choice_other_channels.getValue() === \"prev\";\n})()\n"},"id":"3c83e9d1d06d46e79e077978e79b0a44","name":"Question Choice Prev"},{"type":"Branch","type":"Branch","label":"Question Choice Next","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return vaInputs.question_choice_other_channels.getValue() === \"next\";\n})()\n"},"id":"6f81cf2c48b443c08fb4bdd9c332d287","name":"Question Choice Next"},{"type":"Branch","type":"Branch","label":"Question Choice Chosen","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var valuePicked = vaInputs.question_choice_other_channels.getValue();\n    var condition = valuePicked !== 'next' &amp;&amp; valuePicked !== 'prev';\n    if (condition) {\n        vaVars.count = 0;\n        vaVars.index = 0;\n    }\n    return condition;\n})();"},"id":"a7fafa1748a14a9f928fd6a248dd3be0","name":"Question Choice Chosen"}],"id":"6422f13382434440a9ac497f29753423","goal_id":"primary"},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var c = index - limit;\n    if ( c &lt; 0 ) c = 0;\n    vaVars.index = c;\n})();","id":"44cffaffc14c498289ba2e234f962440","name":"Question Choice Prev Page","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    var count = parseInt(vaVars.count);\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    if ( index + limit &gt; count )\n        vaVars.index = 0;\n    else\n        vaVars.index = index + limit;\n})();","id":"48667218290f4e919de3cb7fa3d59088","name":"Question Choice Next Page","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    if(vaInputs.question_choice_other_channels) {\n        vaInputs.question_choice = vaInputs.question_choice_other_channels;\n        vaInputs.question_choice_other_channels = \"\";\n    }\n})()","id":"2cde30fb4daf4251905d1b51610d3c70","name":"Set Question Choice Value","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","type":"Decision","name":"Messaging Channel","branches":[{"type":"Branch","type":"Branch","label":"Mobile/Web Client","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return vaContext.deviceType === \"mweb\";\n})()\n"},"id":"f73d018997a044baacbc4331b68e7291","name":"Mobile/Web Client"},{"type":"Branch","type":"Branch","label":"Other Channels","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return !(vaContext.deviceType === \"mweb\");\n})()"},"id":"08f979ddc0764ae9913e49e8f5c2fa9e","name":"Other Channels"}],"id":"98a9957e0e124b8f997a4ac08a4b387a","goal_id":"primary"},{"type":"InputPrompt","type":"InputPrompt","variable_id":"f0bd963accb14b7881dc4e0ba869bc08","message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"Enter a value to search\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"id":"7628e3dd4aa14fc490d21c688cd82546","name":"Search Reference","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return vaInputs.question_reference_other_channels;\n})()\n"},"formatType":"Text","validationScript":""},{"type":"ReferenceChoiceInputPrompt","type":"ReferenceChoiceInputPrompt","mode":"external","id":"30f1d676900d4524905475a5b992367a","name":"Question Reference Other Channels","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"variable_id":"2aaa54a24ee24759bbdb9c7cf69ff520","message":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()"},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"expression_mode":"script","script":"(function execute() {\n    var options = [];\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var count = 0;\n\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var variable = itemJson.variables[vaVars.qIndex];\n    var gr = new GlideRecordSecure(variable.reference);\n    var displayColumn = gr.getDisplayName();\n   \n    gr.addEncodedQuery(displayColumn + 'LIKE' + vaInputs.search_reference.getValue());\n    gr.addQuery(variable.qualifier);\n    if (variable.ref_ac_order_by)\n        gr.orderBy(variable.ref_ac_order_by);\n    else\n        gr.orderBy(displayColumn);\n    \n    gr.chooseWindow(index, index + limit, true);\n    gr.query();\n\n    var count = gr.getRowCount();\n    vaVars.count = count;\n\n    while (gr.next()) {\n        options.push({\n            \"value\" : gr.getUniqueValue(),\n            \"label\" : gr.getDisplayValue()\n        });\n    }\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n\n    if (count &gt; 0) {\n        vaVars.no_records_found = \"false\"\n        options.push({\n            'value' : 'search',\n            'label' : gs.getMessage('Search')\n        });\n    }\n    else\n        vaVars.no_records_found = \"true\";\n    \n    return options;    \n})()\n","metadataScript":"","cardName":"","cardFields":[],"no_options_found_message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"No records found\", vaContext.getRequesterLang())"},"condition":{"type":"Condition","mode":"external_script","value":"(function execute() {\n    var options = [];\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var count = 0;\n\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var variable = itemJson.variables[vaVars.qIndex];\n    var gr = new GlideRecordSecure(variable.reference);\n    var displayColumn = gr.getDisplayName();\n   \n    gr.addEncodedQuery(displayColumn + 'LIKE' + vaInputs.search_reference.getValue());\n    gr.addQuery(variable.qualifier);\n    if (variable.ref_ac_order_by)\n        gr.orderBy(variable.ref_ac_order_by);\n    else\n        gr.orderBy(displayColumn);\n    \n    gr.chooseWindow(index, index + limit, true);\n    gr.query();\n\n    var count = gr.getRowCount();\n    vaVars.count = count;\n\n    while (gr.next()) {\n        options.push({\n            \"value\" : gr.getUniqueValue(),\n            \"label\" : gr.getDisplayValue()\n        });\n    }\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n\n    if (count &gt; 0) {\n        vaVars.no_records_found = \"false\"\n        options.push({\n            'value' : 'search',\n            'label' : gs.getMessage('Search')\n        });\n    }\n    else\n        vaVars.no_records_found = \"true\";\n    \n    return options;    \n})()\n"}},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"Question Reference Prev","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return vaInputs.question_reference_other_channels.getValue() === \"prev\";\n})()\n"},"id":"baecdc3aaf814f26acb7de669067ce00","name":"Question Reference Prev"},{"type":"Branch","type":"Branch","label":"Question Reference Next","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    return vaInputs.question_reference_other_channels.getValue() === \"next\";\n})()\n"},"id":"34de82bae25a41368d3091cfc056df13","name":"Question Reference Next"},{"type":"Branch","type":"Branch","label":"Question Reference Chosen/Skipped","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var valuePicked = vaInputs.question_reference_other_channels.getValue();\n    var chosenCondition = valuePicked &amp;&amp; valuePicked !== 'next' &amp;&amp; valuePicked !== 'prev' &amp;&amp; valuePicked !== 'search';\n    var skippedCondition = vaVars.no_records_found === \"false\" &amp;&amp; !valuePicked;\n    if (chosenCondition || skippedCondition) {\n        vaVars.count = 0;\n        vaVars.index = 0;\n    }\n    \n    return chosenCondition || skippedCondition;\n})();"},"id":"21e1630b2f9441119b2cc8cdec2194e6","name":"Question Reference Chosen/Skipped"},{"type":"Branch","type":"Branch","label":"Search Question Reference","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    var valuePicked = vaInputs.question_reference_other_channels.getValue();\n    var condition = (vaVars.no_records_found === \"true\") || valuePicked === \"search\";\n    if (condition) {\n        vaVars.count = 0;\n        vaVars.index = 0;\n    }\n    return condition;\n})()\n"},"id":"5e35db80d8534ffeb704b95cd886ae20","name":"Search Question Reference"}],"id":"66567f05291b438bbc89884f02881a90","goal_id":"primary"},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var c = index - limit;\n    if ( c &lt; 0 ) c = 0;\n    vaVars.index = c;\n})();","id":"0b59dd57f1fa4d61b74fb4859f05693b","name":"Question Reference Prev Page","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    var count = parseInt(vaVars.count);\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    if ( index + limit &gt; count )\n        vaVars.index = 0;\n    else\n        vaVars.index = index + limit;\n})();","id":"8a6e1170ba97426f914f9221e2c30374","name":"Question Reference Next Page","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    if(vaInputs.question_reference_other_channels) {\n        vaInputs.question_reference = vaInputs.question_reference_other_channels;\n        vaInputs.question_reference_other_channels = \"\";\n    }\n})()","id":"99de51bffe6641a0999446f1642076f6","name":"Set Question Reference Value","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"LibraryCall","type":"LibraryCall","library_topic_name":"End state card for Catalog Request","library_topic_id":"0b01391550d30110fa9b861f7d83d7f6","parameter-mappings":[{"parameter-name":"record_id","value":{"type":"String","type":"String","mode":"string","value":"{{vaVars.record_id}}"},"metadata":{"type":"String","list":false,"items":[],"use_items":false}},{"parameter-name":"record_table","value":{"type":"String","type":"String","mode":"string","value":"{{vaVars.record_table}}"},"metadata":{"type":"String","list":false,"items":[],"use_items":false}}],"return-value-mappings":[],"id":"b8833f1ad8b04981bc101499c1e738b7","name":"End state card","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}}],"edges":[{"type":"Edge","source_node_id":"b8833f1ad8b04981bc101499c1e738b7","target_node_id":"5584f283a4ad4cc4a1e9bb7b815995a7","id":"7490f3e0c74a4707aaff745d3bcef99a"},{"type":"Edge","source_node_id":"878eb31d80a94776ba268e794816155f","target_node_id":"34483acbf9804b628af25384af20eb10","branch_id":"1d3f03a5a7c0477dbc71729ebbdd97b4","id":"3432d925292a487f987327a1cc72eaeb","name":"1d3f03a5a7c0477dbc71729ebbdd97b4"},{"type":"Edge","source_node_id":"f2cefa49e5fd447eb46e0ef9cece3656","target_node_id":"61f3117ef2714e249579496b7ee83026","id":"c6083e079c114a0496eed3fae18228be"},{"type":"Edge","source_node_id":"6b3f3667f79f4a498102b748d560627a","target_node_id":"2d422c2bc11548e9a6082e527dd1b070","id":"d6e9c0071ef94b43a35d37491a948da9"},{"type":"Edge","source_node_id":"da27ef14b40b4bcdbc2cb9626f7093f8","target_node_id":"0570ccc3d07f4d17936d7873671c0a00","id":"1aa0d59b554240a5992ac43880f46d48"},{"type":"Edge","source_node_id":"16a206dae03d45e0ba8d5cbd2ab0ab0f","target_node_id":"4e5f4e6759334ad99376ea10722a1694","branch_id":"f317a128b3f7429f919a3e2baf8d5a68","id":"8a3121f7a9a74eb88ac5850d0a4f6074","name":"f317a128b3f7429f919a3e2baf8d5a68"},{"type":"Edge","source_node_id":"546724c58ba543239e29056c7f4a87db","target_node_id":"feb78467f34a499cae13e8fbf4eec179","branch_id":"99a5dc73c6574bef9cfcacb2bb856811","id":"d34f82703d2e406ba27b81319e5114fb","name":"99a5dc73c6574bef9cfcacb2bb856811"},{"type":"Edge","source_node_id":"26892cf48e444f8c822ee31eecad2921","target_node_id":"e35912998f8b4253b9f42d262fdd04be","id":"5fa6f043519b461ea2b5d0584d7a476f"},{"type":"Edge","source_node_id":"21456a8b702c44c3a1648fe0f1472d86","target_node_id":"094f1837fec64b4595c053c7c3fd0f76","id":"0c9cdc6bf7b34578aa81c8f974edaf17"},{"type":"Edge","source_node_id":"094f1837fec64b4595c053c7c3fd0f76","target_node_id":"4881683f7eb745519a84e5fcc238d61b","id":"7f7b29f3c9de4319990120f8744d7742"},{"type":"Edge","source_node_id":"4881683f7eb745519a84e5fcc238d61b","target_node_id":"5584f283a4ad4cc4a1e9bb7b815995a7","branch_id":"a5c03cea82794e7f9fe6232e9f9734f3","id":"b2ddab9d8bfc42e798a384a3876057a8","name":"a5c03cea82794e7f9fe6232e9f9734f3"},{"type":"Edge","source_node_id":"4881683f7eb745519a84e5fcc238d61b","target_node_id":"2c46b9ae1fd04465abe8eca9eabb0021","branch_id":"5f0e1e90b7284dec9a0708ccd4347373","id":"14eabfe5ea474cb3863ef9694df7ce72","name":"5f0e1e90b7284dec9a0708ccd4347373"},{"type":"Edge","source_node_id":"2c46b9ae1fd04465abe8eca9eabb0021","target_node_id":"8f59053d36bd4cfa83acb5d215c397cb","branch_id":"daafd7194ef64319a5b090a00fe7184c","id":"f900a2953cf4491ab9c88777e1f00678","name":"daafd7194ef64319a5b090a00fe7184c"},{"type":"Edge","source_node_id":"8f59053d36bd4cfa83acb5d215c397cb","target_node_id":"55b2dfb927154bfdaaf75c76e189a7c9","branch_id":"a492011e6ab64fa89af39d936e99f215","id":"2d15bc5af0dd4012999ed995b601aedf","name":"a492011e6ab64fa89af39d936e99f215"},{"type":"Edge","source_node_id":"8f59053d36bd4cfa83acb5d215c397cb","target_node_id":"6fbaa8ae59c64c2686b79efd2ef08431","branch_id":"a60956dfe77f41a48891d6e22ae12cda","id":"dc4a003aacda40b7ab3178fced42ec89","name":"a60956dfe77f41a48891d6e22ae12cda"},{"type":"Edge","source_node_id":"6fbaa8ae59c64c2686b79efd2ef08431","target_node_id":"55b2dfb927154bfdaaf75c76e189a7c9","id":"74425d8ef9704408a6134a6d41f2576f"},{"type":"Edge","source_node_id":"546724c58ba543239e29056c7f4a87db","target_node_id":"fe37ba80718e4718b72f4dd5b4397e3e","branch_id":"7559235432344f889db08a069422a26f","id":"7b481ad0eee94053a07fdbe420c2fe83","name":"7559235432344f889db08a069422a26f"},{"type":"Edge","source_node_id":"fe37ba80718e4718b72f4dd5b4397e3e","target_node_id":"812ab34cae2d4bf1881b0b32d49d95e6","id":"86d5e0216fda4a90acb9d5cbc7a8c902"},{"type":"Edge","source_node_id":"812ab34cae2d4bf1881b0b32d49d95e6","target_node_id":"5584f283a4ad4cc4a1e9bb7b815995a7","branch_id":"ad7352378f254c3eb7ed3550b00d78ee","id":"9e667fd9b03f40dc929b81a548408233","name":"ad7352378f254c3eb7ed3550b00d78ee"},{"type":"Edge","source_node_id":"feb78467f34a499cae13e8fbf4eec179","target_node_id":"4998c18e83ad497f8b2d91684b84e9ca","id":"83278756a0e14f53aa85870ac6fa6f22"},{"type":"Edge","source_node_id":"4998c18e83ad497f8b2d91684b84e9ca","target_node_id":"5584f283a4ad4cc4a1e9bb7b815995a7","branch_id":"38de370bf53f47ed9b918183bc6101f0","id":"783eb33e4d4e424a9499ed8bfdd3f6c0","name":"38de370bf53f47ed9b918183bc6101f0"},{"type":"Edge","source_node_id":"878eb31d80a94776ba268e794816155f","target_node_id":"c04aa857052f4409acfb39a6abfe182e","branch_id":"2ec470e5c43f4b9f906e4a7795309056","id":"b57ef56720e3414fa7ddf8b0dc3b23fd","name":"2ec470e5c43f4b9f906e4a7795309056"},{"type":"Edge","source_node_id":"c04aa857052f4409acfb39a6abfe182e","target_node_id":"6b615d9df9bc47e2b7a5564d93ac5ef7","id":"c1e71d47927142c6bee72e082f598435"},{"type":"Edge","source_node_id":"6b615d9df9bc47e2b7a5564d93ac5ef7","target_node_id":"ef5e54d2a5bd48efb6a6a4bbfb46bb9d","id":"b0bc3263527b4a54984635e74c6cb7fa"},{"type":"Edge","source_node_id":"ef5e54d2a5bd48efb6a6a4bbfb46bb9d","target_node_id":"c37acca2c10d45fa9ff35e522d74804a","branch_id":"77d7ff601dc342a2b4c40be4d27e6cd8","id":"d7155aacda8b4da096a2e587b526ef2a","name":"77d7ff601dc342a2b4c40be4d27e6cd8"},{"type":"Edge","source_node_id":"878eb31d80a94776ba268e794816155f","target_node_id":"582c0c456dec4db8acfe9b77df825b0b","branch_id":"90eb2800552a43cfbef7a8a198263153","id":"a46a9a50aa724c6f8391c39103b21263","name":"90eb2800552a43cfbef7a8a198263153"},{"type":"Edge","source_node_id":"2c46b9ae1fd04465abe8eca9eabb0021","target_node_id":"a1a56227bc264cfa8c9877671df19045","branch_id":"3d46131e6d3f4f20b4ffa4f8e88d8a41","id":"cfeb82f9b0d54efc8b51555b656783ab","name":"3d46131e6d3f4f20b4ffa4f8e88d8a41"},{"type":"Edge","source_node_id":"a1a56227bc264cfa8c9877671df19045","target_node_id":"5584f283a4ad4cc4a1e9bb7b815995a7","id":"11bdc5c3083f4cbdb403e3cdc635d001"},{"type":"Edge","source_node_id":"878eb31d80a94776ba268e794816155f","target_node_id":"9d86c117359541ba84c2033355feacaf","branch_id":"0ea6b39ea61b4024ac6c3e8c6a50630d","id":"05593f77220a429297b2f0239453cd93","name":"0ea6b39ea61b4024ac6c3e8c6a50630d"},{"type":"Edge","source_node_id":"9d86c117359541ba84c2033355feacaf","target_node_id":"6b615d9df9bc47e2b7a5564d93ac5ef7","id":"047fa4d8677c4fc88ecb66e4f2309b07"},{"type":"Edge","source_node_id":"878eb31d80a94776ba268e794816155f","target_node_id":"d1471488a6654a54b56e8bbb4a0a07ac","branch_id":"9c7cf2734efd42fa95b40b467fb139c3","id":"1465527f1ca4421d9dc504e152e4548e","name":"9c7cf2734efd42fa95b40b467fb139c3"},{"type":"Edge","source_node_id":"d1471488a6654a54b56e8bbb4a0a07ac","target_node_id":"6b615d9df9bc47e2b7a5564d93ac5ef7","id":"c79c0928da784cdab9928870706c0b75"},{"type":"Edge","source_node_id":"878eb31d80a94776ba268e794816155f","target_node_id":"34ec9fb8820e4c188735bf915c02eed6","branch_id":"3e0e38bf8be44195aa7a7f59babd3bad","id":"f75af24aa1064f0c9e28897d16368368","name":"3e0e38bf8be44195aa7a7f59babd3bad"},{"type":"Edge","source_node_id":"34ec9fb8820e4c188735bf915c02eed6","target_node_id":"6b615d9df9bc47e2b7a5564d93ac5ef7","id":"d9af56dbfe2846d2bf8702ecede1a192"},{"type":"Edge","source_node_id":"34483acbf9804b628af25384af20eb10","target_node_id":"9028af47203b473b8a43f7b1ac1cd9da","id":"7b63b32c7d5445f68c31093f14a8851e"},{"type":"Edge","source_node_id":"9028af47203b473b8a43f7b1ac1cd9da","target_node_id":"16a206dae03d45e0ba8d5cbd2ab0ab0f","id":"afe57c72a83043019684d41a8c7362ad"},{"type":"Edge","source_node_id":"4e5f4e6759334ad99376ea10722a1694","target_node_id":"9028af47203b473b8a43f7b1ac1cd9da","id":"aaa63f2777a24f968fd011ca52e16e46"},{"type":"Edge","source_node_id":"16a206dae03d45e0ba8d5cbd2ab0ab0f","target_node_id":"34483acbf9804b628af25384af20eb10","branch_id":"b7be37250d6b497b99661ad6e4cebf30","id":"867b5f2178f542cd98fe537dcea7ddba","name":"b7be37250d6b497b99661ad6e4cebf30"},{"type":"Edge","source_node_id":"16a206dae03d45e0ba8d5cbd2ab0ab0f","target_node_id":"024e771577804dd3bbf983f62575ad53","branch_id":"102ebae438784f00a0f8eb215a014c8d","id":"aea405e955db45948ecd8d723961b4c3","name":"102ebae438784f00a0f8eb215a014c8d"},{"type":"Edge","source_node_id":"024e771577804dd3bbf983f62575ad53","target_node_id":"43a3968c500c43c7bc49f0c94a5ad472","id":"37ece3db708042959bf14b8a9af47796"},{"type":"Edge","source_node_id":"43a3968c500c43c7bc49f0c94a5ad472","target_node_id":"6b615d9df9bc47e2b7a5564d93ac5ef7","branch_id":"f19967a287054fd1a5c9d8c49240c911","id":"7bf94ce778644b68a54b935f6015fad1","name":"f19967a287054fd1a5c9d8c49240c911"},{"type":"Edge","source_node_id":"16a206dae03d45e0ba8d5cbd2ab0ab0f","target_node_id":"8dec6bf76b8248fab2cffac2d9babf11","branch_id":"3292a5ad1c694de3abe6594a41315e3a","id":"fce68a7081ef4ab79a5eb570baf0a094","name":"3292a5ad1c694de3abe6594a41315e3a"},{"type":"Edge","source_node_id":"8dec6bf76b8248fab2cffac2d9babf11","target_node_id":"9028af47203b473b8a43f7b1ac1cd9da","id":"96440783904446efb777ea32772113b7"},{"type":"Edge","source_node_id":"43a3968c500c43c7bc49f0c94a5ad472","target_node_id":"4b207a5862424187bebc8b30ed2764ab","branch_id":"de2898124c8f413d847a89e42c713fd9","id":"4289919e4d8c480a927bec092bf40033","name":"de2898124c8f413d847a89e42c713fd9"},{"type":"Edge","source_node_id":"4b207a5862424187bebc8b30ed2764ab","target_node_id":"d067aebf76b64e93a19c46573abb8942","id":"313418c391d14c84876fc96441aeea69"},{"type":"Edge","source_node_id":"d067aebf76b64e93a19c46573abb8942","target_node_id":"34483acbf9804b628af25384af20eb10","branch_id":"db49c82aa29f4fb88625c87723c79736","id":"d80d73d7d6a743d1bca3ae55201fe627","name":"db49c82aa29f4fb88625c87723c79736"},{"type":"Edge","source_node_id":"d067aebf76b64e93a19c46573abb8942","target_node_id":"5584f283a4ad4cc4a1e9bb7b815995a7","branch_id":"8eb350bec86645dc8c76aa3ab25c9552","id":"3cbc1d6ea379438fbe9d2c44f5b3c80a","name":"8eb350bec86645dc8c76aa3ab25c9552"},{"type":"Edge","source_node_id":"ef5e54d2a5bd48efb6a6a4bbfb46bb9d","target_node_id":"0cdc52cf18464db59f064d508319e655","branch_id":"4dd62a2ae4c1410db0d0cf06f4548781","id":"150c975732984de2a766d829b10531c3","name":"4dd62a2ae4c1410db0d0cf06f4548781"},{"type":"Edge","source_node_id":"0cdc52cf18464db59f064d508319e655","target_node_id":"55b2dfb927154bfdaaf75c76e189a7c9","branch_id":"4658080195df42f6acfafd45df034570","id":"bc9ca9770a5846e28e96cdaeb56a9ac0","name":"4658080195df42f6acfafd45df034570"},{"type":"Edge","source_node_id":"0cdc52cf18464db59f064d508319e655","target_node_id":"3623dcb2a65a461a99cdb1748b43f315","branch_id":"d792196f17584665ad46b71307440ce7","id":"f93e1bfe60934548b9fb2d86114fe07b","name":"d792196f17584665ad46b71307440ce7"},{"type":"Edge","source_node_id":"3623dcb2a65a461a99cdb1748b43f315","target_node_id":"55b2dfb927154bfdaaf75c76e189a7c9","id":"300ee5547bd04432b0dbe0a27271ab24"},{"type":"Edge","source_node_id":"878eb31d80a94776ba268e794816155f","target_node_id":"6b615d9df9bc47e2b7a5564d93ac5ef7","branch_id":"4ba485c2338247cc905873607eef3ee3","id":"13fe0f33ec47414fb24d1e3370cdce0f","name":"4ba485c2338247cc905873607eef3ee3"},{"type":"Edge","source_node_id":"878eb31d80a94776ba268e794816155f","target_node_id":"96762c6274304a06915c1a966833a822","branch_id":"7512a42e4a2d4bc5b5faf295825c1031","id":"70e3950f6f8d42b097192554edd877e0","name":"7512a42e4a2d4bc5b5faf295825c1031"},{"type":"Edge","source_node_id":"96762c6274304a06915c1a966833a822","target_node_id":"6b615d9df9bc47e2b7a5564d93ac5ef7","id":"166d85e56db14ad996569adb1245525e"},{"type":"Edge","source_node_id":"878eb31d80a94776ba268e794816155f","target_node_id":"abd3468ad6b34517a91f5df07375601c","branch_id":"3a0169099edc426b9e02e05d1dd0ed94","id":"342bd2015b68441585b74ec92814a67b","name":"3a0169099edc426b9e02e05d1dd0ed94"},{"type":"Edge","source_node_id":"abd3468ad6b34517a91f5df07375601c","target_node_id":"6b615d9df9bc47e2b7a5564d93ac5ef7","id":"fcadeb0e1a68485dbdca0b00f825a6c9"},{"type":"Edge","source_node_id":"878eb31d80a94776ba268e794816155f","target_node_id":"5aade5fd320140ab9aa390d6fa59fa44","branch_id":"4fbba154a40f4351984d94e3a9ae82f9","id":"73ced012590b4585a77204b037ca438d","name":"4fbba154a40f4351984d94e3a9ae82f9"},{"type":"Edge","source_node_id":"5aade5fd320140ab9aa390d6fa59fa44","target_node_id":"6b615d9df9bc47e2b7a5564d93ac5ef7","id":"d1e1a84e0fbd4e0786bdc6d13d0f7507"},{"type":"Edge","source_node_id":"55b2dfb927154bfdaaf75c76e189a7c9","target_node_id":"e5a22bf7a1d74fd1ad5106539997a517","branch_id":"854eb2937e4a4eeea49ed3a33f9454c1","id":"5138883b7f5b4a25a720b42b90851cbe","name":"854eb2937e4a4eeea49ed3a33f9454c1"},{"type":"Edge","source_node_id":"e5a22bf7a1d74fd1ad5106539997a517","target_node_id":"546724c58ba543239e29056c7f4a87db","branch_id":"1794df39512e4b4cbc47352b1f41db1c","id":"186b32cb9e984ad8a4051245c630debc","name":"1794df39512e4b4cbc47352b1f41db1c"},{"type":"Edge","source_node_id":"e5a22bf7a1d74fd1ad5106539997a517","target_node_id":"518c5c13c839420cab3a8fb8a2345702","branch_id":"7e4934d8a9474232b12b72526dbd4928","id":"3d666a7ffde340b1ac4328200d6086c7","name":"7e4934d8a9474232b12b72526dbd4928"},{"type":"Edge","source_node_id":"518c5c13c839420cab3a8fb8a2345702","target_node_id":"82d47486983f45db84d12e7387b8b128","id":"7a4c18fa5b8548e7918c61c39cda88dd"},{"type":"Edge","source_node_id":"82d47486983f45db84d12e7387b8b128","target_node_id":"546724c58ba543239e29056c7f4a87db","branch_id":"a338ff24bc7148f89d7ad689d17067df","id":"eab6a85c21a7478590d07fb49eae7920","name":"a338ff24bc7148f89d7ad689d17067df"},{"type":"Edge","source_node_id":"82d47486983f45db84d12e7387b8b128","target_node_id":"00a0e79950f7490f96af50e204076ded","branch_id":"355ce6a3208444d1b7de1708de699bf5","id":"9ef66fbfb9e94e2cbea5653e2f0376d2","name":"355ce6a3208444d1b7de1708de699bf5"},{"type":"Edge","source_node_id":"0570ccc3d07f4d17936d7873671c0a00","target_node_id":"4df2f3e9950f486c867d8fd23b58bab9","id":"401061eccc2d4a9baaf0ed655a6aee35"},{"type":"Edge","source_node_id":"4df2f3e9950f486c867d8fd23b58bab9","target_node_id":"00a0e79950f7490f96af50e204076ded","branch_id":"f51e6e5df4ce4dea926b1f446fad6c14","id":"3d496538e23843a8bae94a532232862c","name":"f51e6e5df4ce4dea926b1f446fad6c14"},{"type":"Edge","source_node_id":"4df2f3e9950f486c867d8fd23b58bab9","target_node_id":"546724c58ba543239e29056c7f4a87db","branch_id":"6cdbfd8958264633834738ef88099827","id":"1e411a5d85e141f5a3b2bf1a98ec5cf9","name":"6cdbfd8958264633834738ef88099827"},{"type":"Edge","source_node_id":"878eb31d80a94776ba268e794816155f","target_node_id":"6b3f3667f79f4a498102b748d560627a","branch_id":"05f99c07148c425f96d1a8a7f5250b55","id":"1844cc5e93f645f999faf908831e2e9a","name":"05f99c07148c425f96d1a8a7f5250b55"},{"type":"Edge","source_node_id":"2d422c2bc11548e9a6082e527dd1b070","target_node_id":"75fd1f87f14d49069c43b6b1ebc14f27","id":"3b639c0ca3fe4d6bb4c948aacf3451ed"},{"type":"Edge","source_node_id":"75fd1f87f14d49069c43b6b1ebc14f27","target_node_id":"0cdc52cf18464db59f064d508319e655","branch_id":"74746656179c48ce94246143833989e8","id":"06416db66e8c4769a3431f7e386b4a8d","name":"74746656179c48ce94246143833989e8"},{"type":"Edge","source_node_id":"75fd1f87f14d49069c43b6b1ebc14f27","target_node_id":"b6c518610514481e9715465714946cc7","branch_id":"9aa01803441a4ea7b5e408317676b272","id":"8f86f7e0dc964c3aba3c73e7d63d4339","name":"9aa01803441a4ea7b5e408317676b272"},{"type":"Edge","source_node_id":"b6c518610514481e9715465714946cc7","target_node_id":"6b3f3667f79f4a498102b748d560627a","id":"6717db5b09304140972ba42f2c6c7e7c"},{"type":"Edge","source_node_id":"582c0c456dec4db8acfe9b77df825b0b","target_node_id":"ac3d2152cc8b42359d3978bf7e15b957","id":"aa4d1d5e71df4e24921178f3bbf8a122"},{"type":"Edge","source_node_id":"ac3d2152cc8b42359d3978bf7e15b957","target_node_id":"6b615d9df9bc47e2b7a5564d93ac5ef7","branch_id":"44f6e46181b841aba655ce07277d3f8f","id":"92690eef65284d3fb0ff18e5e00cf1c8","name":"44f6e46181b841aba655ce07277d3f8f"},{"type":"Edge","source_node_id":"ac3d2152cc8b42359d3978bf7e15b957","target_node_id":"0184d7c3916a465cbf5db40b0876ec5c","branch_id":"9328cf8fcb7a462da5193eaace237367","id":"df31e972049c488a8ad32c6fd0d5a770","name":"9328cf8fcb7a462da5193eaace237367"},{"type":"Edge","source_node_id":"0184d7c3916a465cbf5db40b0876ec5c","target_node_id":"6b615d9df9bc47e2b7a5564d93ac5ef7","branch_id":"53413425d36d41c8a6bcab8e98cc4cf2","id":"1fa294885f754dac954470ba166f1a6b","name":"53413425d36d41c8a6bcab8e98cc4cf2"},{"type":"Edge","source_node_id":"0184d7c3916a465cbf5db40b0876ec5c","target_node_id":"75150420125b4b35b7c0a92bb6df595b","branch_id":"f767058ac97e48faaeae31f267b61755","id":"59958027b2484e02aa0d041f867e07a8","name":"f767058ac97e48faaeae31f267b61755"},{"type":"Edge","source_node_id":"75150420125b4b35b7c0a92bb6df595b","target_node_id":"bc4dd2417f2b4d45ad4bd93d0ccc1f29","id":"5b1e69381fb74f35bff636167c0dbffe"},{"type":"Edge","source_node_id":"bc4dd2417f2b4d45ad4bd93d0ccc1f29","target_node_id":"6b615d9df9bc47e2b7a5564d93ac5ef7","branch_id":"7f1ae029b46749089cd927aacf6220ef","id":"98afe8cdc89445c6912a20f5ac4989d4","name":"7f1ae029b46749089cd927aacf6220ef"},{"type":"Edge","source_node_id":"bc4dd2417f2b4d45ad4bd93d0ccc1f29","target_node_id":"c5ed4dfe882448ecabd92590fb78d266","branch_id":"a1cec44e5e554bdd8b0ba679af50e616","id":"b937ef3a7eca46a4a767ba963a75928f","name":"a1cec44e5e554bdd8b0ba679af50e616"},{"type":"Edge","source_node_id":"c5ed4dfe882448ecabd92590fb78d266","target_node_id":"b914fa16be5e47efa19b0084546b5354","id":"92b32b0c52a24220aaf83c95180eb4f4"},{"type":"Edge","source_node_id":"b914fa16be5e47efa19b0084546b5354","target_node_id":"6b615d9df9bc47e2b7a5564d93ac5ef7","branch_id":"16e598208cd44e289ece900d2945899e","id":"24e1b8e743c24d6fb40cfa97d51722a9","name":"16e598208cd44e289ece900d2945899e"},{"type":"Edge","source_node_id":"b914fa16be5e47efa19b0084546b5354","target_node_id":"3592d843108f434fa58b5df96a823484","branch_id":"adcf5d417aa845c19e5707a71d60f1a8","id":"0a67dcc31b874c74b19c42a0dd7243ba","name":"adcf5d417aa845c19e5707a71d60f1a8"},{"type":"Edge","source_node_id":"da00dbcf32824fc0834090fa4e2b1fe4","target_node_id":"5584f283a4ad4cc4a1e9bb7b815995a7","branch_id":"35e24b52aeba451b82447940a8128ffc","id":"47604095fb264e13b65521a4601f065c","name":"35e24b52aeba451b82447940a8128ffc"},{"type":"Edge","source_node_id":"da00dbcf32824fc0834090fa4e2b1fe4","target_node_id":"6b615d9df9bc47e2b7a5564d93ac5ef7","branch_id":"d1aab1cf908b43b3aca94e1b294bbf16","id":"4a3fb0c4870d423bad152529875506c5","name":"d1aab1cf908b43b3aca94e1b294bbf16"},{"type":"Edge","source_node_id":"3592d843108f434fa58b5df96a823484","target_node_id":"2a1adc0010144721b5f6ff25df7767ec","id":"a6a083d112374accad7cb5add1dd40af"},{"type":"Edge","source_node_id":"2a1adc0010144721b5f6ff25df7767ec","target_node_id":"da00dbcf32824fc0834090fa4e2b1fe4","id":"5747dc57c37f4ff99f12ef2d42361945"},{"type":"Edge","source_node_id":"e35912998f8b4253b9f42d262fdd04be","target_node_id":"7b179db7dcce414bb36ed41e173adbc2","id":"e73825a0e38f4c13ba8c1e5650d8fb34"},{"type":"Edge","source_node_id":"7b179db7dcce414bb36ed41e173adbc2","target_node_id":"21456a8b702c44c3a1648fe0f1472d86","branch_id":"3bf919823b784173a21225740072874f","id":"1477080610164a3f8eea236a27654902","name":"3bf919823b784173a21225740072874f"},{"type":"Edge","source_node_id":"7b179db7dcce414bb36ed41e173adbc2","target_node_id":"55b2dfb927154bfdaaf75c76e189a7c9","branch_id":"04c8a39bf41c4345a59a47e5ed4ce20b","id":"2f767d01f1774a3c93ebbc539a62bb42","name":"04c8a39bf41c4345a59a47e5ed4ce20b"},{"type":"Edge","source_node_id":"4998c18e83ad497f8b2d91684b84e9ca","target_node_id":"3fa5f8bbdc244349936619a8d5859b97","branch_id":"da0cf74da5dd4ad5ae236c045f28acb4","id":"bd1c17103fe0453f8879389838b1bb48","name":"da0cf74da5dd4ad5ae236c045f28acb4"},{"type":"Edge","source_node_id":"3fa5f8bbdc244349936619a8d5859b97","target_node_id":"fa12d92bdbdc452dbb2f88722b2a0909","branch_id":"81278d8aeffb4897b39bcc15a7cb066c","id":"96922a405dd84784bd2fb5895f5607f8","name":"81278d8aeffb4897b39bcc15a7cb066c"},{"type":"Edge","source_node_id":"3fa5f8bbdc244349936619a8d5859b97","target_node_id":"1b9840104d154172b3ba43acc4bdc9e5","branch_id":"091b8d3b8bf442518c8eb44108a3ab9a","id":"eb83b0336d924b97b754f81b12916d17","name":"091b8d3b8bf442518c8eb44108a3ab9a"},{"type":"Edge","source_node_id":"812ab34cae2d4bf1881b0b32d49d95e6","target_node_id":"87417ea68c84464c8535a4b1bec092c5","branch_id":"64828902760645058a18c390a98ebdef","id":"c6ab5b5410244e82b3460aecbc88af6b","name":"64828902760645058a18c390a98ebdef"},{"type":"Edge","source_node_id":"87417ea68c84464c8535a4b1bec092c5","target_node_id":"f2cefa49e5fd447eb46e0ef9cece3656","branch_id":"aed7426f72224cf381914c33da2de6d0","id":"a5a005b734ff4f8ab6df5176a82245c1","name":"aed7426f72224cf381914c33da2de6d0"},{"type":"Edge","source_node_id":"87417ea68c84464c8535a4b1bec092c5","target_node_id":"1b9840104d154172b3ba43acc4bdc9e5","branch_id":"71d62bf1395b43d7ba61e7539f781e54","id":"63d7fd3fc9f740da8960ef1724c9b5dd","name":"71d62bf1395b43d7ba61e7539f781e54"},{"type":"Edge","source_node_id":"1b9840104d154172b3ba43acc4bdc9e5","target_node_id":"5ffe3110a64841b29fff1b548dc85d29","id":"73ec02d9917140e4a275a709f0b8ed22"},{"type":"Edge","source_node_id":"5ffe3110a64841b29fff1b548dc85d29","target_node_id":"5584f283a4ad4cc4a1e9bb7b815995a7","id":"0f0ee62c3b0c4eb983adce54739f3415"},{"type":"Edge","source_node_id":"00a0e79950f7490f96af50e204076ded","target_node_id":"99e6da25412d4901bb94a9c117ef0a90","id":"90039d20f4ba421d97991994664651f3"},{"type":"Edge","source_node_id":"99e6da25412d4901bb94a9c117ef0a90","target_node_id":"da27ef14b40b4bcdbc2cb9626f7093f8","branch_id":"f34a1eab2b1a4acabdee537810af070c","id":"346396a8c7a644cc9703dbdfdd379eb2","name":"f34a1eab2b1a4acabdee537810af070c"},{"type":"Edge","source_node_id":"99e6da25412d4901bb94a9c117ef0a90","target_node_id":"546724c58ba543239e29056c7f4a87db","branch_id":"a527d842d729489aa1d0662e525b4823","id":"bd24272de651401083524f36974ab2a8","name":"a527d842d729489aa1d0662e525b4823"},{"type":"Edge","source_node_id":"878eb31d80a94776ba268e794816155f","target_node_id":"f4d72b92f6c247ebb4bcd115bc871caf","branch_id":"658d4f5c3c214ded9e2d8dd894d92135","id":"a8fa9dd861df4ea19b096dcd439d9f44","name":"658d4f5c3c214ded9e2d8dd894d92135"},{"type":"Edge","source_node_id":"f4d72b92f6c247ebb4bcd115bc871caf","target_node_id":"6b615d9df9bc47e2b7a5564d93ac5ef7","id":"841f02b9ab4b4c6a82dcc1c5bb2e7210"},{"type":"Edge","source_node_id":"55b2dfb927154bfdaaf75c76e189a7c9","target_node_id":"ffea21ee6e894c5385ad01bd2b8f2ebe","branch_id":"2788cd20a13b46bd9e3b677231b9936a","id":"4a9d5a03d01e4501b3e2dd2ea1af880c","name":"2788cd20a13b46bd9e3b677231b9936a"},{"type":"Edge","source_node_id":"ffea21ee6e894c5385ad01bd2b8f2ebe","target_node_id":"e870da0711d44663bd032d95360b04a5","id":"e46be765a597438582b129a8688fc548"},{"type":"Edge","source_node_id":"e870da0711d44663bd032d95360b04a5","target_node_id":"1603b656f6484951be725e810923e7a4","id":"94268d6d14a34ebbb1aed5450f79c488"},{"type":"Edge","source_node_id":"1603b656f6484951be725e810923e7a4","target_node_id":"878eb31d80a94776ba268e794816155f","branch_id":"a4b49699812a44889e579ac7b7e888f7","id":"06260bf8c336447c9d5151715ed837a4","name":"a4b49699812a44889e579ac7b7e888f7"},{"type":"Edge","source_node_id":"1603b656f6484951be725e810923e7a4","target_node_id":"6b615d9df9bc47e2b7a5564d93ac5ef7","branch_id":"19a5a11125794bbf96ee42dd1f8efc4f","id":"27b5cf5a117043b8b755cca361486631","name":"19a5a11125794bbf96ee42dd1f8efc4f"},{"type":"Edge","source_node_id":"fa12d92bdbdc452dbb2f88722b2a0909","target_node_id":"61f3117ef2714e249579496b7ee83026","id":"c7e9b72b75a64ec18d4631b4ec71afb4"},{"type":"Edge","source_node_id":"61f3117ef2714e249579496b7ee83026","target_node_id":"5584f283a4ad4cc4a1e9bb7b815995a7","branch_id":"9d2419a4864f470c8d92d22b28e67372","id":"a3ef3f87333948808c83ee50bb31192b","name":"9d2419a4864f470c8d92d22b28e67372"},{"type":"Edge","source_node_id":"c37acca2c10d45fa9ff35e522d74804a","target_node_id":"154cbe739e4b44eb9b9b483381c88293","id":"63f972c679e94050bf62105dbc8e2285"},{"type":"Edge","source_node_id":"154cbe739e4b44eb9b9b483381c88293","target_node_id":"582c0c456dec4db8acfe9b77df825b0b","branch_id":"3eb592c52beb4e66987a833e60692783","id":"cc8f87e8d6014e6a934b9a5fecd6170c","name":"3eb592c52beb4e66987a833e60692783"},{"type":"Edge","source_node_id":"154cbe739e4b44eb9b9b483381c88293","target_node_id":"96762c6274304a06915c1a966833a822","branch_id":"94cf98287aa241f28892724642028b9a","id":"cf2d280ae99c4a08ad42cadee07a544a","name":"94cf98287aa241f28892724642028b9a"},{"type":"Edge","source_node_id":"154cbe739e4b44eb9b9b483381c88293","target_node_id":"abd3468ad6b34517a91f5df07375601c","branch_id":"e7e6bc7282234cf984cc5662104b014e","id":"6c6928fdd1b74571ac9149c118cbd443","name":"e7e6bc7282234cf984cc5662104b014e"},{"type":"Edge","source_node_id":"154cbe739e4b44eb9b9b483381c88293","target_node_id":"5aade5fd320140ab9aa390d6fa59fa44","branch_id":"cd891c10f02a45deb4cb2f310e52b8db","id":"f40a8bfd2b8f44e2875611ec7c0cd451","name":"cd891c10f02a45deb4cb2f310e52b8db"},{"type":"Edge","source_node_id":"878eb31d80a94776ba268e794816155f","target_node_id":"8372de21011a4fc58f7b052c80846961","branch_id":"c9b6af9871c44372bce7029c1242ce8f","id":"0d2e906a0e7e47ffb3c8cd76504ffc78","name":"c9b6af9871c44372bce7029c1242ce8f"},{"type":"Edge","source_node_id":"8372de21011a4fc58f7b052c80846961","target_node_id":"a6de984d0ecf425c86836a588cf01406","branch_id":"71b2a246d7a4481dbc76112f092698aa","id":"3cfb23bfec6845dca502e5883b98ed13","name":"71b2a246d7a4481dbc76112f092698aa"},{"type":"Edge","source_node_id":"8372de21011a4fc58f7b052c80846961","target_node_id":"5b7e42b59c0c41dd800cd09009c2711d","branch_id":"7ae984ef8c8c47ffa972c9bbe6464da1","id":"e642274931084d4fa3436ef802f5a4a9","name":"7ae984ef8c8c47ffa972c9bbe6464da1"},{"type":"Edge","source_node_id":"5b7e42b59c0c41dd800cd09009c2711d","target_node_id":"6422f13382434440a9ac497f29753423","id":"1a3bbe06339542f6a1cb5a789b1a59e2"},{"type":"Edge","source_node_id":"6422f13382434440a9ac497f29753423","target_node_id":"44cffaffc14c498289ba2e234f962440","branch_id":"3c83e9d1d06d46e79e077978e79b0a44","id":"eba1a64ccd4543ccb6d3472f7f854a0c","name":"3c83e9d1d06d46e79e077978e79b0a44"},{"type":"Edge","source_node_id":"44cffaffc14c498289ba2e234f962440","target_node_id":"5b7e42b59c0c41dd800cd09009c2711d","id":"59b7d06f0b2b4898ad2f35bfd9b78bad"},{"type":"Edge","source_node_id":"6422f13382434440a9ac497f29753423","target_node_id":"48667218290f4e919de3cb7fa3d59088","branch_id":"6f81cf2c48b443c08fb4bdd9c332d287","id":"a1e5456a6c7c42929f2f4b3242864d2f","name":"6f81cf2c48b443c08fb4bdd9c332d287"},{"type":"Edge","source_node_id":"48667218290f4e919de3cb7fa3d59088","target_node_id":"5b7e42b59c0c41dd800cd09009c2711d","id":"00927ba1f9244346b95a772870af7309"},{"type":"Edge","source_node_id":"6422f13382434440a9ac497f29753423","target_node_id":"2cde30fb4daf4251905d1b51610d3c70","branch_id":"a7fafa1748a14a9f928fd6a248dd3be0","id":"ea27cd0e97d04919845daf44dfcfdb57","name":"a7fafa1748a14a9f928fd6a248dd3be0"},{"type":"Edge","source_node_id":"a6de984d0ecf425c86836a588cf01406","target_node_id":"2cde30fb4daf4251905d1b51610d3c70","id":"41f15eeb63ac488189d723cafcafe6ae"},{"type":"Edge","source_node_id":"2cde30fb4daf4251905d1b51610d3c70","target_node_id":"6b615d9df9bc47e2b7a5564d93ac5ef7","id":"d1fcd44b702f48dfaf929e4600316599"},{"type":"Edge","source_node_id":"878eb31d80a94776ba268e794816155f","target_node_id":"98a9957e0e124b8f997a4ac08a4b387a","branch_id":"950735d0e7ac4fed8103b85a9df248c6","id":"2187bf0cfdbb40b2910b791b2c4814ff","name":"950735d0e7ac4fed8103b85a9df248c6"},{"type":"Edge","source_node_id":"98a9957e0e124b8f997a4ac08a4b387a","target_node_id":"df94abcde47a4fec8772fb5ccc8a00e8","branch_id":"f73d018997a044baacbc4331b68e7291","id":"9777dcca32a74ff2b0c263b7c596a395","name":"f73d018997a044baacbc4331b68e7291"},{"type":"Edge","source_node_id":"98a9957e0e124b8f997a4ac08a4b387a","target_node_id":"7628e3dd4aa14fc490d21c688cd82546","branch_id":"08f979ddc0764ae9913e49e8f5c2fa9e","id":"6abb436fff2649beb2332cbfa71e79e7","name":"08f979ddc0764ae9913e49e8f5c2fa9e"},{"type":"Edge","source_node_id":"7628e3dd4aa14fc490d21c688cd82546","target_node_id":"30f1d676900d4524905475a5b992367a","id":"54f88ef1bf254b4a9744ec8bc3c12d73"},{"type":"Edge","source_node_id":"30f1d676900d4524905475a5b992367a","target_node_id":"66567f05291b438bbc89884f02881a90","id":"0d925a6a25ce4b4782d87e59b8b7d7ae"},{"type":"Edge","source_node_id":"66567f05291b438bbc89884f02881a90","target_node_id":"0b59dd57f1fa4d61b74fb4859f05693b","branch_id":"baecdc3aaf814f26acb7de669067ce00","id":"d964e1fc22864fd983966c194daa2a62","name":"baecdc3aaf814f26acb7de669067ce00"},{"type":"Edge","source_node_id":"0b59dd57f1fa4d61b74fb4859f05693b","target_node_id":"30f1d676900d4524905475a5b992367a","id":"f145104fc3f044439180e45468bade56"},{"type":"Edge","source_node_id":"66567f05291b438bbc89884f02881a90","target_node_id":"8a6e1170ba97426f914f9221e2c30374","branch_id":"34de82bae25a41368d3091cfc056df13","id":"02919a26e2b0492b8695174b5b6f4072","name":"34de82bae25a41368d3091cfc056df13"},{"type":"Edge","source_node_id":"8a6e1170ba97426f914f9221e2c30374","target_node_id":"30f1d676900d4524905475a5b992367a","id":"078fba3206f54b65a1b287ee1918f32a"},{"type":"Edge","source_node_id":"66567f05291b438bbc89884f02881a90","target_node_id":"99de51bffe6641a0999446f1642076f6","branch_id":"21e1630b2f9441119b2cc8cdec2194e6","id":"4a8cf864d714481c992df901a0c67933","name":"21e1630b2f9441119b2cc8cdec2194e6"},{"type":"Edge","source_node_id":"66567f05291b438bbc89884f02881a90","target_node_id":"7628e3dd4aa14fc490d21c688cd82546","branch_id":"5e35db80d8534ffeb704b95cd886ae20","id":"c4adaf3414db4a969e31764ca1c4ab2b","name":"5e35db80d8534ffeb704b95cd886ae20"},{"type":"Edge","source_node_id":"df94abcde47a4fec8772fb5ccc8a00e8","target_node_id":"99de51bffe6641a0999446f1642076f6","id":"ba87608d5d7f4c5b8dbea1a87134e51b"},{"type":"Edge","source_node_id":"99de51bffe6641a0999446f1642076f6","target_node_id":"6b615d9df9bc47e2b7a5564d93ac5ef7","id":"a3a51f75cb8e4244bfb7304559700edf"},{"type":"Edge","source_node_id":"61f3117ef2714e249579496b7ee83026","target_node_id":"b8833f1ad8b04981bc101499c1e738b7","branch_id":"1a62acd94cd749adb1e35b82fb5833d8","id":"35573540837c42a7be7cf82364158da1","name":"1a62acd94cd749adb1e35b82fb5833d8"}],"id":"primary"}],"script_variables":[{"type":"VariableDto","type":"String","name":"itemJSON","value":{"type":"String","type":"String","mode":"string"},"list":false,"id":"5852a3f14b7a4c9997b14d1dd91dff79","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"itemName","value":{"type":"String","type":"String","mode":"string"},"list":false,"id":"e43bf0dcc83e4a9ba40deca92fc06843","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"record_id","value":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    return '';\n})()\n"},"list":false,"id":"4b1ccdbf646749e5a96db491f4dadbf4","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"record_table","value":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    return '';\n})()\n"},"list":false,"id":"9b3644853d414e138b6c5b78e231827f","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"qIndex","value":{"type":"String","type":"String","mode":"string","value":"-1"},"list":false,"id":"29af9d78951b435195022294bf06da4e","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"limit","value":{"type":"String","type":"String","mode":"string","value":"7"},"list":false,"id":"266a1002c41a4b48a35b22610935b60e","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"count","value":{"type":"String","type":"String","mode":"string","value":"0"},"list":false,"id":"3d9fdbf820aa4c0f90b9e743725cd0a5","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"index","value":{"type":"String","type":"String","mode":"string","value":"0"},"list":false,"id":"e3c4a0500b054aedb7b89833ba4102cc","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"validation_message","value":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    return '';\n})()\n"},"list":false,"id":"510ab7eb0459486894cfb03206a535f7","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"request_for","value":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    /* Return a quoted string.  For example:\n\n       var result;\n       if (vaInputs.first_name == 'Bill') {\n           return gs.getMessage('hi there {0}', [vaInputs.first_name]);\n       } else {\n           return gs.getMessage('how are you {0}', [vaInputs.last_name]);\n       }\n    */\n    return '';\n})()\n"},"list":false,"id":"b86b073e027547ba8e11295120afb4e0","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"canView","value":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    return false;\n})()\n"},"list":false,"id":"951bf0cf7481457397b490a396d646a9","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"unsupportedVarTypes","value":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    return '7,14,15,17,21,23,25,29,30';\n})()\n"},"list":false,"id":"3f1019fd539f444298efba7a88a2f502","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"media_links_form_attachment","value":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    return '';\n})()\n"},"list":false,"id":"9453e36be0ba4ec18b56132f6f3077be","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"contextualSearchVariable","value":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    return '';\n})()\n"},"list":false,"id":"29830cf95e804d9c92e214b5fc10b6b1","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"contextualSearchContext","value":{"type":"String","type":"String","mode":"string","value":"2821675a5b30130070e4492c11f91a89"},"list":false,"id":"1f30eacc703d45a0860092682269f865","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"contextualSearchResultLimit","value":{"type":"String","type":"String","mode":"string","value":"3"},"list":false,"id":"5fe9de3242924795b912dc4f5e4bc5f2","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"contextualSearchIndex","value":{"type":"String","type":"String","mode":"string","value":"0"},"list":false,"id":"02568156a7014e3b83b6ac430d2683ec","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"contextualSearchResultJsonString","value":{"type":"String","type":"String","mode":"string"},"list":false,"id":"5056876c64b44eb4a2c9ddb162a16ff5","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"contextualSearchResultCount","value":{"type":"String","type":"String","mode":"string","value":"0"},"list":false,"id":"5fb02314a9bf45a0a29504c102bb126d","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"no_records_found","value":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    /* return 'a default value'; */\n    return \"false\";\n})()\n"},"list":false,"id":"58321a932a2b4c97857ded9727e47c21","formatType":"text","secure":false,"sensitive":false}],"glide_variables":[{"type":"VariableDto","type":"String","name":"catalog_item_id","list":false,"id":"0f634751fbfd4ec486748687414dd878","formatType":"text","metadata":{"libraryMappingType":"input"},"secure":false,"sensitive":false},{"type":"True/False","type":"True/False","id":"1bb2fe5e354046aeb52a63074d07ba45","name":"proceed","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"True/False","type":"True/False","id":"485035ff241d4d0391863449aa6a011f","name":"submit_producer","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"True/False","type":"True/False","id":"c5644432f6864cb6922aaa75676f060f","name":"order_item","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Date/Time","type":"Date/Time","mode":"date","id":"9a88cdae0a7b4f9e836934a2e99487a9","name":"question_date","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"VariableDto","type":"String","name":"question_text","list":false,"id":"c17814d70da44b518aa2eafae7212481","formatType":"Text","validationScript":"","secure":false,"sensitive":false},{"type":"Choice","type":"Choice","choices":[],"id":"21f03cf82d1740158a9032de119df6b6","name":"question_reference","formatType":"text","secure":false,"sensitive":false,"list":false,"table":""},{"type":"Reference","type":"Reference","table":"sys_user","id":"a8de74eb450349728c28e2cf9fb251ec","name":"user","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Choice","type":"Choice","choices":[],"id":"86f94bd854c04fa38d3bb14a76dc208a","name":"question_choice","formatType":"text","secure":false,"sensitive":false,"list":false,"table":""},{"type":"Date/Time","type":"Date/Time","mode":"date_time","id":"1ae6e1803c2c47099c1d5437b3e59367","name":"question_date_time","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Choice","type":"Choice","choices":[],"id":"262e0c01a06e44b39ccd275726f77451","name":"question_requested_for","formatType":"text","secure":false,"sensitive":false,"list":false,"table":""},{"type":"VariableDto","type":"String","name":"search_requested_for","list":false,"id":"79754fac91114fd78daa60e56ac0e1b0","formatType":"Text","validationScript":"","secure":false,"sensitive":false},{"type":"True/False","type":"True/False","id":"6c27c491380b4980a12c8c666290504b","name":"request_for_another_user","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"VariableDto","type":"String","name":"question_email","list":false,"id":"67e05e83ebd54da48c2b0774fcde7c0c","formatType":"33513d135b1200101f254d3ba881c7d5","validationScript":"","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"question_ip_address","list":false,"id":"86688b76a4344f1eb3d6685ad23b01bb","formatType":"a860c5945b2200101f254d3ba881c7df","validationScript":"","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"question_url","list":false,"id":"f5b58d7b86c84bc5bb35fa4954bf9c01","formatType":"77d8b2935b9200101f254d3ba881c7b9","validationScript":"","secure":false,"sensitive":false},{"type":"True/False","type":"True/False","id":"68661a04fdc944b994ea245daa18c3d8","name":"add_attachment","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"File","type":"File","id":"fc2bca3e8fcf40e3aef08afc434f70dc","name":"upload_attachment","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"True/False","type":"True/False","id":"e1ca9a14bb8e4626846f0f973e8136c4","name":"add_more","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"File","type":"File","id":"f7a9d7c3ed364d8b90180200cde3fed7","name":"question_attachment","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"VariableDto","type":"String","name":"execute_contextual_search","list":false,"id":"01c90199d03f47238fc9c6c60fc69239","formatType":"text","metadata":{"libraryMappingType":"input"},"secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"confirm_catalog_item","list":false,"id":"2b836bab1e05478c93e2061694de4032","formatType":"text","metadata":{"libraryMappingType":"input"},"secure":false,"sensitive":false},{"type":"True/False","type":"True/False","id":"c0ac3986f5d34729bcdb0f53eb04f396","name":"did_articles_help","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"True/False","type":"True/False","id":"04a2c8d83a504d38ae9051bbaa012460","name":"proceed_with_default","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"True/False","type":"True/False","id":"c2b948794db64faa88d321db88eb5c7d","name":"show_end_state_card","formatType":"text","metadata":{"libraryMappingType":"input"},"secure":false,"sensitive":false,"list":false},{"type":"Choice","type":"Choice","choices":[],"id":"e6f220ccf9fc4bd799e96134b5877586","name":"question_choice_other_channels","formatType":"text","secure":false,"sensitive":false,"list":false,"table":""},{"type":"VariableDto","type":"String","name":"search_reference","list":false,"id":"f0bd963accb14b7881dc4e0ba869bc08","formatType":"Text","validationScript":"","secure":false,"sensitive":false},{"type":"Choice","type":"Choice","choices":[],"id":"2aaa54a24ee24759bbdb9c7cf69ff520","name":"question_reference_other_channels","formatType":"text","secure":false,"sensitive":false,"list":false,"table":""}],"applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"dc2fa61c1b3611103ddb639bbc4bcbb6","library-usage":{"type":"Library","input-parameters":[{"name":"catalog_item_id","label":"catalog_item_id","default-value":"\"\"","required":true,"metadata":{"type":"String","list":false,"items":[],"use_items":false},"id":"0f634751fbfd4ec486748687414dd878","type":"String","hint":""},{"name":"execute_contextual_search","label":"execute_contextual_search","default-value":"\"false\"","required":false,"metadata":{"type":"String","list":false,"items":[],"use_items":false},"id":"01c90199d03f47238fc9c6c60fc69239","type":"String","hint":""},{"name":"confirm_catalog_item","label":"confirm_catalog_item","default-value":"\"true\"","required":false,"metadata":{"type":"String","list":false,"items":[],"use_items":false},"id":"2b836bab1e05478c93e2061694de4032","type":"String","hint":""},{"name":"show_end_state_card","label":"show_end_state_card","default-value":"false","required":false,"metadata":{"type":"True/False","list":false,"items":[],"use_items":false},"id":"c2b948794db64faa88d321db88eb5c7d","type":"True/False"}],"return-values-mapping":[{"name":"record_id","label":"record_id","value":{"type":"String","type":"String","mode":"string","value":"{{vaVars.record_id}}"}},{"name":"record_table","label":"record_table","value":{"type":"String","type":"String","mode":"string","value":"{{vaVars.record_table}}"}},{"name":"variables","label":"variables","value":{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    if (!itemJson.variables)\n        return '';\n    var variablesObj = {};\n    for (i = 0; i &lt; itemJson.variables.length; i++) {\n        variablesObj[itemJson.variables[i].name] = itemJson.variables[i].value;\n    }\n    return JSON.stringify(variablesObj);\n})()\n"}}]},"domain":"global","topic_type":"TOPIC_BLOCK","channels":[],"id":"fcccac971b8421103ddb639bbc4bcb8f","name":"_PRVW__9fdc20d793842110ea79da28e1887074","key_phrases":[],"nlu_provider":"","nlu_model":"","nlu_model_label":"","nlu_intent":"","nlu_intent_label":"","flexible_conversation_switching":true,"autopilot_topic":false,"design_categories":[],"triggerable_by_notification":false,"library":true,"readOnly":false,"nluMapping":"[]"}</design_definition>
        <design_topic_id>fcccac971b8421103ddb639bbc4bcb8f</design_topic_id>
        <graph>{"graph_api_version":"1.0.41","variables":{"0f634751fbfd4ec486748687414dd878":{"id":"0f634751fbfd4ec486748687414dd878","name":"catalog_item_id","label":"Catalog_item_id","defaultValue":"","varType":"string","category":"vaInputs","metadata":{"libraryMappingType":"input"}},"5852a3f14b7a4c9997b14d1dd91dff79":{"id":"5852a3f14b7a4c9997b14d1dd91dff79","value":{"mode":"simple","value":""},"name":"itemJSON","label":"itemJSON","varType":"script","category":"vaVars"},"e43bf0dcc83e4a9ba40deca92fc06843":{"id":"e43bf0dcc83e4a9ba40deca92fc06843","value":{"mode":"simple","value":""},"name":"itemName","label":"itemName","varType":"script","category":"vaVars"},"4b1ccdbf646749e5a96db491f4dadbf4":{"id":"4b1ccdbf646749e5a96db491f4dadbf4","value":{"mode":"script","value":"(function execute() {\n    return '';\n})()\n"},"name":"record_id","label":"record_id","varType":"script","category":"vaVars"},"9b3644853d414e138b6c5b78e231827f":{"id":"9b3644853d414e138b6c5b78e231827f","value":{"mode":"script","value":"(function execute() {\n    return '';\n})()\n"},"name":"record_table","label":"record_table","varType":"script","category":"vaVars"},"1bb2fe5e354046aeb52a63074d07ba45":{"id":"1bb2fe5e354046aeb52a63074d07ba45","name":"proceed","label":"Proceed","varType":"boolean","category":"vaInputs"},"29af9d78951b435195022294bf06da4e":{"id":"29af9d78951b435195022294bf06da4e","value":{"mode":"simple","value":"-1"},"name":"qIndex","label":"qIndex","varType":"script","category":"vaVars"},"485035ff241d4d0391863449aa6a011f":{"id":"485035ff241d4d0391863449aa6a011f","name":"submit_producer","label":"Submit Producer","varType":"boolean","category":"vaInputs"},"266a1002c41a4b48a35b22610935b60e":{"id":"266a1002c41a4b48a35b22610935b60e","value":{"mode":"simple","value":"7"},"name":"limit","label":"limit","varType":"script","category":"vaVars"},"3d9fdbf820aa4c0f90b9e743725cd0a5":{"id":"3d9fdbf820aa4c0f90b9e743725cd0a5","value":{"mode":"simple","value":"0"},"name":"count","label":"count","varType":"script","category":"vaVars"},"e3c4a0500b054aedb7b89833ba4102cc":{"id":"e3c4a0500b054aedb7b89833ba4102cc","value":{"mode":"simple","value":"0"},"name":"index","label":"index","varType":"script","category":"vaVars"},"c5644432f6864cb6922aaa75676f060f":{"id":"c5644432f6864cb6922aaa75676f060f","name":"order_item","label":"Order Item","varType":"boolean","category":"vaInputs"},"9a88cdae0a7b4f9e836934a2e99487a9":{"id":"9a88cdae0a7b4f9e836934a2e99487a9","name":"question_date","label":"Question Date","varType":"date_time","category":"vaInputs","mode":"date"},"510ab7eb0459486894cfb03206a535f7":{"id":"510ab7eb0459486894cfb03206a535f7","value":{"mode":"script","value":"(function execute() {\n    return '';\n})()\n"},"name":"validation_message","label":"validation_message","varType":"script","category":"vaVars"},"c17814d70da44b518aa2eafae7212481":{"id":"c17814d70da44b518aa2eafae7212481","name":"question_text","label":"Question Text","varType":"string","category":"vaInputs","secure":false,"encryptionSalt":{"value":"MTYxMTIxNzA0NzMzMiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l","mode":"simple"},"encryptionHashFunction":"SHA-256"},"21f03cf82d1740158a9032de119df6b6":{"id":"21f03cf82d1740158a9032de119df6b6","name":"question_reference","label":"Question Reference","varType":"reference","table":"","category":"vaInputs"},"a8de74eb450349728c28e2cf9fb251ec":{"category":"vaInputs","id":"a8de74eb450349728c28e2cf9fb251ec","label":"User","name":"user","table":"sys_user","varType":"reference"},"b86b073e027547ba8e11295120afb4e0":{"id":"b86b073e027547ba8e11295120afb4e0","value":{"mode":"script","value":"(function execute() {\n    /* Return a quoted string.  For example:\n\n       var result;\n       if (vaInputs.first_name == 'Bill') {\n           return gs.getMessage('hi there {0}', [vaInputs.first_name]);\n       } else {\n           return gs.getMessage('how are you {0}', [vaInputs.last_name]);\n       }\n    */\n    return '';\n})()\n"},"name":"request_for","label":"request_for","varType":"script","category":"vaVars"},"86f94bd854c04fa38d3bb14a76dc208a":{"id":"86f94bd854c04fa38d3bb14a76dc208a","name":"question_choice","label":"Question Choice","varType":"reference","table":"","category":"vaInputs"},"1ae6e1803c2c47099c1d5437b3e59367":{"id":"1ae6e1803c2c47099c1d5437b3e59367","name":"question_date_time","label":"Question Date Time","varType":"date_time","category":"vaInputs","mode":"date_time"},"262e0c01a06e44b39ccd275726f77451":{"id":"262e0c01a06e44b39ccd275726f77451","name":"question_requested_for","label":"Question Requested For","varType":"reference","table":"","category":"vaInputs"},"79754fac91114fd78daa60e56ac0e1b0":{"id":"79754fac91114fd78daa60e56ac0e1b0","name":"search_requested_for","label":"Search Requested For","varType":"string","category":"vaInputs","secure":false,"encryptionSalt":{"value":"MTYxMTIxNzA0NzMzMiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l","mode":"simple"},"encryptionHashFunction":"SHA-256"},"951bf0cf7481457397b490a396d646a9":{"id":"951bf0cf7481457397b490a396d646a9","value":{"mode":"script","value":"(function execute() {\n    return false;\n})()\n"},"name":"canView","label":"canView","varType":"script","category":"vaVars"},"6c27c491380b4980a12c8c666290504b":{"id":"6c27c491380b4980a12c8c666290504b","name":"request_for_another_user","label":"Request For Another User","varType":"boolean","category":"vaInputs"},"3f1019fd539f444298efba7a88a2f502":{"id":"3f1019fd539f444298efba7a88a2f502","value":{"mode":"script","value":"(function execute() {\n    return '7,14,15,17,21,23,25,29,30';\n})()\n"},"name":"unsupportedVarTypes","label":"unsupportedVarTypes","varType":"script","category":"vaVars"},"67e05e83ebd54da48c2b0774fcde7c0c":{"id":"67e05e83ebd54da48c2b0774fcde7c0c","name":"question_email","label":"Question Email","varType":"string","category":"vaInputs","secure":false,"encryptionSalt":{"value":"MTYxMTIxNzA0NzMzMiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l","mode":"simple"},"encryptionHashFunction":"SHA-256"},"86688b76a4344f1eb3d6685ad23b01bb":{"id":"86688b76a4344f1eb3d6685ad23b01bb","name":"question_ip_address","label":"Question IP Address","varType":"string","category":"vaInputs","secure":false,"encryptionSalt":{"value":"MTYxMTIxNzA0NzMzMiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l","mode":"simple"},"encryptionHashFunction":"SHA-256"},"f5b58d7b86c84bc5bb35fa4954bf9c01":{"id":"f5b58d7b86c84bc5bb35fa4954bf9c01","name":"question_url","label":"Question URL","varType":"string","category":"vaInputs","secure":false,"encryptionSalt":{"value":"MTYxMTIxNzA0NzMzMiBWQSBEZXNpZ25lciBpcyBhd2Vzb21l","mode":"simple"},"encryptionHashFunction":"SHA-256"},"68661a04fdc944b994ea245daa18c3d8":{"id":"68661a04fdc944b994ea245daa18c3d8","name":"add_attachment","label":"Add Attachment","varType":"boolean","category":"vaInputs"},"fc2bca3e8fcf40e3aef08afc434f70dc":{"id":"fc2bca3e8fcf40e3aef08afc434f70dc","name":"upload_attachment","label":"Upload Attachment","varType":"file","category":"vaInputs"},"9453e36be0ba4ec18b56132f6f3077be":{"id":"9453e36be0ba4ec18b56132f6f3077be","value":{"mode":"script","value":"(function execute() {\n    return '';\n})()\n"},"name":"media_links_form_attachment","label":"media_links_form_attachment","varType":"script","category":"vaVars"},"e1ca9a14bb8e4626846f0f973e8136c4":{"id":"e1ca9a14bb8e4626846f0f973e8136c4","name":"add_more","label":"Add More","varType":"boolean","category":"vaInputs"},"f7a9d7c3ed364d8b90180200cde3fed7":{"id":"f7a9d7c3ed364d8b90180200cde3fed7","name":"question_attachment","label":"Question Attachment","varType":"file","category":"vaInputs"},"01c90199d03f47238fc9c6c60fc69239":{"id":"01c90199d03f47238fc9c6c60fc69239","name":"execute_contextual_search","label":"Execute_contextual_search","defaultValue":"false","varType":"string","category":"vaInputs","metadata":{"libraryMappingType":"input"}},"2b836bab1e05478c93e2061694de4032":{"id":"2b836bab1e05478c93e2061694de4032","name":"confirm_catalog_item","label":"Confirm_catalog_item","defaultValue":"true","varType":"string","category":"vaInputs","metadata":{"libraryMappingType":"input"}},"29830cf95e804d9c92e214b5fc10b6b1":{"id":"29830cf95e804d9c92e214b5fc10b6b1","value":{"mode":"script","value":"(function execute() {\n    return '';\n})()\n"},"name":"contextualSearchVariable","label":"contextualSearchVariable","varType":"script","category":"vaVars"},"1f30eacc703d45a0860092682269f865":{"id":"1f30eacc703d45a0860092682269f865","value":{"mode":"simple","value":"2821675a5b30130070e4492c11f91a89"},"name":"contextualSearchContext","label":"contextualSearchContext","varType":"script","category":"vaVars"},"5fe9de3242924795b912dc4f5e4bc5f2":{"id":"5fe9de3242924795b912dc4f5e4bc5f2","value":{"mode":"simple","value":"3"},"name":"contextualSearchResultLimit","label":"contextualSearchResultLimit","varType":"script","category":"vaVars"},"02568156a7014e3b83b6ac430d2683ec":{"id":"02568156a7014e3b83b6ac430d2683ec","value":{"mode":"simple","value":"0"},"name":"contextualSearchIndex","label":"contextualSearchIndex","varType":"script","category":"vaVars"},"5056876c64b44eb4a2c9ddb162a16ff5":{"id":"5056876c64b44eb4a2c9ddb162a16ff5","value":{"value":"","mode":"simple"},"name":"contextualSearchResultJsonString","label":"contextualSearchResultJsonString","varType":"script","category":"vaVars"},"5fb02314a9bf45a0a29504c102bb126d":{"id":"5fb02314a9bf45a0a29504c102bb126d","value":{"mode":"simple","value":"0"},"name":"contextualSearchResultCount","label":"contextualSearchResultCount","varType":"script","category":"vaVars"},"c0ac3986f5d34729bcdb0f53eb04f396":{"id":"c0ac3986f5d34729bcdb0f53eb04f396","name":"did_articles_help","label":"Did_articles_help","varType":"boolean","category":"vaInputs"},"04a2c8d83a504d38ae9051bbaa012460":{"id":"04a2c8d83a504d38ae9051bbaa012460","name":"proceed_with_default","label":"Proceed With Default","varType":"boolean","secure":false,"category":"vaInputs"},"c2b948794db64faa88d321db88eb5c7d":{"id":"c2b948794db64faa88d321db88eb5c7d","name":"show_end_state_card","label":"Show_end_state_card","defaultValue":"false","varType":"boolean","category":"vaInputs","metadata":{"libraryMappingType":"input"}},"e6f220ccf9fc4bd799e96134b5877586":{"id":"e6f220ccf9fc4bd799e96134b5877586","name":"question_choice_other_channels","label":"Question Choice Other Channels","varType":"reference","table":"","category":"vaInputs"},"f0bd963accb14b7881dc4e0ba869bc08":{"id":"f0bd963accb14b7881dc4e0ba869bc08","name":"search_reference","label":"Search Reference","varType":"string","secure":false,"category":"vaInputs","encryptionHashFunction":"SHA-256","encryptionSalt":{"value":"MTY1MDQ4NTE4OTAxMCBWQSBEZXNpZ25lciBpcyBhd2Vzb21l","mode":"simple"}},"2aaa54a24ee24759bbdb9c7cf69ff520":{"id":"2aaa54a24ee24759bbdb9c7cf69ff520","name":"question_reference_other_channels","label":"Question Reference Other Channels","varType":"reference","table":"","category":"vaInputs"},"58321a932a2b4c97857ded9727e47c21":{"id":"58321a932a2b4c97857ded9727e47c21","value":{"mode":"script","value":"(function execute() {\n    /* return 'a default value'; */\n    return \"false\";\n})()\n"},"name":"no_records_found","label":"no_records_found","varType":"script","category":"vaVars"}},"goals":{"primary":{"id":"primary","trigger":{"type":"primary"},"name":"primary","applicability":"","description":"","nodes":{"26892cf48e444f8c822ee31eecad2921":{"id":"26892cf48e444f8c822ee31eecad2921","stepType":"Start","name":"Start","greetingResponse":{"mode":"simple","value":""},"parameters":[{"name":"catalog_item_id","value":"","id":"0f634751fbfd4ec486748687414dd878","disabled":true,"referenced":true,"type":"String","hint":"","required":true},{"name":"execute_contextual_search","value":"false","id":"01c90199d03f47238fc9c6c60fc69239","referenced":true,"disabled":true,"type":"String","hint":"","required":false},{"name":"confirm_catalog_item","value":"true","id":"2b836bab1e05478c93e2061694de4032","referenced":false,"disabled":true,"type":"String","hint":"","required":false},{"type":"True/False","value":"false","id":"c2b948794db64faa88d321db88eb5c7d","name":"show_end_state_card","referenced":true,"disabled":true}],"variableIds":["0f634751fbfd4ec486748687414dd878","01c90199d03f47238fc9c6c60fc69239","2b836bab1e05478c93e2061694de4032","c2b948794db64faa88d321db88eb5c7d"]},"5584f283a4ad4cc4a1e9bb7b815995a7":{"id":"5584f283a4ad4cc4a1e9bb7b815995a7","stepType":"TerminateGoal","name":"End","confirmationMessage":{"value":"","mode":"simple"},"outputVariables":[{"key":"record_id","value":[{"type":"paragraph","children":[{"text":""},{"type":"datapill","dataPill":{"value":"{{vaVars.record_id}}","displayValue":"vaVars➛record_id"},"children":[{"text":""}]},{"text":""}]}],"mode":"simple","disabled":true},{"key":"record_table","value":[{"type":"paragraph","children":[{"text":""},{"type":"datapill","dataPill":{"value":"{{vaVars.record_table}}","displayValue":"vaVars➛record_table"},"children":[{"text":""}]},{"text":""}]}],"mode":"simple","disabled":true},{"key":"variables","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    if (!itemJson.variables)\n        return '';\n    var variablesObj = {};\n    for (i = 0; i &lt; itemJson.variables.length; i++) {\n        variablesObj[itemJson.variables[i].name] = itemJson.variables[i].value;\n    }\n    return JSON.stringify(variablesObj);\n})()\n","mode":"script","disabled":true}]},"e35912998f8b4253b9f42d262fdd04be":{"id":"e35912998f8b4253b9f42d262fdd04be","name":"Set Selected Item","script":"(function execute() {\n    var itemId = vaInputs.catalog_item_id.getValue();\n    var itemJSON = new sn_sc.CatalogConversationHelper().getItem(itemId);\n    vaVars.itemJSON = JSON.stringify(itemJSON);\n    vaVars.itemName = itemJSON.name;\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"21456a8b702c44c3a1648fe0f1472d86":{"id":"21456a8b702c44c3a1648fe0f1472d86","stepType":"TextOutput","name":"Item Description","value":[{"value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var response = gs.getMessage(\"Here are some more details about {0}\", vaVars.itemName);\n    if (itemJson.description) \n        return response + itemJson.description;\n\n    return gs.getMessage(\"Selected {0}\", vaVars.itemName);\n})()\n","mode":"script"}],"applicability":{"value":"","mode":"query"},"secure":false},"094f1837fec64b4595c053c7c3fd0f76":{"id":"094f1837fec64b4595c053c7c3fd0f76","stepType":"Prompt","name":"Proceed","prompt":{"value":[{"type":"paragraph","children":[{"text":""},{"text":"Should I proceed with this?"},{"text":""}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"1bb2fe5e354046aeb52a63074d07ba45","skippable":{"value":"","mode":"query"},"inputType":{"format":"Text","script":""}},"4881683f7eb745519a84e5fcc238d61b":{"id":"4881683f7eb745519a84e5fcc238d61b","stepType":"Decision","name":"Decision"},"2c46b9ae1fd04465abe8eca9eabb0021":{"id":"2c46b9ae1fd04465abe8eca9eabb0021","stepType":"Decision","name":"Decision"},"8f59053d36bd4cfa83acb5d215c397cb":{"id":"8f59053d36bd4cfa83acb5d215c397cb","stepType":"Decision","name":"Decision"},"6fbaa8ae59c64c2686b79efd2ef08431":{"id":"6fbaa8ae59c64c2686b79efd2ef08431","stepType":"TextOutput","name":"Start Questions","value":[{"value":[{"type":"paragraph","children":[{"text":"OK, let's finish up your request."}]}],"mode":"simple"}],"applicability":{"value":"","mode":"query"},"secure":false},"55b2dfb927154bfdaaf75c76e189a7c9":{"id":"55b2dfb927154bfdaaf75c76e189a7c9","stepType":"Decision","name":"Decision"},"546724c58ba543239e29056c7f4a87db":{"id":"546724c58ba543239e29056c7f4a87db","stepType":"Decision","name":"Decision"},"fe37ba80718e4718b72f4dd5b4397e3e":{"id":"fe37ba80718e4718b72f4dd5b4397e3e","stepType":"Prompt","name":"Submit Producer","prompt":{"value":[{"type":"paragraph","children":[{"text":"Alright, you're all set. Shall I submit this request?"}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"485035ff241d4d0391863449aa6a011f","skippable":{"value":"","mode":"query"},"inputType":{"format":"Text","script":""}},"812ab34cae2d4bf1881b0b32d49d95e6":{"id":"812ab34cae2d4bf1881b0b32d49d95e6","stepType":"Decision","name":"Decision"},"f2cefa49e5fd447eb46e0ef9cece3656":{"id":"f2cefa49e5fd447eb46e0ef9cece3656","name":"Insert the Record","script":"(function execute() {\n   var itemJson = JSON.parse(vaVars.itemJSON);\n    var variablesObj = {};\n    var attachmentIds = [];\n    for (i = 0; i &lt; itemJson.variables.length; i++) {\n        variablesObj[itemJson.variables[i].name] = itemJson.variables[i].value;\n        if (itemJson.variables[i].type === 33)\n           attachmentIds.push(itemJson.variables[i].value);\n    }\n   var reqObject = {\n       \"sysparm_id\" : itemJson.sys_id,\n       \"sysparm_action\" : 'execute_producer',\n        \"variables\" : variablesObj,\n        \"engagement_channel\" : 'va'\n   }\n   var response = new sn_sc.CatItem(itemJson.sys_id).submitProducer(reqObject);\n   if (response) {\n       vaVars.record_id = response.sys_id;\n       vaVars.record_table = response.table;\n       // add attachment to record\n       var mediaLinksFormAttachment = vaVars.media_links_form_attachment.split(',');\n       for (var i in mediaLinksFormAttachment)\n           vaSystem.attachToRecord(mediaLinksFormAttachment[i], response.table, response.sys_id);\n\n       // move attachment variable to record\n       var gr = new GlideRecord('sys_attachment');\n       gr.addQuery('sys_id', 'IN' , attachmentIds);\n       gr.query();\n       while (gr.next()) {\n           gr.setValue('table_name', 'ZZ_YY' + response.table);\n           gr.setValue('table_sys_id', response.sys_id);\n           gr.update();\n       }\n   }\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"feb78467f34a499cae13e8fbf4eec179":{"id":"feb78467f34a499cae13e8fbf4eec179","stepType":"Prompt","name":"Order Item","prompt":{"value":[{"type":"paragraph","children":[{"text":"Alright, you're all set. Shall I submit this request?"}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"c5644432f6864cb6922aaa75676f060f","skippable":{"value":"","mode":"query"},"inputType":{"format":"Text","script":""}},"4998c18e83ad497f8b2d91684b84e9ca":{"id":"4998c18e83ad497f8b2d91684b84e9ca","stepType":"Decision","name":"Decision"},"fa12d92bdbdc452dbb2f88722b2a0909":{"id":"fa12d92bdbdc452dbb2f88722b2a0909","name":"Checkout Cart","script":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var cartname = \"vacart_\" + gs.generateGUID();\n    var cartObj = new sn_sc.CartJS(cartname);\n    cartObj.setRequestedFor(vaVars.request_for);\n    cartObj.setEngagementChannel('va');\n\n    var variablesObj = {};\n    var attachmentIds = [];\n    for (i = 0; i &lt; itemJson.variables.length; i++) {\n        variablesObj[itemJson.variables[i].name] = itemJson.variables[i].value;\n        if (itemJson.variables[i].type === 33)\n           attachmentIds.push(itemJson.variables[i].value);\n    }\n        \n\n    var reqObj = {\n        \"sysparm_id\" : itemJson.sys_id,\n        \"variables\" : variablesObj\n    };\n    cartObj.addToCart(reqObj);\n    var requestResponse = cartObj.checkoutCart(true);\n    var requestGr = new GlideRecord('sc_request');\n    if (requestGr.get(requestResponse.request_id)) {\n        var reqItemGr = new GlideRecord('sc_req_item');\n        reqItemGr.addQuery(\"request\", requestResponse.request_id);\n        reqItemGr.query();\n        if (reqItemGr.next()) {\n            vaVars.record_id = reqItemGr.getUniqueValue();\n            vaVars.record_table = 'sc_req_item';\n            // add attachment to record\n            var mediaLinksFormAttachment = vaVars.media_links_form_attachment.split(',');\n            for (var i in mediaLinksFormAttachment)\n                vaSystem.attachToRecord(mediaLinksFormAttachment[i], vaVars.record_table, vaVars.record_id);\n\n        }\n        // move attachment variable to record\n        var gr = new GlideRecord('sys_attachment');\n        gr.addQuery('sys_id', 'IN' , attachmentIds);\n        gr.query();\n        while (gr.next()) {\n            gr.setValue('table_name', 'ZZ_YY' + vaVars.record_table);\n            gr.setValue('table_sys_id', vaVars.record_id);\n            gr.update();\n        }\n    }\n})()","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"878eb31d80a94776ba268e794816155f":{"id":"878eb31d80a94776ba268e794816155f","stepType":"Decision","name":"Decision"},"c04aa857052f4409acfb39a6abfe182e":{"id":"c04aa857052f4409acfb39a6abfe182e","stepType":"Prompt","name":"Question Date","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"9a88cdae0a7b4f9e836934a2e99487a9","skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"inputType":{"format":"Text","script":""}},"6b615d9df9bc47e2b7a5564d93ac5ef7":{"id":"6b615d9df9bc47e2b7a5564d93ac5ef7","name":"Post Response","script":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    vaVars.validation_message = \"\";\n    var quesJson = itemJson.variables[vaVars.qIndex];\n    var type = quesJson.type;\n    var vaFieldValidator = new global.VAFieldValidator();\n    // If user doesn't want to proceed with the selected value and skips the question, the variable would be set to \"\"\n    var proceedWithDefaultValue = vaInputs.proceed_with_default.getValue();\n    switch (type) {\n        case 2:\n        case 6:\n        case 16:\n            var ans = vaInputs.question_text.getValue() || (proceedWithDefaultValue ? quesJson.display_value : \"\");\n            if (ans.trim().length === 0 &amp;&amp; itemJson.variables[vaVars.qIndex].mandatory) {\n                vaVars.validation_message = gs.getMessage('You must answer this question');\n                break;\n            }\n            if (type === 2) {\n                itemJson.variables[vaVars.qIndex].value = ans;\n                vaInputs.question_text = \"\";\n                break;\n            }\n            var q = GlideappQuestion.getQuestion(itemJson.variables[vaVars.qIndex].sys_id);\n            var validresponse = q.validateRegex(ans);\n            if (validresponse) {\n                itemJson.variables[vaVars.qIndex].value = ans;\n                vaInputs.question_text = \"\";\n            } else if (!validresponse)\n                vaVars.validation_message = q.getValidationMessage();\n            break;\n        case 9:\n            itemJson.variables[vaVars.qIndex].value = vaInputs.question_date.getDisplayValue() || (proceedWithDefaultValue ? quesJson.display_value : \"\");\n            vaInputs.question_date = \"\";\n            break;\n        case 10:\n            itemJson.variables[vaVars.qIndex].value = vaInputs.question_date_time.getDisplayValue() || (proceedWithDefaultValue ? quesJson.display_value : \"\");\n            vaInputs.question_date_time = \"\";\n            break;\n        case 8:\n            var ans = (proceedWithDefaultValue ? quesJson.value : \"\");\n            if (vaInputs.question_reference)\n                ans = vaInputs.question_reference.getValue();\n\n            itemJson.variables[vaVars.qIndex].value = ans;\n            vaInputs.question_reference = \"\";\n            break;\n        case 1:\n        case 3:\n        case 4:\n        case 5:\n        case 18:\n        case 22:\n            var ans = (proceedWithDefaultValue ? quesJson.value : \"\");\n            if (vaInputs.question_choice) {\n                ans = vaInputs.question_choice.getValue();\n                ans = ans == 'no_data' ? '' : ans;\n            }\n            itemJson.variables[vaVars.qIndex].value = ans;\n            vaInputs.question_choice = \"\";\n            break;\n        case 26:\n            var ans = vaInputs.question_email.getValue() || (proceedWithDefaultValue ? quesJson.value : \"\");\n            if (vaInputs.question_email.getValue() || ans == \"\" || vaFieldValidator.validateEmailAddress(ans)) {\n                itemJson.variables[vaVars.qIndex].value = ans;\n                vaInputs.question_email = \"\";\n            } else\n                vaVars.validation_message = gs.getMessage(\"This isn't a valid email address\");\n            break;\n        case 27:\n            var ans = vaInputs.question_url.getValue() || (proceedWithDefaultValue ? quesJson.value : \"\");\n            if (vaInputs.question_url.getValue() || ans == \"\" || vaFieldValidator.validateURL(ans)) {\n                itemJson.variables[vaVars.qIndex].value = ans;\n                vaInputs.question_url = \"\";\n            } else\n                vaVars.validation_message = gs.getMessage(\"This isn't a valid URL\");\n            break;\n        case 28:\n            var ans = vaInputs.question_ip_address.getValue() || (proceedWithDefaultValue ? quesJson.value : \"\");\n            if (vaInputs.question_ip_address.getValue() || ans == \"\" || vaFieldValidator.validateIPAddress(ans)) {\n                itemJson.variables[vaVars.qIndex].value = ans;\n                vaInputs.question_ip_address = \"\";\n            } else\n                vaVars.validation_message = gs.getMessage(\"This isn't a valid IP Address\");\n            break;\n        case 31:\n            var ans = quesJson.default_value + '';\n            if (quesJson.default_value &amp;&amp; proceedWithDefaultValue)\n                vaVars.request_for = ans;\n            else if (vaVars.request_for)\n                ans = vaVars.request_for;\n            itemJson.variables[vaVars.qIndex].value = ans;\n    }\n    if (!vaVars.request_for)\n        vaVars.request_for = gs.getUserID() + '';\n    if (quesJson.data_lookup_ids &amp;&amp; quesJson.data_lookup_ids.length != 0) {\n        var helper = new sn_sc.CatalogConversationHelper();\n        vaVars.itemJSON = JSON.stringify(helper.runDataLookups(itemJson, quesJson.sys_id));\n    } else\n        vaVars.itemJSON = JSON.stringify(itemJson);\n\n// resetting the value of proceed with default incase validation fails\n   if (vaVars.validation_message.length !== 0)\n       vaInputs.proceed_with_default = false;\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"ef5e54d2a5bd48efb6a6a4bbfb46bb9d":{"id":"ef5e54d2a5bd48efb6a6a4bbfb46bb9d","stepType":"Decision","name":"Decision"},"c37acca2c10d45fa9ff35e522d74804a":{"id":"c37acca2c10d45fa9ff35e522d74804a","stepType":"ScriptOutput","name":"Validation Message","output_type":"single_part","script":"(function execute() {\n      var singleOutMsg = new sn_cs.SinglePartOutMsg();\n       singleOutMsg.setTextPart(gs.getMessage('{0}. Answer the question again', vaVars.validation_message));\n       return singleOutMsg;\n})()","applicability":{"value":"","mode":"query"}},"582c0c456dec4db8acfe9b77df825b0b":{"id":"582c0c456dec4db8acfe9b77df825b0b","stepType":"Prompt","name":"Question Text","prompt":{"value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"c17814d70da44b518aa2eafae7212481","skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"inputType":{"format":"Text","script":""}},"df94abcde47a4fec8772fb5ccc8a00e8":{"stepType":"ReferenceChoicePrompt","name":"Question Reference","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"variableId":"21f03cf82d1740158a9032de119df6b6","id":"df94abcde47a4fec8772fb5ccc8a00e8","mode":"external","script":"(function execute() {\n    var options = [];\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var variable = itemJson.variables[vaVars.qIndex];\n\n    var gr = new GlideRecordSecure(variable.reference);\n    gr.addQuery(variable.qualifier);\n    if (variable.ref_ac_order_by)\n        gr.orderBy(variable.ref_ac_order_by);\n    else\n        gr.orderBy(gr.getDisplayName());\n    \n    gr.query();\n\n    while (gr.next()) {\n        options.push({\n            \"value\" : gr.getUniqueValue(),\n            \"label\" : gr.getDisplayValue()\n        });\n    }\n    \n    return options;    \n})()","noRecordsResponseMsg":{"value":[{"type":"paragraph","children":[{"text":"No records found"}]}],"mode":"simple"},"condition":{"value":"(function execute() {\n    var options = [];\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var variable = itemJson.variables[vaVars.qIndex];\n\n    var gr = new GlideRecordSecure(variable.reference);\n    gr.addQuery(variable.qualifier);\n    if (variable.ref_ac_order_by)\n        gr.orderBy(variable.ref_ac_order_by);\n    else\n        gr.orderBy(gr.getDisplayName());\n    \n    gr.query();\n\n    while (gr.next()) {\n        options.push({\n            \"value\" : gr.getUniqueValue(),\n            \"label\" : gr.getDisplayValue()\n        });\n    }\n    \n    return options;    \n})()","mode":"external_script"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"cardMetadata":{"mode":"card","metadataScript":"","cardTemplate":"","cardFields":{},"cardDefinition":{}},"hasCardHeader":false},"a1a56227bc264cfa8c9877671df19045":{"id":"a1a56227bc264cfa8c9877671df19045","name":"Set Record ID to -1","script":"(function execute() {\n    vaVars.record_id = \"-1\";\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"a6de984d0ecf425c86836a588cf01406":{"stepType":"ReferenceChoicePrompt","name":"Question Choice","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"variableId":"86f94bd854c04fa38d3bb14a76dc208a","id":"a6de984d0ecf425c86836a588cf01406","mode":"external","script":"(function execute() {\n    var options = [];\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    var choices = quesJson.options;\n    if (choices.length &gt; 0 &amp;&amp; quesJson.mandatory) {\n        if (!choices[0].value)\n            choices.shift();\n    }\n    \n    options = choices;\n    return options;    \n})()","noRecordsResponseMsg":{"value":[{"type":"paragraph","children":[{"text":""},{"text":"No records found"},{"text":""}]}],"mode":"simple"},"condition":{"value":"(function execute() {\n    var options = [];\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    var choices = quesJson.options;\n    if (choices.length &gt; 0 &amp;&amp; quesJson.mandatory) {\n        if (!choices[0].value)\n            choices.shift();\n    }\n    \n    options = choices;\n    return options;    \n})()","mode":"external_script"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","skippable":{"mode":"script","value":"(function execute() {\n    var question = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    if (question.mandatory)\n        return false;\n    if (question.type === 3 &amp;&amp; question.value === '' &amp;&amp; question.options[0].value !== '') \n        return true;\n    if (question.type === 4 &amp;&amp; question.value === '')\n        return true;\n    return false;\n})();\n"},"cardMetadata":{"mode":"card","metadataScript":"","cardTemplate":"","cardFields":{},"cardDefinition":{}},"hasCardHeader":false},"9d86c117359541ba84c2033355feacaf":{"id":"9d86c117359541ba84c2033355feacaf","stepType":"Prompt","name":"Question Date Time","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"1ae6e1803c2c47099c1d5437b3e59367","skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"inputType":{"format":"Text","script":""}},"d1471488a6654a54b56e8bbb4a0a07ac":{"id":"d1471488a6654a54b56e8bbb4a0a07ac","stepType":"TextOutput","name":"Question Label","value":[{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"}],"applicability":{"value":"","mode":"query"},"secure":false},"34ec9fb8820e4c188735bf915c02eed6":{"id":"34ec9fb8820e4c188735bf915c02eed6","stepType":"TextOutput","name":"Container Start Question","value":[{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"}],"applicability":{"mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    if (quesJson.display_title)\n        return true;\n})()\n"},"secure":false},"9028af47203b473b8a43f7b1ac1cd9da":{"stepType":"ReferenceChoicePrompt","name":"Question Requested For","prompt":{"value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"variableId":"262e0c01a06e44b39ccd275726f77451","id":"9028af47203b473b8a43f7b1ac1cd9da","mode":"external","script":"(function execute() {\n    var options = [];\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var count = 0;\n    var gr = new GlideRecordSecure('sys_user');\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    gr.addEncodedQuery('nameLIKE'+ vaInputs.search_requested_for);\n    gr.addQuery(quesJson.qualifier);\n    gr.orderBy(gr.getDisplayName());\n    gr.chooseWindow(index, index + limit, true);\n    gr.query();\n\n    var count = gr.getRowCount();\n    vaVars.count = count;\n\n    while (gr.next()) {\n        options.push({\n            \"value\" : gr.getUniqueValue(),\n            \"label\" : gr.getDisplayValue()\n        });\n    }\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n    \n    if (count &gt; 0) {\n        options.push({\n            'value' : 'search',\n            'label' : gs.getMessage('Someone else')\n        });\n    }\n    return options;    \n})()\n","noRecordsResponseMsg":{"value":[{"type":"paragraph","children":[{"text":""},{"text":"I couldn't find a user with that name"},{"text":""}]}],"mode":"simple"},"condition":{"value":"(function execute() {\n    var options = [];\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var count = 0;\n    var gr = new GlideRecordSecure('sys_user');\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    gr.addEncodedQuery('nameLIKE'+ vaInputs.search_requested_for);\n    gr.addQuery(quesJson.qualifier);\n    gr.orderBy(gr.getDisplayName());\n    gr.chooseWindow(index, index + limit, true);\n    gr.query();\n\n    var count = gr.getRowCount();\n    vaVars.count = count;\n\n    while (gr.next()) {\n        options.push({\n            \"value\" : gr.getUniqueValue(),\n            \"label\" : gr.getDisplayValue()\n        });\n    }\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n    \n    if (count &gt; 0) {\n        options.push({\n            'value' : 'search',\n            'label' : gs.getMessage('Someone else')\n        });\n    }\n    return options;    \n})()\n","mode":"external_script"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","skippable":{"value":"","mode":"query"},"cardMetadata":{"mode":"card","metadataScript":"","cardTemplate":"","cardFields":{},"cardDefinition":{}},"hasCardHeader":false},"34483acbf9804b628af25384af20eb10":{"id":"34483acbf9804b628af25384af20eb10","stepType":"Prompt","name":"Search Requested For","prompt":{"value":[{"type":"paragraph","children":[{"text":""},{"text":"Who should I set it to? "},{"text":""}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"79754fac91114fd78daa60e56ac0e1b0","skippable":{"mode":"query","value":""},"inputType":{"format":"Text","script":""}},"16a206dae03d45e0ba8d5cbd2ab0ab0f":{"id":"16a206dae03d45e0ba8d5cbd2ab0ab0f","stepType":"Decision","name":"Decision"},"4e5f4e6759334ad99376ea10722a1694":{"id":"4e5f4e6759334ad99376ea10722a1694","name":"Requested For Next Page","script":"(function execute() {\n    var count = parseInt(vaVars.count);\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    if ( index + limit &gt; count )\n        vaVars.index = 0;\n    else\n        vaVars.index = index + limit;\n})();","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"024e771577804dd3bbf983f62575ad53":{"id":"024e771577804dd3bbf983f62575ad53","name":"Is Delegation Allowed","script":"(function execute() {\n    var item = new sn_sc.CatItem(JSON.parse(vaVars.itemJSON).sys_id);\n    vaVars.request_for = vaInputs.question_requested_for.getValue() + '';\n    vaVars.canView = item.isDelegationAllowed(vaVars.request_for);\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"43a3968c500c43c7bc49f0c94a5ad472":{"id":"43a3968c500c43c7bc49f0c94a5ad472","stepType":"Decision","name":"Decision"},"8dec6bf76b8248fab2cffac2d9babf11":{"id":"8dec6bf76b8248fab2cffac2d9babf11","name":"Requested For Previous Page","script":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var c = index - limit;\n    if ( c &lt; 0 ) c = 0;\n    vaVars.index = c;\n})();","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"4b207a5862424187bebc8b30ed2764ab":{"id":"4b207a5862424187bebc8b30ed2764ab","stepType":"Prompt","name":"Request For Another User","prompt":{"value":[{"type":"paragraph","children":[{"text":""},{"text":"The selected user does not have access to this item. Do you want to request for  someone else?"},{"text":""}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"6c27c491380b4980a12c8c666290504b","skippable":{"value":"","mode":"query"},"inputType":{"format":"Text","script":""}},"d067aebf76b64e93a19c46573abb8942":{"id":"d067aebf76b64e93a19c46573abb8942","stepType":"Decision","name":"Decision"},"0cdc52cf18464db59f064d508319e655":{"id":"0cdc52cf18464db59f064d508319e655","stepType":"Decision","name":"Decision"},"3623dcb2a65a461a99cdb1748b43f315":{"id":"3623dcb2a65a461a99cdb1748b43f315","name":"Run OnChange Policies","script":"(function execute() {\n   vaVars.itemJSON = JSON.stringify(new sn_sc.CatalogConversationHelper().runChangePolicies(JSON.parse(vaVars.itemJSON)))\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"96762c6274304a06915c1a966833a822":{"id":"96762c6274304a06915c1a966833a822","stepType":"Prompt","name":"Question Email","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"67e05e83ebd54da48c2b0774fcde7c0c","inputType":{"format":"33513d135b1200101f254d3ba881c7d5","script":""}},"abd3468ad6b34517a91f5df07375601c":{"id":"abd3468ad6b34517a91f5df07375601c","stepType":"Prompt","name":"Question IP Address","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"86688b76a4344f1eb3d6685ad23b01bb","inputType":{"format":"a860c5945b2200101f254d3ba881c7df","script":""}},"5aade5fd320140ab9aa390d6fa59fa44":{"id":"5aade5fd320140ab9aa390d6fa59fa44","stepType":"Prompt","name":"Question URL","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"f5b58d7b86c84bc5bb35fa4954bf9c01","inputType":{"format":"77d8b2935b9200101f254d3ba881c7b9","script":""}},"e5a22bf7a1d74fd1ad5106539997a517":{"id":"e5a22bf7a1d74fd1ad5106539997a517","stepType":"Decision","name":"Decision"},"518c5c13c839420cab3a8fb8a2345702":{"id":"518c5c13c839420cab3a8fb8a2345702","stepType":"Prompt","name":"Add Attachment","prompt":{"value":"(function execute() {\n    return gs.getMessage('Add attachment?');\n})()\n","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"script","value":"(function execute() {\n    var item = JSON.parse(vaVars.itemJSON);\n    return !item.mandatory_attachment;\n})()\n"},"skippable":{"value":"","mode":"query"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"68661a04fdc944b994ea245daa18c3d8"},"82d47486983f45db84d12e7387b8b128":{"id":"82d47486983f45db84d12e7387b8b128","stepType":"Decision","name":"Decision"},"00a0e79950f7490f96af50e204076ded":{"id":"00a0e79950f7490f96af50e204076ded","stepType":"Prompt","name":"Upload Attachment","prompt":{"value":"(function execute() {\n    return gs.getMessage('Upload attachment');\n})()\n","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"mode":"script","value":"(function execute() {\n    var addMore = false;\n    //when attachment is mandatory, to provide an option to skip add more \n    if (vaInputs.add_more &amp;&amp; vaInputs.add_more.getValue())\n        addMore = true;\n        \n    return !JSON.parse(vaVars.itemJSON).mandatory_attachment || addMore;\n})()"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"fc2bca3e8fcf40e3aef08afc434f70dc"},"da27ef14b40b4bcdbc2cb9626f7093f8":{"id":"da27ef14b40b4bcdbc2cb9626f7093f8","name":"Add Media Links for Form Attachment","script":"(function execute() {\n    if (!!vaVars.media_links_form_attachment)\n        vaVars.media_links_form_attachment = vaVars.media_links_form_attachment + ',' + vaInputs.upload_attachment.getValue();\n    else\n        vaVars.media_links_form_attachment = vaInputs.upload_attachment.getValue();\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"0570ccc3d07f4d17936d7873671c0a00":{"id":"0570ccc3d07f4d17936d7873671c0a00","stepType":"Prompt","name":"Add More","prompt":{"value":"(function execute() {\n    return gs.getMessage('Add more?');\n})()\n","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"value":"","mode":"query"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"e1ca9a14bb8e4626846f0f973e8136c4"},"4df2f3e9950f486c867d8fd23b58bab9":{"id":"4df2f3e9950f486c867d8fd23b58bab9","stepType":"Decision","name":"Decision"},"6b3f3667f79f4a498102b748d560627a":{"id":"6b3f3667f79f4a498102b748d560627a","stepType":"Prompt","name":"Question Attachment","prompt":{"value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()\n","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"f7a9d7c3ed364d8b90180200cde3fed7"},"2d422c2bc11548e9a6082e527dd1b070":{"id":"2d422c2bc11548e9a6082e527dd1b070","name":"Validate Attachment","script":"(function execute() {\n    vaVars.validation_message = \"\";\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var quesJson = itemJson.variables[vaVars.qIndex];\n    var vaUtils = new global.VAUtils();\n    var arr = vaInputs.question_attachment.getValue().split('/');\n    var mediaId = arr[arr.length - 1];\n    var gr = new GlideRecord('sys_cs_media');\n    gr.addQuery('media_id', mediaId);\n    gr.query();\n    if (gr.next()) {\n        var attachmentId = gr.getValue('sys_attachment_id');\n        var attachRef = new GlideRecord('sys_attachment');\n        if (attachRef.get(attachmentId)) {\n            var file = {\n                name: attachRef.getValue('file_name'),\n                size: attachRef.getValue('size_bytes')\n            };\n            var allowedExtensions = new Array();\n            if (quesJson.allow_extension)\n               allowedExtensions = quesJson.allow_extension.split(';');\n            var field = {\n                allowedExtensions: allowedExtensions,\n                allowedFileSize: quesJson.max_file_size\n            };\n            var result = vaUtils.validateAttachment(file, field);\n            if (result.type == 'success') {\n                quesJson.value = attachmentId;\n                vaVars.itemJSON = JSON.stringify(itemJson);\n                vaInputs.question_attachment.setValue('');\n            } else\n                vaVars.validation_message = result.message;\n        } else \n            vaVars.validation_message = gs.getMessage('Failed to upload the attachment');\n    } else \n        vaVars.validation_message = gs.getMessage('Failed to upload the attachment');\n})()\n","stepType":"ScriptAction","applicability":{"value":"question_attachmentISNOTEMPTY","mode":"query"}},"75fd1f87f14d49069c43b6b1ebc14f27":{"id":"75fd1f87f14d49069c43b6b1ebc14f27","stepType":"Decision","name":"Decision"},"b6c518610514481e9715465714946cc7":{"id":"b6c518610514481e9715465714946cc7","stepType":"ScriptOutput","name":"Validation Message","output_type":"single_part","script":"(function execute() {\n     var singleOutMsg = new sn_cs.SinglePartOutMsg();\n       singleOutMsg.setTextPart(gs.getMessage('{0}. Answer the question again', vaVars.validation_message));\n       vaVars.validation_message = \"\";\n       return singleOutMsg;\n})()\n","applicability":{"value":"","mode":"query"}},"ac3d2152cc8b42359d3978bf7e15b957":{"id":"ac3d2152cc8b42359d3978bf7e15b957","stepType":"Decision","name":"Is Record Producer"},"0184d7c3916a465cbf5db40b0876ec5c":{"id":"0184d7c3916a465cbf5db40b0876ec5c","stepType":"Decision","name":"Execute Contextual Search"},"75150420125b4b35b7c0a92bb6df595b":{"id":"75150420125b4b35b7c0a92bb6df595b","name":"Get Search Variable And Context","script":"(function execute() {\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\n    if(gs.nil(vaVars.contextualSearchVariable)) {\n        var searchConfig = contextualSearch.getContextualSearchVariableAndContext(vaInputs.catalog_item_id);\n        vaVars.contextualSearchVariable = searchConfig.searchVariable;\n        vaVars.contextualSearchContext = searchConfig.context;\n    }\n    return;\n})()\n","stepType":"ScriptAction","applicability":{"mode":"query","value":""}},"bc4dd2417f2b4d45ad4bd93d0ccc1f29":{"id":"bc4dd2417f2b4d45ad4bd93d0ccc1f29","stepType":"Decision","name":"Contextual Search Variable ?"},"c5ed4dfe882448ecabd92590fb78d266":{"id":"c5ed4dfe882448ecabd92590fb78d266","name":"Contextual Search","script":"(function execute() {\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\n    var response = contextualSearch.search(\n        vaVars.contextualSearchContext, vaInputs.question_text.getValue(), ''\n    );\n    var success = contextualSearch.processSearchResponse(response);\n    if (!success) {\n        return;\n    }  \n    var relevantSearchResults = contextualSearch.processGeneralResults(response, 20, -2);\n    vaVars.contextualSearchResultCount = relevantSearchResults.length;\n    vaVars.contextualSearchResultJsonString = JSON.stringify(relevantSearchResults);\n    vaVars.contextualSearchIndex = 0;\n    return;\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"b914fa16be5e47efa19b0084546b5354":{"id":"b914fa16be5e47efa19b0084546b5354","stepType":"Decision","name":"Did the search return results ?"},"3592d843108f434fa58b5df96a823484":{"id":"3592d843108f434fa58b5df96a823484","stepType":"LinkOutput","name":"Display multi-link","url":{"mode":"simple","value":""},"label":{"mode":"simple","value":""},"header":{"mode":"simple","value":""},"applicability":{"value":"","mode":"query"},"linkType":"multiple","introMsg":{"value":[{"type":"paragraph","children":[{"text":""},{"text":"I found some information that might help you:"},{"text":""}]}],"mode":"simple"},"listOfLinks":"(function execute(header) {\n\tvar contextualSearch = new global.VAGlobalContextualSearchUtil();\n\tvar variables = {\n\t\tlimit: vaVars.contextualSearchResultLimit,\n\t\tindex: vaVars.contextualSearchIndex,\n\t\tsearch_result_json_string: vaVars.contextualSearchResultJsonString,\n\t\tportal: ''\n\t}\n\tvar groupedLinksOutMsg = contextualSearch.getLinks(header, variables);\n\treturn groupedLinksOutMsg;\n})(header)\n"},"da00dbcf32824fc0834090fa4e2b1fe4":{"id":"da00dbcf32824fc0834090fa4e2b1fe4","stepType":"Decision","name":"Did Articles Help ?"},"2a1adc0010144721b5f6ff25df7767ec":{"id":"2a1adc0010144721b5f6ff25df7767ec","stepType":"Prompt","name":"Did Articles Help","prompt":{"value":[{"type":"paragraph","children":[{"text":""},{"text":"Did any of this information resolve your issue?"},{"text":""}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"value":"","mode":"query"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"variableId":"c0ac3986f5d34729bcdb0f53eb04f396"},"7b179db7dcce414bb36ed41e173adbc2":{"id":"7b179db7dcce414bb36ed41e173adbc2","stepType":"Decision","name":"Confirmation Required ?"},"3fa5f8bbdc244349936619a8d5859b97":{"id":"3fa5f8bbdc244349936619a8d5859b97","stepType":"Decision","name":"Decision"},"1b9840104d154172b3ba43acc4bdc9e5":{"id":"1b9840104d154172b3ba43acc4bdc9e5","stepType":"TextOutput","name":"Catalog Builder Preview","secure":false,"value":[{"value":[{"type":"paragraph","children":[{"text":"Preview successful"}]}],"mode":"simple"}],"applicability":{"value":"","mode":"query"}},"87417ea68c84464c8535a4b1bec092c5":{"id":"87417ea68c84464c8535a4b1bec092c5","stepType":"Decision","name":"Decision"},"5ffe3110a64841b29fff1b548dc85d29":{"id":"5ffe3110a64841b29fff1b548dc85d29","stepType":"TextOutput","name":"Catalog Builder Preview Message","secure":false,"value":[{"value":[{"type":"paragraph","children":[{"text":"Since this was a preview, the request was not submitted"}]}],"mode":"simple"}],"applicability":{"value":"","mode":"query"}},"99e6da25412d4901bb94a9c117ef0a90":{"id":"99e6da25412d4901bb94a9c117ef0a90","stepType":"Decision","name":"Decision"},"f4d72b92f6c247ebb4bcd115bc871caf":{"id":"f4d72b92f6c247ebb4bcd115bc871caf","stepType":"ScriptOutput","name":"Question Rich Text Label","output_type":"single_part","script":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","applicability":{"value":"","mode":"query"}},"ffea21ee6e894c5385ad01bd2b8f2ebe":{"id":"ffea21ee6e894c5385ad01bd2b8f2ebe","stepType":"TextOutput","name":"Default Value Acknowledgement ","secure":false,"value":[{"value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    var renderedValue = quesJson.display_value ? quesJson.display_value : quesJson.value;\n    return gs.getMessage(\"&lt;b&gt;{0}&lt;/b&gt; was selected as the value for &lt;b&gt;{1}&lt;/b&gt;\", [renderedValue, quesJson.label])\n})()\n","mode":"script"}],"applicability":{"mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.default_value ? true : false;\n})()\n"}},"e870da0711d44663bd032d95360b04a5":{"id":"e870da0711d44663bd032d95360b04a5","stepType":"Prompt","name":"Proceed with Default","prompt":{"value":[{"type":"paragraph","children":[{"text":"Do you want to proceed with this value?"}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.default_value ? true : false;\n})()\n"},"skippable":{"value":"","mode":"query"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"variableId":"04a2c8d83a504d38ae9051bbaa012460"},"1603b656f6484951be725e810923e7a4":{"id":"1603b656f6484951be725e810923e7a4","stepType":"Decision","name":"Decision"},"61f3117ef2714e249579496b7ee83026":{"id":"61f3117ef2714e249579496b7ee83026","stepType":"Decision","name":"Show end state card?"},"154cbe739e4b44eb9b9b483381c88293":{"id":"154cbe739e4b44eb9b9b483381c88293","stepType":"Decision","name":"Decision"},"8372de21011a4fc58f7b052c80846961":{"id":"8372de21011a4fc58f7b052c80846961","stepType":"Decision","name":"Messaging Channel"},"5b7e42b59c0c41dd800cd09009c2711d":{"stepType":"ReferenceChoicePrompt","name":"Question Choice Other Channels","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"mode":"script","value":"(function execute() {\n    var question = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    if (question.mandatory)\n        return false;\n    if (question.type === 4 &amp;&amp; question.value === '')\n        return true;\n    if (question.type === 3 &amp;&amp; question.value === '' &amp;&amp; question.options[0].value !== '')\n        return true;\n    return false;\n})();\n"},"defaultValue":{"value":"","mode":"simple"},"variableId":"e6f220ccf9fc4bd799e96134b5877586","id":"5b7e42b59c0c41dd800cd09009c2711d","mode":"external","script":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var options = [];\n    var count = 0;\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n\n    var choices = quesJson.options;\n    if (choices.length &gt; 0 &amp;&amp; quesJson.mandatory) {\n        if (!choices[0].value)\n            choices.shift();\n    }\n    \n    count = choices.length;\n    vaVars.count = count;\n    options = choices.splice(index, limit);\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n    \n    return options;    \n})()","metadataScript":"","cardData":{},"noRecordsResponseMsg":{"value":[{"type":"paragraph","children":[{"text":"No records found"}]}],"mode":"simple"},"condition":{"value":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var options = [];\n    var count = 0;\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n\n    var choices = quesJson.options;\n    if (choices.length &gt; 0 &amp;&amp; quesJson.mandatory) {\n        if (!choices[0].value)\n            choices.shift();\n    }\n    \n    count = choices.length;\n    vaVars.count = count;\n    options = choices.splice(index, limit);\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n    \n    return options;    \n})()","mode":"external_script"},"hasCardHeader":false,"cardMetadata":{"mode":"card","metadataScript":"","cardTemplate":"","cardFields":{},"cardDefinition":{}},"withNluUserInput":false,"skipIfFulfilled":false},"6422f13382434440a9ac497f29753423":{"id":"6422f13382434440a9ac497f29753423","stepType":"Decision","name":"Decision"},"44cffaffc14c498289ba2e234f962440":{"id":"44cffaffc14c498289ba2e234f962440","name":"Question Choice Prev Page","script":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var c = index - limit;\n    if ( c &lt; 0 ) c = 0;\n    vaVars.index = c;\n})();","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"48667218290f4e919de3cb7fa3d59088":{"id":"48667218290f4e919de3cb7fa3d59088","name":"Question Choice Next Page","script":"(function execute() {\n    var count = parseInt(vaVars.count);\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    if ( index + limit &gt; count )\n        vaVars.index = 0;\n    else\n        vaVars.index = index + limit;\n})();","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"2cde30fb4daf4251905d1b51610d3c70":{"id":"2cde30fb4daf4251905d1b51610d3c70","name":"Set Question Choice Value","script":"(function execute() {\n    if(vaInputs.question_choice_other_channels) {\n        vaInputs.question_choice = vaInputs.question_choice_other_channels;\n        vaInputs.question_choice_other_channels = \"\";\n    }\n})()","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"98a9957e0e124b8f997a4ac08a4b387a":{"id":"98a9957e0e124b8f997a4ac08a4b387a","stepType":"Decision","name":"Messaging Channel"},"7628e3dd4aa14fc490d21c688cd82546":{"id":"7628e3dd4aa14fc490d21c688cd82546","stepType":"Prompt","name":"Search Reference","prompt":{"value":[{"type":"paragraph","children":[{"text":"Enter a value to search"}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"script","value":"(function execute() {\n    return vaInputs.question_reference_other_channels;\n})()\n"},"skippable":{"value":"","mode":"query"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"variableId":"f0bd963accb14b7881dc4e0ba869bc08","inputType":{"format":"Text","script":""}},"30f1d676900d4524905475a5b992367a":{"stepType":"ReferenceChoicePrompt","name":"Question Reference Other Channels","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()"},"defaultValue":{"value":"","mode":"simple"},"variableId":"2aaa54a24ee24759bbdb9c7cf69ff520","id":"30f1d676900d4524905475a5b992367a","mode":"external","script":"(function execute() {\n    var options = [];\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var count = 0;\n\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var variable = itemJson.variables[vaVars.qIndex];\n    var gr = new GlideRecordSecure(variable.reference);\n    var displayColumn = gr.getDisplayName();\n   \n    gr.addEncodedQuery(displayColumn + 'LIKE' + vaInputs.search_reference.getValue());\n    gr.addQuery(variable.qualifier);\n    if (variable.ref_ac_order_by)\n        gr.orderBy(variable.ref_ac_order_by);\n    else\n        gr.orderBy(displayColumn);\n    \n    gr.chooseWindow(index, index + limit, true);\n    gr.query();\n\n    var count = gr.getRowCount();\n    vaVars.count = count;\n\n    while (gr.next()) {\n        options.push({\n            \"value\" : gr.getUniqueValue(),\n            \"label\" : gr.getDisplayValue()\n        });\n    }\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n\n    if (count &gt; 0) {\n        vaVars.no_records_found = \"false\"\n        options.push({\n            'value' : 'search',\n            'label' : gs.getMessage('Search')\n        });\n    }\n    else\n        vaVars.no_records_found = \"true\";\n    \n    return options;    \n})()\n","metadataScript":"","cardData":{},"noRecordsResponseMsg":{"value":[{"type":"paragraph","children":[{"text":"No records found"}]}],"mode":"simple"},"condition":{"value":"(function execute() {\n    var options = [];\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var count = 0;\n\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var variable = itemJson.variables[vaVars.qIndex];\n    var gr = new GlideRecordSecure(variable.reference);\n    var displayColumn = gr.getDisplayName();\n   \n    gr.addEncodedQuery(displayColumn + 'LIKE' + vaInputs.search_reference.getValue());\n    gr.addQuery(variable.qualifier);\n    if (variable.ref_ac_order_by)\n        gr.orderBy(variable.ref_ac_order_by);\n    else\n        gr.orderBy(displayColumn);\n    \n    gr.chooseWindow(index, index + limit, true);\n    gr.query();\n\n    var count = gr.getRowCount();\n    vaVars.count = count;\n\n    while (gr.next()) {\n        options.push({\n            \"value\" : gr.getUniqueValue(),\n            \"label\" : gr.getDisplayValue()\n        });\n    }\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n\n    if (count &gt; 0) {\n        vaVars.no_records_found = \"false\"\n        options.push({\n            'value' : 'search',\n            'label' : gs.getMessage('Search')\n        });\n    }\n    else\n        vaVars.no_records_found = \"true\";\n    \n    return options;    \n})()\n","mode":"external_script"},"hasCardHeader":false,"cardMetadata":{"mode":"card","metadataScript":"","cardTemplate":"","cardFields":{},"cardDefinition":{}},"withNluUserInput":false,"skipIfFulfilled":false},"66567f05291b438bbc89884f02881a90":{"id":"66567f05291b438bbc89884f02881a90","stepType":"Decision","name":"Decision"},"0b59dd57f1fa4d61b74fb4859f05693b":{"id":"0b59dd57f1fa4d61b74fb4859f05693b","name":"Question Reference Prev Page","script":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var c = index - limit;\n    if ( c &lt; 0 ) c = 0;\n    vaVars.index = c;\n})();","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"8a6e1170ba97426f914f9221e2c30374":{"id":"8a6e1170ba97426f914f9221e2c30374","name":"Question Reference Next Page","script":"(function execute() {\n    var count = parseInt(vaVars.count);\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    if ( index + limit &gt; count )\n        vaVars.index = 0;\n    else\n        vaVars.index = index + limit;\n})();","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"99de51bffe6641a0999446f1642076f6":{"id":"99de51bffe6641a0999446f1642076f6","name":"Set Question Reference Value","script":"(function execute() {\n    if(vaInputs.question_reference_other_channels) {\n        vaInputs.question_reference = vaInputs.question_reference_other_channels;\n        vaInputs.question_reference_other_channels = \"\";\n    }\n})()","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"b8833f1ad8b04981bc101499c1e738b7":{"id":"b8833f1ad8b04981bc101499c1e738b7","stepType":"ReusableTopic","name":"End state card","fields":[],"applicability":{"value":"","mode":"query"},"reusableTopicChoice":"End state card for Catalog Request","reusableTopicId":"0b01391550d30110fa9b861f7d83d7f6","inputs":{"record_id":{"value":[{"type":"paragraph","children":[{"text":""},{"type":"datapill","dataPill":{"value":"{{vaVars.record_id}}","displayValue":"Script Variables➛record_id"},"children":[{"text":""}]},{"text":""}]}],"mode":"string","type":"String"},"record_table":{"value":[{"type":"paragraph","children":[{"text":""},{"type":"datapill","dataPill":{"value":"{{vaVars.record_table}}","displayValue":"Script Variables➛record_table"},"children":[{"text":""}]},{"text":""}]}],"mode":"string","type":"String"}},"variableIds":[],"outputs":[],"outdatedNote":false,"loading":false}},"edges":[{"id":"7490f3e0c74a4707aaff745d3bcef99a","edgeType":"Edge","source":"b8833f1ad8b04981bc101499c1e738b7","target":"5584f283a4ad4cc4a1e9bb7b815995a7","sourcePort":"","targetPort":""},{"id":"3432d925292a487f987327a1cc72eaeb","edgeType":"Branch","source":"878eb31d80a94776ba268e794816155f","target":"34483acbf9804b628af25384af20eb10","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    if (JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 31)\n        return true;\n})()\n"},"label":"Question Requested For"},{"id":"c6083e079c114a0496eed3fae18228be","edgeType":"Edge","source":"f2cefa49e5fd447eb46e0ef9cece3656","target":"61f3117ef2714e249579496b7ee83026","sourcePort":"","targetPort":""},{"id":"d6e9c0071ef94b43a35d37491a948da9","edgeType":"Edge","source":"6b3f3667f79f4a498102b748d560627a","target":"2d422c2bc11548e9a6082e527dd1b070","sourcePort":"","targetPort":""},{"id":"1aa0d59b554240a5992ac43880f46d48","edgeType":"Edge","source":"da27ef14b40b4bcdbc2cb9626f7093f8","target":"0570ccc3d07f4d17936d7873671c0a00","sourcePort":"","targetPort":""},{"id":"8a3121f7a9a74eb88ac5850d0a4f6074","edgeType":"Branch","source":"16a206dae03d45e0ba8d5cbd2ab0ab0f","target":"4e5f4e6759334ad99376ea10722a1694","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.question_requested_for.getValue() === 'next';\n})()\n"},"label":"Requested For Next"},{"id":"d34f82703d2e406ba27b81319e5114fb","edgeType":"Branch","source":"546724c58ba543239e29056c7f4a87db","target":"feb78467f34a499cae13e8fbf4eec179","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    if (itemJson.sys_class_name !== 'sc_cat_item_producer')\n        return true;\nreturn false;\n})()\n"},"label":"Catalog Item"},{"id":"5fa6f043519b461ea2b5d0584d7a476f","edgeType":"Edge","source":"26892cf48e444f8c822ee31eecad2921","target":"e35912998f8b4253b9f42d262fdd04be","sourcePort":"","targetPort":""},{"id":"0c9cdc6bf7b34578aa81c8f974edaf17","edgeType":"Edge","source":"21456a8b702c44c3a1648fe0f1472d86","target":"094f1837fec64b4595c053c7c3fd0f76","sourcePort":"","targetPort":""},{"id":"7f7b29f3c9de4319990120f8744d7742","edgeType":"Edge","source":"094f1837fec64b4595c053c7c3fd0f76","target":"4881683f7eb745519a84e5fcc238d61b","sourcePort":"","targetPort":""},{"id":"b2ddab9d8bfc42e798a384a3876057a8","edgeType":"Branch","source":"4881683f7eb745519a84e5fcc238d61b","target":"5584f283a4ad4cc4a1e9bb7b815995a7","sourcePort":"","targetPort":"","expression":{"value":"proceed=false","mode":"query"},"label":"No"},{"id":"14eabfe5ea474cb3863ef9694df7ce72","edgeType":"Branch","source":"4881683f7eb745519a84e5fcc238d61b","target":"2c46b9ae1fd04465abe8eca9eabb0021","sourcePort":"","targetPort":"","expression":{"value":"proceed=true","mode":"query"},"label":"Yes"},{"id":"f900a2953cf4491ab9c88777e1f00678","edgeType":"Branch","source":"2c46b9ae1fd04465abe8eca9eabb0021","target":"8f59053d36bd4cfa83acb5d215c397cb","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n   return JSON.parse(vaVars.itemJSON).va_support;\n})()"},"label":"Has VA Support"},{"id":"2d15bc5af0dd4012999ed995b601aedf","edgeType":"Branch","source":"8f59053d36bd4cfa83acb5d215c397cb","target":"55b2dfb927154bfdaaf75c76e189a7c9","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var qIndex = parseInt(vaVars.qIndex);\n    //qIndex is -1 initially, we reset this before search again step \n    do{\n        qIndex++;\n        var question = itemJson.variables[qIndex];\n    }\n    while(question &amp;&amp; (!question.visible || question.readonly || question.sys_readonly));\n\n    if (question) {\n       //There are variables that we can show\n        return false;\n    }\n    //No variables that we can show\n    return true;\n})()\n"},"label":"Item with no variables"},{"id":"dc4a003aacda40b7ab3178fced42ec89","edgeType":"Branch","source":"8f59053d36bd4cfa83acb5d215c397cb","target":"6fbaa8ae59c64c2686b79efd2ef08431","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var qIndex = parseInt(vaVars.qIndex);\n    //qIndex is -1 initially, we reset this before search again step \n\n    do{\n        qIndex++;\n        var question = itemJson.variables[qIndex];\n    }\n    while(question &amp;&amp; (!question.visible || question.readonly || question.sys_readonly));\n\n    if (question) {\n       //There are variables that we can show\n        return true;\n    }\n    //No variables  that we can show\n    return false;\n})()\n"},"label":"Item with variables"},{"id":"74425d8ef9704408a6134a6d41f2576f","edgeType":"Edge","source":"6fbaa8ae59c64c2686b79efd2ef08431","target":"55b2dfb927154bfdaaf75c76e189a7c9","sourcePort":"","targetPort":""},{"id":"7b481ad0eee94053a07fdbe420c2fe83","edgeType":"Branch","source":"546724c58ba543239e29056c7f4a87db","target":"fe37ba80718e4718b72f4dd5b4397e3e","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    if (itemJson.sys_class_name === 'sc_cat_item_producer')\n        return true;\nreturn false;\n})()\n"},"label":"Record Producer"},{"id":"86d5e0216fda4a90acb9d5cbc7a8c902","edgeType":"Edge","source":"fe37ba80718e4718b72f4dd5b4397e3e","target":"812ab34cae2d4bf1881b0b32d49d95e6","sourcePort":"","targetPort":""},{"id":"9e667fd9b03f40dc929b81a548408233","edgeType":"Branch","source":"812ab34cae2d4bf1881b0b32d49d95e6","target":"5584f283a4ad4cc4a1e9bb7b815995a7","sourcePort":"","targetPort":"","expression":{"value":"submit_producer=","mode":"query"},"label":"Don't Submit"},{"id":"83278756a0e14f53aa85870ac6fa6f22","edgeType":"Edge","source":"feb78467f34a499cae13e8fbf4eec179","target":"4998c18e83ad497f8b2d91684b84e9ca","sourcePort":"","targetPort":""},{"id":"783eb33e4d4e424a9499ed8bfdd3f6c0","edgeType":"Branch","source":"4998c18e83ad497f8b2d91684b84e9ca","target":"5584f283a4ad4cc4a1e9bb7b815995a7","sourcePort":"","targetPort":"","expression":{"value":"order_item=","mode":"query"},"label":"Don't Order"},{"id":"b57ef56720e3414fa7ddf8b0dc3b23fd","edgeType":"Branch","source":"878eb31d80a94776ba268e794816155f","target":"c04aa857052f4409acfb39a6abfe182e","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 9;\n})()\n"},"label":"Date Question"},{"id":"c1e71d47927142c6bee72e082f598435","edgeType":"Edge","source":"c04aa857052f4409acfb39a6abfe182e","target":"6b615d9df9bc47e2b7a5564d93ac5ef7","sourcePort":"","targetPort":""},{"id":"b0bc3263527b4a54984635e74c6cb7fa","edgeType":"Edge","source":"6b615d9df9bc47e2b7a5564d93ac5ef7","target":"ef5e54d2a5bd48efb6a6a4bbfb46bb9d","sourcePort":"","targetPort":""},{"id":"d7155aacda8b4da096a2e587b526ef2a","edgeType":"Branch","source":"ef5e54d2a5bd48efb6a6a4bbfb46bb9d","target":"c37acca2c10d45fa9ff35e522d74804a","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.validation_message.length !== 0;\n})()\n"},"label":"Repeat Question"},{"id":"a46a9a50aa724c6f8391c39103b21263","edgeType":"Branch","source":"878eb31d80a94776ba268e794816155f","target":"582c0c456dec4db8acfe9b77df825b0b","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\n    return type === 2 || type === 6 || type === 16;\n})()"},"label":"Text Type Question"},{"id":"cfeb82f9b0d54efc8b51555b656783ab","edgeType":"Branch","source":"2c46b9ae1fd04465abe8eca9eabb0021","target":"a1a56227bc264cfa8c9877671df19045","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return !JSON.parse(vaVars.itemJSON).va_support;\n})()"},"label":"No VA Support"},{"id":"11bdc5c3083f4cbdb403e3cdc635d001","edgeType":"Edge","source":"a1a56227bc264cfa8c9877671df19045","target":"5584f283a4ad4cc4a1e9bb7b815995a7","sourcePort":"","targetPort":""},{"id":"05593f77220a429297b2f0239453cd93","edgeType":"Branch","source":"878eb31d80a94776ba268e794816155f","target":"9d86c117359541ba84c2033355feacaf","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 10;\n})()\n"},"label":"Date-Time Question"},{"id":"047fa4d8677c4fc88ecb66e4f2309b07","edgeType":"Edge","source":"9d86c117359541ba84c2033355feacaf","target":"6b615d9df9bc47e2b7a5564d93ac5ef7","sourcePort":"","targetPort":""},{"id":"1465527f1ca4421d9dc504e152e4548e","edgeType":"Branch","source":"878eb31d80a94776ba268e794816155f","target":"d1471488a6654a54b56e8bbb4a0a07ac","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 11;\n})()"},"label":"Question Label"},{"id":"c79c0928da784cdab9928870706c0b75","edgeType":"Edge","source":"d1471488a6654a54b56e8bbb4a0a07ac","target":"6b615d9df9bc47e2b7a5564d93ac5ef7","sourcePort":"","targetPort":""},{"id":"f75af24aa1064f0c9e28897d16368368","edgeType":"Branch","source":"878eb31d80a94776ba268e794816155f","target":"34ec9fb8820e4c188735bf915c02eed6","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\n    if (type === 0 || type === 12 || type === 19 || type === 20 || type === 24)\n        return true;\n})()\n"},"label":"Container Or Break Questions"},{"id":"d9af56dbfe2846d2bf8702ecede1a192","edgeType":"Edge","source":"34ec9fb8820e4c188735bf915c02eed6","target":"6b615d9df9bc47e2b7a5564d93ac5ef7","sourcePort":"","targetPort":""},{"id":"7b63b32c7d5445f68c31093f14a8851e","edgeType":"Edge","source":"34483acbf9804b628af25384af20eb10","target":"9028af47203b473b8a43f7b1ac1cd9da","sourcePort":"","targetPort":""},{"id":"afe57c72a83043019684d41a8c7362ad","edgeType":"Edge","source":"9028af47203b473b8a43f7b1ac1cd9da","target":"16a206dae03d45e0ba8d5cbd2ab0ab0f","sourcePort":"","targetPort":""},{"id":"aaa63f2777a24f968fd011ca52e16e46","edgeType":"Edge","source":"4e5f4e6759334ad99376ea10722a1694","target":"9028af47203b473b8a43f7b1ac1cd9da","sourcePort":"","targetPort":""},{"id":"867b5f2178f542cd98fe537dcea7ddba","edgeType":"Branch","source":"16a206dae03d45e0ba8d5cbd2ab0ab0f","target":"34483acbf9804b628af25384af20eb10","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return !vaInputs.question_requested_for.getValue() || vaInputs.question_requested_for.getValue() === 'search';\n})()\n"},"label":"Search Requested For"},{"id":"aea405e955db45948ecd8d723961b4c3","edgeType":"Branch","source":"16a206dae03d45e0ba8d5cbd2ab0ab0f","target":"024e771577804dd3bbf983f62575ad53","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var valuePicked = vaInputs.question_requested_for.getValue();\n    var condition = valuePicked !== 'next' &amp;&amp; valuePicked !== 'prev';\n    if (condition) {\n        vaVars.count = 0;\n        vaVars.index = 0;\n    }\n    return condition;\n})();"},"label":"Requested For Chosen"},{"id":"37ece3db708042959bf14b8a9af47796","edgeType":"Edge","source":"024e771577804dd3bbf983f62575ad53","target":"43a3968c500c43c7bc49f0c94a5ad472","sourcePort":"","targetPort":""},{"id":"7bf94ce778644b68a54b935f6015fad1","edgeType":"Branch","source":"43a3968c500c43c7bc49f0c94a5ad472","target":"6b615d9df9bc47e2b7a5564d93ac5ef7","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.canView;\n})()\n"},"label":"Can View"},{"id":"fce68a7081ef4ab79a5eb570baf0a094","edgeType":"Branch","source":"16a206dae03d45e0ba8d5cbd2ab0ab0f","target":"8dec6bf76b8248fab2cffac2d9babf11","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.question_requested_for.getValue() === 'prev';\n})()\n"},"label":"Requested For Prev"},{"id":"96440783904446efb777ea32772113b7","edgeType":"Edge","source":"8dec6bf76b8248fab2cffac2d9babf11","target":"9028af47203b473b8a43f7b1ac1cd9da","sourcePort":"","targetPort":""},{"id":"4289919e4d8c480a927bec092bf40033","edgeType":"Branch","source":"43a3968c500c43c7bc49f0c94a5ad472","target":"4b207a5862424187bebc8b30ed2764ab","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return !vaVars.canView\n})()\n"},"label":"Cannot View"},{"id":"313418c391d14c84876fc96441aeea69","edgeType":"Edge","source":"4b207a5862424187bebc8b30ed2764ab","target":"d067aebf76b64e93a19c46573abb8942","sourcePort":"","targetPort":""},{"id":"d80d73d7d6a743d1bca3ae55201fe627","edgeType":"Branch","source":"d067aebf76b64e93a19c46573abb8942","target":"34483acbf9804b628af25384af20eb10","sourcePort":"","targetPort":"","expression":{"value":"request_for_another_user=true","mode":"query"},"label":"Request for Another User"},{"id":"3cbc1d6ea379438fbe9d2c44f5b3c80a","edgeType":"Branch","source":"d067aebf76b64e93a19c46573abb8942","target":"5584f283a4ad4cc4a1e9bb7b815995a7","sourcePort":"","targetPort":"","expression":{"value":"request_for_another_user=","mode":"query"},"label":"End Conversation"},{"id":"150c975732984de2a766d829b10531c3","edgeType":"Branch","source":"ef5e54d2a5bd48efb6a6a4bbfb46bb9d","target":"0cdc52cf18464db59f064d508319e655","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.validation_message.length === 0;\n})()\n"},"label":"Next Question"},{"id":"bc9ca9770a5846e28e96cdaeb56a9ac0","edgeType":"Branch","source":"0cdc52cf18464db59f064d508319e655","target":"55b2dfb927154bfdaaf75c76e189a7c9","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).has_on_change_policies;\n})()\n"},"label":"No onChange Policies"},{"id":"f93e1bfe60934548b9fb2d86114fe07b","edgeType":"Branch","source":"0cdc52cf18464db59f064d508319e655","target":"3623dcb2a65a461a99cdb1748b43f315","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n   return JSON.parse(vaVars.itemJSON).has_on_change_policies;\n})()\n"},"label":"Has onChange Policies"},{"id":"300ee5547bd04432b0dbe0a27271ab24","edgeType":"Edge","source":"3623dcb2a65a461a99cdb1748b43f315","target":"55b2dfb927154bfdaaf75c76e189a7c9","sourcePort":"","targetPort":""},{"id":"13fe0f33ec47414fb24d1e3370cdce0f","edgeType":"Branch","source":"878eb31d80a94776ba268e794816155f","target":"6b615d9df9bc47e2b7a5564d93ac5ef7","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var unSupportedTypes = vaVars.unsupportedVarTypes.split(',');\n   return unSupportedTypes.indexOf(String(JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type)) !== -1;\n})()\n"},"label":"Unsupported  Variable  Types"},{"id":"70e3950f6f8d42b097192554edd877e0","edgeType":"Branch","source":"878eb31d80a94776ba268e794816155f","target":"96762c6274304a06915c1a966833a822","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 26;\n})()\n"},"label":"Email Question"},{"id":"166d85e56db14ad996569adb1245525e","edgeType":"Edge","source":"96762c6274304a06915c1a966833a822","target":"6b615d9df9bc47e2b7a5564d93ac5ef7","sourcePort":"","targetPort":""},{"id":"342bd2015b68441585b74ec92814a67b","edgeType":"Branch","source":"878eb31d80a94776ba268e794816155f","target":"abd3468ad6b34517a91f5df07375601c","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 28;\n})()\n"},"label":"Ip Address Question"},{"id":"fcadeb0e1a68485dbdca0b00f825a6c9","edgeType":"Edge","source":"abd3468ad6b34517a91f5df07375601c","target":"6b615d9df9bc47e2b7a5564d93ac5ef7","sourcePort":"","targetPort":""},{"id":"73ced012590b4585a77204b037ca438d","edgeType":"Branch","source":"878eb31d80a94776ba268e794816155f","target":"5aade5fd320140ab9aa390d6fa59fa44","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 27;\n})()\n"},"label":"URL Question"},{"id":"d1e1a84e0fbd4e0786bdc6d13d0f7507","edgeType":"Edge","source":"5aade5fd320140ab9aa390d6fa59fa44","target":"6b615d9df9bc47e2b7a5564d93ac5ef7","sourcePort":"","targetPort":""},{"id":"5138883b7f5b4a25a720b42b90851cbe","edgeType":"Branch","source":"55b2dfb927154bfdaaf75c76e189a7c9","target":"e5a22bf7a1d74fd1ad5106539997a517","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var qIndex = parseInt(vaVars.qIndex);\n    //qIndex is -1 initially, we reset this before search again step \n    do{\n        qIndex++;\n        var question = itemJson.variables[qIndex];\n    }\n    while(question &amp;&amp; (!question.visible || question.readonly || question.sys_readonly));\n\n    if (question) {\n       //There are variables that we can show\n        return false;\n    }\n    //No variables that we can show\n    return true;\n})()"},"label":"Questions Done"},{"id":"186b32cb9e984ad8a4051245c630debc","edgeType":"Branch","source":"e5a22bf7a1d74fd1ad5106539997a517","target":"546724c58ba543239e29056c7f4a87db","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var item = JSON.parse(vaVars.itemJSON);\n    return item.no_attachments === true;\n})()\n"},"label":"Has  No Attachment"},{"id":"3d666a7ffde340b1ac4328200d6086c7","edgeType":"Branch","source":"e5a22bf7a1d74fd1ad5106539997a517","target":"518c5c13c839420cab3a8fb8a2345702","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var item = JSON.parse(vaVars.itemJSON);\n    return item.no_attachments === false;\n})()\n"},"label":"Has Attachment"},{"id":"7a4c18fa5b8548e7918c61c39cda88dd","edgeType":"Edge","source":"518c5c13c839420cab3a8fb8a2345702","target":"82d47486983f45db84d12e7387b8b128","sourcePort":"","targetPort":""},{"id":"eab6a85c21a7478590d07fb49eae7920","edgeType":"Branch","source":"82d47486983f45db84d12e7387b8b128","target":"546724c58ba543239e29056c7f4a87db","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var item = JSON.parse(vaVars.itemJSON);\n    return !item.mandatory_attachment &amp;&amp; !vaInputs.add_attachment.getValue();\n})()\n"},"label":"No"},{"id":"9ef66fbfb9e94e2cbea5653e2f0376d2","edgeType":"Branch","source":"82d47486983f45db84d12e7387b8b128","target":"00a0e79950f7490f96af50e204076ded","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var item = JSON.parse(vaVars.itemJSON);\n    return item.mandatory_attachment || vaInputs.add_attachment.getValue();\n})()\n"},"label":"Yes"},{"id":"401061eccc2d4a9baaf0ed655a6aee35","edgeType":"Edge","source":"0570ccc3d07f4d17936d7873671c0a00","target":"4df2f3e9950f486c867d8fd23b58bab9","sourcePort":"","targetPort":""},{"id":"3d496538e23843a8bae94a532232862c","edgeType":"Branch","source":"4df2f3e9950f486c867d8fd23b58bab9","target":"00a0e79950f7490f96af50e204076ded","sourcePort":"","targetPort":"","expression":{"value":"add_more=true","mode":"query"},"label":"Yes"},{"id":"1e411a5d85e141f5a3b2bf1a98ec5cf9","edgeType":"Branch","source":"4df2f3e9950f486c867d8fd23b58bab9","target":"546724c58ba543239e29056c7f4a87db","sourcePort":"","targetPort":"","expression":{"value":"add_more=","mode":"query"},"label":"No"},{"id":"1844cc5e93f645f999faf908831e2e9a","edgeType":"Branch","source":"878eb31d80a94776ba268e794816155f","target":"6b3f3667f79f4a498102b748d560627a","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 33;\n})()\n"},"label":"Question Attachment"},{"id":"3b639c0ca3fe4d6bb4c948aacf3451ed","edgeType":"Edge","source":"2d422c2bc11548e9a6082e527dd1b070","target":"75fd1f87f14d49069c43b6b1ebc14f27","sourcePort":"","targetPort":""},{"id":"06416db66e8c4769a3431f7e386b4a8d","edgeType":"Branch","source":"75fd1f87f14d49069c43b6b1ebc14f27","target":"0cdc52cf18464db59f064d508319e655","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.validation_message.length === 0;\n})()\n"},"label":"Next Question"},{"id":"8f86f7e0dc964c3aba3c73e7d63d4339","edgeType":"Branch","source":"75fd1f87f14d49069c43b6b1ebc14f27","target":"b6c518610514481e9715465714946cc7","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.validation_message.length !== 0;\n})()\n"},"label":"Repeat Question"},{"id":"6717db5b09304140972ba42f2c6c7e7c","edgeType":"Edge","source":"b6c518610514481e9715465714946cc7","target":"6b3f3667f79f4a498102b748d560627a","sourcePort":"","targetPort":""},{"id":"aa4d1d5e71df4e24921178f3bbf8a122","edgeType":"Edge","source":"582c0c456dec4db8acfe9b77df825b0b","target":"ac3d2152cc8b42359d3978bf7e15b957","sourcePort":"","targetPort":""},{"id":"92690eef65284d3fb0ff18e5e00cf1c8","edgeType":"Branch","source":"ac3d2152cc8b42359d3978bf7e15b957","target":"6b615d9df9bc47e2b7a5564d93ac5ef7","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n   \n    if (itemJson.sys_class_name !== 'sc_cat_item_producer') {\n        return true;\n    }    \n    return false;\n})()\n"},"label":"No"},{"id":"df31e972049c488a8ad32c6fd0d5a770","edgeType":"Branch","source":"ac3d2152cc8b42359d3978bf7e15b957","target":"0184d7c3916a465cbf5db40b0876ec5c","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    if (itemJson.sys_class_name === 'sc_cat_item_producer') {\n        return true;\n    }    \n    return false;\n})()"},"label":"Yes"},{"id":"1fa294885f754dac954470ba166f1a6b","edgeType":"Branch","source":"0184d7c3916a465cbf5db40b0876ec5c","target":"6b615d9df9bc47e2b7a5564d93ac5ef7","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    /**\n     * Topic should pass execute_contextual_search as input if contextual search is required\n     *  It will execute contextual search only first time. For subsequent text variables, it will be skipped\n     */\n    var ans = vaInputs.question_text.getValue();\n    if(vaInputs.execute_contextual_search == 'false' || ans.trim().length === 0) {\n        return true;\n    }\n    return false;    \n})()\n"},"label":"No","fromNode":"- Execute Contextual Search","toNode":"6b615d9df9bc47e2b7a5564d93ac5ef7","toEdge":"1fa294885f754dac954470ba166f1a6b","addNode":{},"nodeEntries":{}},{"id":"59958027b2484e02aa0d041f867e07a8","edgeType":"Branch","source":"0184d7c3916a465cbf5db40b0876ec5c","target":"75150420125b4b35b7c0a92bb6df595b","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    /**\n     * Topic should pass execute_contextual_search as input if contextual search is required\n     *  It will execute contextual search only first time. For subsequent text variables, it will be skipped\n     */\n    var ans = vaInputs.question_text.getValue();\n    if(vaInputs.execute_contextual_search == 'true'  &amp;&amp; ans.trim().length !== 0) {\n        return true;\n    }\n    return false;     \n})()\n"},"label":"Yes"},{"id":"5b1e69381fb74f35bff636167c0dbffe","edgeType":"Edge","source":"75150420125b4b35b7c0a92bb6df595b","target":"bc4dd2417f2b4d45ad4bd93d0ccc1f29","sourcePort":"","targetPort":""},{"id":"98afe8cdc89445c6912a20f5ac4989d4","edgeType":"Branch","source":"bc4dd2417f2b4d45ad4bd93d0ccc1f29","target":"6b615d9df9bc47e2b7a5564d93ac5ef7","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    if(vaVars.contextualSearchVariable !== quesJson.sys_id) {\n        return true;\n    }\n    return false;\n})()"},"label":"No","fromNode":"- Contextual Search Variable ?","toNode":"6b615d9df9bc47e2b7a5564d93ac5ef7","toEdge":"98afe8cdc89445c6912a20f5ac4989d4","addNode":{},"nodeEntries":{}},{"id":"b937ef3a7eca46a4a767ba963a75928f","edgeType":"Branch","source":"bc4dd2417f2b4d45ad4bd93d0ccc1f29","target":"c5ed4dfe882448ecabd92590fb78d266","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    if(vaVars.contextualSearchVariable === quesJson.sys_id) {\n        return true;\n    }\n    return false;\n})()"},"label":"Yes"},{"id":"92b32b0c52a24220aaf83c95180eb4f4","edgeType":"Edge","source":"c5ed4dfe882448ecabd92590fb78d266","target":"b914fa16be5e47efa19b0084546b5354","sourcePort":"","targetPort":""},{"id":"24e1b8e743c24d6fb40cfa97d51722a9","edgeType":"Branch","source":"b914fa16be5e47efa19b0084546b5354","target":"6b615d9df9bc47e2b7a5564d93ac5ef7","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    if(vaVars.contextualSearchResultCount &lt;= 0){\n        return true;\n    }\n    return false;\n})()\n"},"label":"No","fromNode":"- Did the search return results ?","toNode":"6b615d9df9bc47e2b7a5564d93ac5ef7","toEdge":"24e1b8e743c24d6fb40cfa97d51722a9","addNode":{},"nodeEntries":{}},{"id":"0a67dcc31b874c74b19c42a0dd7243ba","edgeType":"Branch","source":"b914fa16be5e47efa19b0084546b5354","target":"3592d843108f434fa58b5df96a823484","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    if(vaVars.contextualSearchResultCount &gt; 0){\n        return true;\n    }\n    return false;\n})()\n"},"label":"Yes"},{"id":"47604095fb264e13b65521a4601f065c","edgeType":"Branch","source":"da00dbcf32824fc0834090fa4e2b1fe4","target":"5584f283a4ad4cc4a1e9bb7b815995a7","sourcePort":"","targetPort":"","expression":{"value":"did_articles_help=true","mode":"query"},"label":"Yes"},{"id":"4a3fb0c4870d423bad152529875506c5","edgeType":"Branch","source":"da00dbcf32824fc0834090fa4e2b1fe4","target":"6b615d9df9bc47e2b7a5564d93ac5ef7","sourcePort":"","targetPort":"","expression":{"value":"did_articles_help!=true","mode":"query"},"label":"No","fromNode":"- Decision","toNode":"6b615d9df9bc47e2b7a5564d93ac5ef7","toEdge":"4a3fb0c4870d423bad152529875506c5","addNode":{},"nodeEntries":{}},{"id":"a6a083d112374accad7cb5add1dd40af","edgeType":"Edge","source":"3592d843108f434fa58b5df96a823484","target":"2a1adc0010144721b5f6ff25df7767ec","sourcePort":"","targetPort":""},{"id":"5747dc57c37f4ff99f12ef2d42361945","edgeType":"Edge","source":"2a1adc0010144721b5f6ff25df7767ec","target":"da00dbcf32824fc0834090fa4e2b1fe4","sourcePort":"","targetPort":""},{"id":"e73825a0e38f4c13ba8c1e5650d8fb34","edgeType":"Edge","source":"e35912998f8b4253b9f42d262fdd04be","target":"7b179db7dcce414bb36ed41e173adbc2","sourcePort":"","targetPort":""},{"id":"1477080610164a3f8eea236a27654902","edgeType":"Branch","source":"7b179db7dcce414bb36ed41e173adbc2","target":"21456a8b702c44c3a1648fe0f1472d86","sourcePort":"","targetPort":"","expression":{"value":"confirm_catalog_item=true","mode":"query"},"label":"Yes"},{"id":"2f767d01f1774a3c93ebbc539a62bb42","edgeType":"Branch","source":"7b179db7dcce414bb36ed41e173adbc2","target":"55b2dfb927154bfdaaf75c76e189a7c9","sourcePort":"","targetPort":"","expression":{"value":"confirm_catalog_item=false","mode":"query"},"label":"No","fromNode":"- Confirmation Required ?","toNode":"55b2dfb927154bfdaaf75c76e189a7c9","toEdge":"2f767d01f1774a3c93ebbc539a62bb42","addNode":{},"nodeEntries":{}},{"id":"bd1c17103fe0453f8879389838b1bb48","edgeType":"Branch","source":"4998c18e83ad497f8b2d91684b84e9ca","target":"3fa5f8bbdc244349936619a8d5859b97","sourcePort":"","targetPort":"","expression":{"value":"order_item=true","mode":"query"},"label":"Order Now"},{"id":"96922a405dd84784bd2fb5895f5607f8","edgeType":"Branch","source":"3fa5f8bbdc244349936619a8d5859b97","target":"fa12d92bdbdc452dbb2f88722b2a0909","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    if (vaContext.catalog_builder_preview)\n       return false;\n    return true;\n})()\n"},"label":"Order"},{"id":"eb83b0336d924b97b754f81b12916d17","edgeType":"Branch","source":"3fa5f8bbdc244349936619a8d5859b97","target":"1b9840104d154172b3ba43acc4bdc9e5","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n   if (vaContext.catalog_builder_preview)\n      return true;\n   return false;\n})()\n"},"label":"Preview"},{"id":"c6ab5b5410244e82b3460aecbc88af6b","edgeType":"Branch","source":"812ab34cae2d4bf1881b0b32d49d95e6","target":"87417ea68c84464c8535a4b1bec092c5","sourcePort":"","targetPort":"","expression":{"value":"submit_producer=true","mode":"query"},"label":"Submit Now"},{"id":"a5a005b734ff4f8ab6df5176a82245c1","edgeType":"Branch","source":"87417ea68c84464c8535a4b1bec092c5","target":"f2cefa49e5fd447eb46e0ef9cece3656","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    if (vaContext.catalog_builder_preview)\n       return false;\n    return true;\n})()\n"},"label":"Submit"},{"id":"63d7fd3fc9f740da8960ef1724c9b5dd","edgeType":"Branch","source":"87417ea68c84464c8535a4b1bec092c5","target":"1b9840104d154172b3ba43acc4bdc9e5","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n   if (vaContext.catalog_builder_preview)\n      return true;\n   return false;\n})()\n"},"label":"Preview"},{"id":"73ec02d9917140e4a275a709f0b8ed22","edgeType":"Edge","source":"1b9840104d154172b3ba43acc4bdc9e5","target":"5ffe3110a64841b29fff1b548dc85d29","sourcePort":"","targetPort":""},{"id":"0f0ee62c3b0c4eb983adce54739f3415","edgeType":"Edge","source":"5ffe3110a64841b29fff1b548dc85d29","target":"5584f283a4ad4cc4a1e9bb7b815995a7","sourcePort":"","targetPort":""},{"id":"90039d20f4ba421d97991994664651f3","edgeType":"Edge","source":"00a0e79950f7490f96af50e204076ded","target":"99e6da25412d4901bb94a9c117ef0a90","sourcePort":"","targetPort":""},{"id":"346396a8c7a644cc9703dbdfdd379eb2","edgeType":"Branch","source":"99e6da25412d4901bb94a9c117ef0a90","target":"da27ef14b40b4bcdbc2cb9626f7093f8","sourcePort":"","targetPort":"","expression":{"value":"vaInputs.upload_attachmentISNOTEMPTY","mode":"query"},"label":"Attachment uploaded"},{"id":"bd24272de651401083524f36974ab2a8","edgeType":"Branch","source":"99e6da25412d4901bb94a9c117ef0a90","target":"546724c58ba543239e29056c7f4a87db","sourcePort":"","targetPort":"","expression":{"value":"vaInputs.upload_attachmentISEMPTY","mode":"query"},"label":"Attachment skipped"},{"id":"a8fa9dd861df4ea19b096dcd439d9f44","edgeType":"Branch","source":"878eb31d80a94776ba268e794816155f","target":"f4d72b92f6c247ebb4bcd115bc871caf","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 32;\n})()\n"},"label":"Rich Text Label Question"},{"id":"841f02b9ab4b4c6a82dcc1c5bb2e7210","edgeType":"Edge","source":"f4d72b92f6c247ebb4bcd115bc871caf","target":"6b615d9df9bc47e2b7a5564d93ac5ef7","sourcePort":"","targetPort":""},{"id":"4a9d5a03d01e4501b3e2dd2ea1af880c","edgeType":"Branch","source":"55b2dfb927154bfdaaf75c76e189a7c9","target":"ffea21ee6e894c5385ad01bd2b8f2ebe","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n     var itemJson = JSON.parse(vaVars.itemJSON);\n    var qIndex = parseInt(vaVars.qIndex);\n    //qIndex is -1 initially, we reset this before search again step \n\n    do {\n        qIndex++;\n        var question = itemJson.variables[qIndex];\n    }\n    while(question &amp;&amp; (!question.visible || question.readonly || question.sys_readonly));\n\n    if (question) {\n        vaVars.qIndex = qIndex;\n        return true;\n    }\n    return false;\n})()"},"label":"Questions Left"},{"id":"e46be765a597438582b129a8688fc548","edgeType":"Edge","source":"ffea21ee6e894c5385ad01bd2b8f2ebe","target":"e870da0711d44663bd032d95360b04a5","sourcePort":"","targetPort":""},{"id":"94268d6d14a34ebbb1aed5450f79c488","edgeType":"Edge","source":"e870da0711d44663bd032d95360b04a5","target":"1603b656f6484951be725e810923e7a4","sourcePort":"","targetPort":""},{"id":"06260bf8c336447c9d5151715ed837a4","edgeType":"Branch","source":"1603b656f6484951be725e810923e7a4","target":"878eb31d80a94776ba268e794816155f","sourcePort":"","targetPort":"","expression":{"value":"vaInputs.proceed_with_default=","mode":"query"},"label":"Do not proceed with default value"},{"id":"27b5cf5a117043b8b755cca361486631","edgeType":"Branch","source":"1603b656f6484951be725e810923e7a4","target":"6b615d9df9bc47e2b7a5564d93ac5ef7","sourcePort":"","targetPort":"","expression":{"value":"vaInputs.proceed_with_default=true","mode":"query"},"label":"Proceed with default value"},{"id":"c7e9b72b75a64ec18d4631b4ec71afb4","edgeType":"Edge","source":"fa12d92bdbdc452dbb2f88722b2a0909","target":"61f3117ef2714e249579496b7ee83026","sourcePort":"","targetPort":""},{"id":"a3ef3f87333948808c83ee50bb31192b","edgeType":"Branch","source":"61f3117ef2714e249579496b7ee83026","target":"5584f283a4ad4cc4a1e9bb7b815995a7","sourcePort":"","targetPort":"","expression":{"value":"vaInputs.show_end_state_card=","mode":"query"},"label":"No","fromNode":"24 Show end state card?","toNode":"5584f283a4ad4cc4a1e9bb7b815995a7","toEdge":"a3ef3f87333948808c83ee50bb31192b","addNode":{},"nodeEntries":{}},{"id":"63f972c679e94050bf62105dbc8e2285","edgeType":"Edge","source":"c37acca2c10d45fa9ff35e522d74804a","target":"154cbe739e4b44eb9b9b483381c88293","sourcePort":"","targetPort":""},{"id":"cc8f87e8d6014e6a934b9a5fecd6170c","edgeType":"Branch","source":"154cbe739e4b44eb9b9b483381c88293","target":"582c0c456dec4db8acfe9b77df825b0b","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\n    return type === 2 || type === 6 || type === 16;\n})()"},"label":"Text Type"},{"id":"cf2d280ae99c4a08ad42cadee07a544a","edgeType":"Branch","source":"154cbe739e4b44eb9b9b483381c88293","target":"96762c6274304a06915c1a966833a822","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 26;\n})()\n"},"label":"Email Type"},{"id":"6c6928fdd1b74571ac9149c118cbd443","edgeType":"Branch","source":"154cbe739e4b44eb9b9b483381c88293","target":"abd3468ad6b34517a91f5df07375601c","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 28;\n})()\n"},"label":"IP Address Type"},{"id":"f40a8bfd2b8f44e2875611ec7c0cd451","edgeType":"Branch","source":"154cbe739e4b44eb9b9b483381c88293","target":"5aade5fd320140ab9aa390d6fa59fa44","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 27;\n})()\n"},"label":"URL Type"},{"id":"0d2e906a0e7e47ffb3c8cd76504ffc78","edgeType":"Branch","source":"878eb31d80a94776ba268e794816155f","target":"8372de21011a4fc58f7b052c80846961","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\n    return type === 1 || type === 3 || type === 4 || type === 5 || type === 18 || type === 22;\n})()\n"},"label":"Choice Question"},{"id":"3cfb23bfec6845dca502e5883b98ed13","edgeType":"Branch","source":"8372de21011a4fc58f7b052c80846961","target":"a6de984d0ecf425c86836a588cf01406","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaContext.deviceType === \"mweb\";\n})()\n"},"label":"Mobile/Web Client"},{"id":"e642274931084d4fa3436ef802f5a4a9","edgeType":"Branch","source":"8372de21011a4fc58f7b052c80846961","target":"5b7e42b59c0c41dd800cd09009c2711d","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return !(vaContext.deviceType === \"mweb\");\n})()\n"},"label":"Other Channels"},{"id":"1a3bbe06339542f6a1cb5a789b1a59e2","edgeType":"Edge","source":"5b7e42b59c0c41dd800cd09009c2711d","target":"6422f13382434440a9ac497f29753423","sourcePort":"","targetPort":""},{"id":"eba1a64ccd4543ccb6d3472f7f854a0c","edgeType":"Branch","source":"6422f13382434440a9ac497f29753423","target":"44cffaffc14c498289ba2e234f962440","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.question_choice_other_channels.getValue() === \"prev\";\n})()\n"},"label":"Question Choice Prev"},{"id":"59b7d06f0b2b4898ad2f35bfd9b78bad","edgeType":"Edge","source":"44cffaffc14c498289ba2e234f962440","target":"5b7e42b59c0c41dd800cd09009c2711d","sourcePort":"","targetPort":""},{"id":"a1e5456a6c7c42929f2f4b3242864d2f","edgeType":"Branch","source":"6422f13382434440a9ac497f29753423","target":"48667218290f4e919de3cb7fa3d59088","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.question_choice_other_channels.getValue() === \"next\";\n})()\n"},"label":"Question Choice Next"},{"id":"00927ba1f9244346b95a772870af7309","edgeType":"Edge","source":"48667218290f4e919de3cb7fa3d59088","target":"5b7e42b59c0c41dd800cd09009c2711d","sourcePort":"","targetPort":""},{"id":"ea27cd0e97d04919845daf44dfcfdb57","edgeType":"Branch","source":"6422f13382434440a9ac497f29753423","target":"2cde30fb4daf4251905d1b51610d3c70","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var valuePicked = vaInputs.question_choice_other_channels.getValue();\n    var condition = valuePicked !== 'next' &amp;&amp; valuePicked !== 'prev';\n    if (condition) {\n        vaVars.count = 0;\n        vaVars.index = 0;\n    }\n    return condition;\n})();"},"label":"Question Choice Chosen"},{"id":"41f15eeb63ac488189d723cafcafe6ae","edgeType":"Edge","source":"a6de984d0ecf425c86836a588cf01406","target":"2cde30fb4daf4251905d1b51610d3c70","sourcePort":"","targetPort":""},{"id":"d1fcd44b702f48dfaf929e4600316599","edgeType":"Edge","source":"2cde30fb4daf4251905d1b51610d3c70","target":"6b615d9df9bc47e2b7a5564d93ac5ef7","sourcePort":"","targetPort":""},{"id":"2187bf0cfdbb40b2910b791b2c4814ff","edgeType":"Branch","source":"878eb31d80a94776ba268e794816155f","target":"98a9957e0e124b8f997a4ac08a4b387a","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n   return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 8;\n})()"},"label":"Reference Question"},{"id":"9777dcca32a74ff2b0c263b7c596a395","edgeType":"Branch","source":"98a9957e0e124b8f997a4ac08a4b387a","target":"df94abcde47a4fec8772fb5ccc8a00e8","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaContext.deviceType === \"mweb\";\n})()\n"},"label":"Mobile/Web Client"},{"id":"6abb436fff2649beb2332cbfa71e79e7","edgeType":"Branch","source":"98a9957e0e124b8f997a4ac08a4b387a","target":"7628e3dd4aa14fc490d21c688cd82546","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return !(vaContext.deviceType === \"mweb\");\n})()"},"label":"Other Channels"},{"id":"54f88ef1bf254b4a9744ec8bc3c12d73","edgeType":"Edge","source":"7628e3dd4aa14fc490d21c688cd82546","target":"30f1d676900d4524905475a5b992367a","sourcePort":"","targetPort":""},{"id":"0d925a6a25ce4b4782d87e59b8b7d7ae","edgeType":"Edge","source":"30f1d676900d4524905475a5b992367a","target":"66567f05291b438bbc89884f02881a90","sourcePort":"","targetPort":""},{"id":"d964e1fc22864fd983966c194daa2a62","edgeType":"Branch","source":"66567f05291b438bbc89884f02881a90","target":"0b59dd57f1fa4d61b74fb4859f05693b","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.question_reference_other_channels.getValue() === \"prev\";\n})()\n"},"label":"Question Reference Prev"},{"id":"f145104fc3f044439180e45468bade56","edgeType":"Edge","source":"0b59dd57f1fa4d61b74fb4859f05693b","target":"30f1d676900d4524905475a5b992367a","sourcePort":"","targetPort":""},{"id":"02919a26e2b0492b8695174b5b6f4072","edgeType":"Branch","source":"66567f05291b438bbc89884f02881a90","target":"8a6e1170ba97426f914f9221e2c30374","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.question_reference_other_channels.getValue() === \"next\";\n})()\n"},"label":"Question Reference Next"},{"id":"078fba3206f54b65a1b287ee1918f32a","edgeType":"Edge","source":"8a6e1170ba97426f914f9221e2c30374","target":"30f1d676900d4524905475a5b992367a","sourcePort":"","targetPort":""},{"id":"4a8cf864d714481c992df901a0c67933","edgeType":"Branch","source":"66567f05291b438bbc89884f02881a90","target":"99de51bffe6641a0999446f1642076f6","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var valuePicked = vaInputs.question_reference_other_channels.getValue();\n    var chosenCondition = valuePicked &amp;&amp; valuePicked !== 'next' &amp;&amp; valuePicked !== 'prev' &amp;&amp; valuePicked !== 'search';\n    var skippedCondition = vaVars.no_records_found === \"false\" &amp;&amp; !valuePicked;\n    if (chosenCondition || skippedCondition) {\n        vaVars.count = 0;\n        vaVars.index = 0;\n    }\n    \n    return chosenCondition || skippedCondition;\n})();"},"label":"Question Reference Chosen/Skipped"},{"id":"c4adaf3414db4a969e31764ca1c4ab2b","edgeType":"Branch","source":"66567f05291b438bbc89884f02881a90","target":"7628e3dd4aa14fc490d21c688cd82546","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var valuePicked = vaInputs.question_reference_other_channels.getValue();\n    var condition = (vaVars.no_records_found === \"true\") || valuePicked === \"search\";\n    if (condition) {\n        vaVars.count = 0;\n        vaVars.index = 0;\n    }\n    return condition;\n})()\n"},"label":"Search Question Reference"},{"id":"ba87608d5d7f4c5b8dbea1a87134e51b","edgeType":"Edge","source":"df94abcde47a4fec8772fb5ccc8a00e8","target":"99de51bffe6641a0999446f1642076f6","sourcePort":"","targetPort":""},{"id":"a3a51f75cb8e4244bfb7304559700edf","edgeType":"Edge","source":"99de51bffe6641a0999446f1642076f6","target":"6b615d9df9bc47e2b7a5564d93ac5ef7","sourcePort":"","targetPort":""},{"id":"35573540837c42a7be7cf82364158da1","edgeType":"Branch","source":"61f3117ef2714e249579496b7ee83026","target":"b8833f1ad8b04981bc101499c1e738b7","sourcePort":"","targetPort":"","expression":{"value":"vaInputs.show_end_state_card=true","mode":"query"},"label":"Yes","fromNode":"24 Show end state card?","toNode":"5584f283a4ad4cc4a1e9bb7b815995a7","toEdge":"35573540837c42a7be7cf82364158da1","addNode":{},"nodeEntries":{}}]}}}</graph>
        <name>_PRVW__9fdc20d793842110ea79da28e1887074</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2023-01-02 17:41:41</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>bfdc20d71b8421103ddb639bbc4bcb7c</sys_id>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="EDClinic" source="x_926609_edclinic">dc2fa61c1b3611103ddb639bbc4bcbb6</sys_package>
        <sys_policy/>
        <sys_scope display_value="EDClinic">dc2fa61c1b3611103ddb639bbc4bcbb6</sys_scope>
        <sys_update_name>sys_cb_design_topic_bfdc20d71b8421103ddb639bbc4bcb7c</sys_update_name>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
